{"title": "Python 2.6 升级至 Python 2.7 的实践心得 - wsgzao ", "index": "python", "content": "前言\nCentOS 6.8 安装 Python 2.7.13，因为软件版本上的需求所以考虑将 Python 升级至 2.7.13，加上生产环境还是以 RHEL 6 为主，互联网自动化运维平台大多数也推荐以Python 2.7.x + CentOS 6.x 来操作，选择 Python 2 还是 Python 3 也没有定论，找到适合的搭配即可。\nPython 2.6 升级至 Python 2.7 的实践心得\n更新历史\n2017年04月26日 - 初稿\n阅读原文 - https://wsgzao.github.io/post...\n扩展阅读\nPython - https://www.python.org/PyPI - https://pypi.python.org/pypipip - https://pip.pypa.io/en/stable...\n\n简单安装\n因为Python 2.7.13以后版本会自动完善yum配置，所以不必参考以前的网上文章去修改其他地方\n# 查看当前系统中的 Python 版本，返回 Python 2.6.6 为正常\npython --version\n\nPython 2.6.6\n\n# 检查 CentOS 版本，返回 CentOS release 6.8 (Final) 为正常\ncat /etc/redhat-release\n\nCentOS release 6.8 (Final)\n\n# 安装所有的开发工具包\nyum groupinstall -y \"Development tools\"\n# 安装其它的必需包\nyum install -y zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel\n\n# 下载、编译和安装 Python 2.7.13\n#wget https://www.python.org/ftp/python/2.7.13/Python-2.7.13.tgz\ntar zxf Python-2.7.13.tgz\ncd Python-2.7.13\n./configure\nmake && make install\n\n# 查看新的 Python 版本，返回 Python 2.7.13 为正常\npython --version\n\nPython 2.7.13\n\nansible离线安装实践\n这里利用了一些内网离线安装ansible的小技巧，相关文件我会上传至网盘\n# Install Python\ntar xf Python-2.7.13.tgz\ncd Python-2.7.13\n./configure\nmake\nmake install\n\n# ImportError: No module named six.moves\ntar xf six-1.10.0.tar.gz\ncd six-1.10.0\npython setup.py install\ncd ..\n# ImportError: No module named packaging.version\ntar xf packaging-16.8.tar.gz\ncd packaging-16.8\npython setup.py install\ncd ..\n# ImportError: No module named pyparsing\ntar xf pyparsing-2.2.0.tar.gz\ncd pyparsing-2.2.0\npython setup.py install\ncd ..\n# ImportError: No module named appdirs\ntar xf appdirs-1.4.3.tar.gz\ncd appdirs-1.4.3\npython setup.py install\ncd ..\n# Install Setuptools\nunzip setuptools-34.2.0.zip\ncd setuptools-34.2.0\npython setup.py install\ncd ..\n# Install pip\ntar xf pip-9.0.1.tar.gz\ncd pip-9.0.1\npython setup.py install\ncd ..\n\n# pip 离线下载依赖包\npip install -d ~/tmp/ ansible\npip install -d ~/tmp/ ansible-cmdb\n\n# pip 离线安装\npip install ansible --index-url=http://172.31.197.1:7000/simple/ --trusted-host=172.31.197.1\npip install ansible-cmdb --index-url=http://172.31.197.1:7000/simple/ --trusted-host=172.31.197.1\n\n# 查看安装好的版本\n[root@ansible-wangao ansible]# pip -V\npip 9.0.1 from /usr/local/lib/python2.7/site-packages/pip-9.0.1-py2.7.egg (python 2.7)\n\n[root@ansible-wangao ansible]# ansible --version\nansible 2.3.0.0\n  config file = /etc/ansible/ansible.cfg\n  configured module search path = Default w/o overrides\n  python version = 2.7.13 (default, Apr 25 2017, 17:19:23) [GCC 4.4.7 20120313 (Red Hat 4.4.7-17)]\n\n[root@ansible-wangao ansible]# ansible-cmdb --version\nansible-cmdb v1.20\n\n# 更换豆瓣pip源\nvim  $HOME/.pip/pip.conf\n\n[global]\nindex-url = https://pypi.doubanio.com/simple/\n[install]\n\ntrusted-host=pypi.doubanio.com\n\nWindows 安装 Python 2.7.x\nWindows下安装扩展包可能没有想象中那么顺利，遇到安装不上的包推荐去下面这个网址看看\nhttp://www.lfd.uci.edu/~gohlk...\n下载Python，如 2.7.13https://www.python.org/downlo...https://www.python.org/ftp/py...\n安装时注意勾选环境变量Add python.exe to Path\n安装python2.7.13默认自带pip版本为9.0.1PS C:UsersAdministrator> pip -Vpip 9.0.1 from c:python27libsite-packages (python 2.7)\n安装Python后升级pippython -m pip install --upgrade pip\n# 更换pypi国内源，运行以下python代码会自动建立pip.ini\nimport os\n\nini=\"\"\"[global]\nindex-url = https://pypi.doubanio.com/simple/\n[install]\ntrusted-host=pypi.doubanio.com\n\"\"\"\npippath=os.environ[\"USERPROFILE\"]+\"\\\\pip\\\\\"\n\nif not os.path.exists(pippath):\n    os.mkdir(pippath)\n\nwith open(pippath+\"pip.ini\",\"w+\") as f:\n    f.write(ini)\n离线安装包\nhttp://pan.baidu.com/s/1o7J8QBw\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "2"}