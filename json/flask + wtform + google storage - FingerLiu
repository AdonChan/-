{"title": "flask + wtform + google storage - FingerLiu ", "index": "python,flask,storage", "content": "项目需要使用 flask 上传、下载文件到 google storage 上，\n搜了一圈没有能直接结合 wtform 使用的插件，所以动手造了个轮子。\n只实现了基本的上传，下载的功能，后续可能会完善预览、权限控制等功能。\n安装和使用方法参见 README --> https://github.com/FingerLiu/...\nflask-wtf-storage\nextend flask-wtf to support saving data to google storage\nInstallation\npip install flask-wtf-storage\nUsage\n1 首先引入我们需要的头文件\nfrom flask_wtf import FlaskForm\nfrom wtforms import StringField, SubmitField\nfrom flask_wtf_storage import (\n    MultipleFileField, FileField, FileDisplayField, StorageForm\n)\n2 然后在 form 中定义上传文件要使用的 form 及字段class RegistrationForm(StorageForm):\nwebsite = StringField('website')\nsingle_file_example = FileField()\nmulti_files_example = MultipleFileField()\nsubmit = SubmitField('OK')\n\n这里，为了演示，我们使用了 FileField 和 MultipleFileField 两种类型的字段。\n\nFileField 用来实现只能上传一个文件的 Input 框， MultipleFileField 用来实现能够选择多个文件的 Input 框。\n\n3 然后在 view 中使用该 form 并传递给 template\n\n@current_app.route('/register/', methods=['GET', 'POST'])def register():\nform = RegistrationForm()\nif form.validate_on_submit():\n    # 存到　datastore\n    data = form.data\n    data.pop('csrf_token')\n    data.pop('password2')\n    login(data)\n    return redirect(url_for('profile.html'))\nreturn render_template('register.html', form=form)\n4 最后像使用普通的 wtform 一样在 template 中 render form 即可。\n\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}