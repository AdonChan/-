{"title": "itchatmp：完备优雅的微信公众号接口 - Python玩具集 ", "index": "微信,tornado,python", "content": "itchatmp\nEnglish version\nitchatmp是一个开源的微信公众号、企业号接口，使用python调用微信公众号从未如此简单。\n充分包装，不需要对于底层的任何了解，仅需掌握Python即可使用。\n基于tornado框架，轻松满足效率需求。支持普通使用、nginx反向代理与wsgi。\n同样的命令，支持同步与协程调用，适合各层次开发者使用。\n与个人号接口itchat共享类似的操作方式，学习一次掌握两个工具。\n安装\n可以通过本命令安装itchatmp：\npip install itchatmp\n快速入门\n有了itchatmp，如果你想要回复发给自己的文本消息，只需要这样：\nimport itchatmp\n\nitchatmp.update_config(itchatmp.WechatConfig(\n    token='yourToken',\n    appId = 'yourAppId',\n    appSecret = 'yourAppSecret'))\n\n@itchatmp.msg_register(itchatmp.content.TEXT)\ndef text_reply(msg):\n    return msg['content']\n\nitchatmp.run()\n一些进阶应用可以在Advanced uses中看到，或者你也可以阅览文档。\n演示机器人\n这是一个基于这一项目的开源小机器人，百闻不如一见，有兴趣可以尝试一下。\n\n截屏\n\n进阶使用\n企业号配置\n在配置时设置copId而非appId即可。\n另，由于企业号没有明文模式，所以必须将加密模式设置为安全。\n具体的设置可以看这里。\n协程使用\n如果你需要使用协程版本的itchatmp，你需要另外安装一个组件：\npip install itchatmphttp\n这样，你的itchatmp就变成协程版本了。同样，删除以后就变回了线程池版本。\n例如回复信息的操作，协程也只需要这样写：\nimport itchatmp\nfrom tornado import gen\n\nitchatmp.update_config(itchatmp.WechatConfig(\n    token='yourToken',\n    appId = 'yourAppId',\n    appSecret = 'yourAppSecret'))\n\n@itchatmp.msg_register(itchatmp.content.TEXT)\ndef text_reply(msg):\n    yield gen.sleep(3)\n    r = yield itchatmp.send('First message', msg['FromUserName'])\n    print('First message sent: %s' % r)\n    yield gen.sleep(3)\n    r = yield itchatmp.send('First message', msg['FromUserName'])\n    print('Second message sent: %s' % r)\n\nitchatmp.run()\nitchatmp里面所有的方法都变成了协程方法，如果你不熟悉协程建议不要使用，线程池也足够满足普通需求。\n如果你问出类似为什么time.sleep阻塞了协程的问题，我会很困扰的。\nWSGI使用\n如果你需要生成一个能够在类似SAE的平台上包装的应用，你可以这样生成：\napp = itchatmp.run(isWsgi=True)\n如果你还是无法配置，请阅读文档一栏的部署部分。\n意见与建议\n如果有什么问题或者建议都可以在这个Issue和我讨论\n当然也可以加入我们新建的QQ群讨论：438747166\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "1"}