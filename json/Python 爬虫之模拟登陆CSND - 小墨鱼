{"title": "Python 爬虫之模拟登陆CSND - 小墨鱼 ", "index": "网页爬虫,python", "content": "Python 爬虫之模拟登陆CSND\n工具\n基本的脚本语言是Python，虽然不敢说是最好的语言，至少是最好的之一（0.0），用模拟登陆，我们需要用到多个模块，如下：\n\nrequests\nBeautifulSoup\n\nrequests\n安装\n下载源码安装\ngit clone git://github.com/kennethreitz/requests.git\ncd requests\npip install .\npip\npip install requests\nBeautifulSoup\n介绍\nBeautiful Soup 是一个可以从HTML或XML文件中提取数据的Python库.它能够通过你喜欢的转换器实现惯用的文档导航,查找,修改文档的方式.Beautiful Soup会帮你节省数小时甚至数天的工作时间.\n安装\neasy_install beautifulsoup4\npip install beautifulsoup4\n使用\nfrom bs4 import BeautifulSoup\n\nsoup = BeautifulSoup(open(\"index.html\"))\n\nsoup = BeautifulSoup(\"<html>data</html>\", 'lxml')\n说明\nrequests主要是为了利用requests的高级会话机制，requests的会话对象可以让我们跨请求保持某些参数，比如cookies, headers等，\n会话对象让你能够跨请求保持某些参数。它也会在同一个 Session 实例发出的所有请求之间保持 cookie， 期间使用 urllib3 的 connection pooling 功能。所以如果你向同一主机发送多个请求，底层的 TCP 连接将会被重用，从而带来显著的性能提升。\n而BeautifulSoup主要是方便解析HTML源码，从中获取请求需要的一些参数\n完整代码\n# -*- coding: UTF-8 -*-\nfrom bs4 import BeautifulSoup\nimport requests\n\ns = requests.Session()\n\n\nclass CSDN:\n\n    def __init__(self, username, password):\n        self.username = username\n        self.password = password\n        self.login_url = 'https://passport.csdn.net/account/login'\n        self.headers = {\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebK'\n                          'it/537.36 (KHTML, like Gecko) Chrome/61.0.3163.1'\n                          '00 Safari/537.36 OPR/48.0.2685.52',\n            'Referer': 'http://my.csdn.net/my/mycsdn'\n        }\n\n    def login(self):\n        params = {\n            'from': 'http://my.csdn.net/my/mycsdn'\n        }\n        html = s.get(self.login_url, params=params, headers=self.headers)\n        soup = BeautifulSoup(html.content, 'lxml')\n        lt = soup.select('input[name=\"lt\"]')[0].get('value')\n        execution = soup.select('input[name=\"execution\"]')[0].get('value')\n        event_id = soup.select('input[name=\"_eventId\"]')[0].get('value')\n        data = {\n            'username': self.username,\n            'password': self.password,\n            'rememberMe': 'true',\n            'lt': lt,\n            'execution': execution,\n            '_eventId': event_id\n        }\n        r = s.post(self.login_url, data=data)\n        self.headers['Referer'] = 'http://passport.csdn.net/account/login?from=http%3A%2F%2Fmy.csdn.net%2Fmy%2Fmycsdn'\n        resp = s.get('http://my.csdn.net/my/mycsdn', headers=self.headers)\n        print(resp.text)\n\n\nusername = input('请输入账号：')\npassword = input('请输入密码：')\ncs = CSDN(username, password)\ncs.login()\n\n项目地址： 模拟京东登录\n吐槽QQ群： 173318043\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "5"}