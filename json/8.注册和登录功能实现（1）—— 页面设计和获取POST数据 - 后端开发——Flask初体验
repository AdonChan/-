{"title": "8.注册和登录功能实现（1）—— 页面设计和获取POST数据 - 后端开发——Flask初体验 ", "index": "flask,python", "content": "在导航条中，右侧有登录和注册两个链接，储存用户数据的Users模型也有了，现在我们来实现登录和注册的功能。先来看注册功能的实现，新建一个视图函数，如下:\n@app.route('/register/')\ndef register():\n    return render_template('register.html')\n\n在导航条模板base.html中，为注册添加链接，使用url_for函数将其href属性值修改为register.html，如下：\n<li><a href=\"{{ url_for('register') }}\">注册</a></li>\n接下来我们要去制作register.html了，这部分是基础的html/css知识，控件也是用的Bootstrap框架，最终注册页http://127.0.0.1:5000/register/的效果图如下（结尾贴出代码）：\n\nregister.html中的表单控件，我们设置了其方法为POST，注册按钮的type为submit，这样点击提交按钮的时候，浏览器就会以POST方法去请求当前网址，但我们的视图函数默认只能接受GET方法，因此我们要为其添加POST方法，并使用flask中的request对象获取表单提交的数据，最终视图函数代码如下：\n@app.route('/register/', methods=['GET', 'POST'])\ndef register():\n    if request.method == 'GET':\n        return render_template('register.html')\n    else:\n        username = request.form.get('username')\n        password1 = request.form.get('password1')\n        password2 = request.form.get('password2')\n        print(username, password1, password2)\n        return ' '\nrequest.form.get方法需要传入表单控件的name属性的值，这样就能获取到对应的填入到表单中的值了，为了演示，我们在结尾将其打印了出来，结果显示无误，说明后端已经获取到了POST提交的数据。登陆页面也是一样的原理，拿register.html简单修改成login.html，模仿register再增加一个login视图函数，然后访问http://127.0.0.1:5000/login/，效果如下：\n\n结尾贴上register.html的内容：\n{% extends 'base.html' %}\n\n{% block static_files %}\n<link rel=\"stylesheet\" href=\"{{ url_for('static',filename='css/register_login.css.css') }}\"/>\n{% endblock %}\n\n{% block page_name %}注册{% endblock %}\n\n{% block body_part %}\n<h3>注册</h3>\n<form class=\"form\" action=\"\" method=\"POST\">\n    <div class=\"input-group input-group-lg\">\n      <span class=\"input-group-addon\" id=\"sizing-addon1\">用户</span>\n      <input type=\"text\" class=\"form-control\" placeholder=\"请输入用户名\" aria-describedby=\"sizing-addon1\" name=\"username\">\n    </div>\n    <div class=\"input-group input-group-lg\">\n      <span class=\"input-group-addon\" id=\"sizing-addon1\">密码</span>\n      <input type=\"password\" class=\"form-control\" placeholder=\"请输入密码\" aria-describedby=\"sizing-addon1\" name=\"password1\">\n    </div>\n    <div class=\"input-group input-group-lg\">\n      <span class=\"input-group-addon\" id=\"sizing-addon1\">密码</span>\n      <input type=\"password\" class=\"form-control\" placeholder=\"请再次确认密码\" aria-describedby=\"sizing-addon1\" name=\"password2\">\n    </div>\n    <div class=\"register-button\">\n        <button type=\"submit\" class=\"btn btn-primary btn-lg btn-block\">注册</button>\n    </div>\n</form>\n{% endblock %}\n代码中引入的register_login.css是register.html和login.html通用的，其内容如下：\nh3{\n    text-align: center;\n    padding-top: 10px;\n}\n\n.form{\n    width: 400px;\n    margin: 0 auto;\n}\n\nform.form > div{\n    padding: 8px;\n}\n此外还对导航条模板做了简单的调整，第一是增加了一个block，给每个继承它的html一个放自定义css文件的地方，第二是在body中增加了一个div块，即register.html和login.html中间白色的内容区域，最终base.html代码如下：\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <link rel=\"stylesheet\" href=\"https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css\" integrity=\"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\" crossorigin=\"anonymous\">\n    <script src=\"https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js\"></script>\n    <script src=\"https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js\" integrity=\"sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa\" crossorigin=\"anonymous\"></script>\n    <link rel=\"stylesheet\" href=\"{{ url_for('static',filename='css/base.css') }}\"/>\n    <link rel=\"shortcut icon\" href=\"{{ url_for('static', filename='images/favicon.ico') }}\">\n    {% block static_files %}{% endblock %}\n    <title>{% block page_name %}{% endblock %}-HarpQA</title>\n</head>\n<body>\n    <nav><!-- 导航条内容 -->\n        ...省略...\n        <li><a href=\"{{ url_for('login') }}\">登录</a></li>\n        <li><a href=\"{{ url_for('register') }}\">注册</a></li>\n        ...省略...\n    </nav>\n    <div class=\"body-container\">\n        {% block body_part %}\n        {% endblock %}\n    </div>\n</body>\n</html>\nbase.css也添加了<div class=\"body-container\">的样式：\n.body-container{\n    width: 600px;\n    background: white;\n    margin: 0 auto;\n    border-radius: 5px;\n}\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "1"}