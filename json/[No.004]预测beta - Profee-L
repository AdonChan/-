{"title": "[No.004]预测beta - Profee-L ", "index": "python", "content": "#encoding:utf-8\n#!/usr/local/bin/python2.7\nfrom __future__ import division\nimport MySQLdb as mdb\nimport re\n\ndef myAdd(x,y):\n    return x+y\n\ndef myMin(x,y):\n    return x-y\n\ndef preZjq(cur,scr,w,d,l,a):\n    print \"======总进球预测======\"\n    sql_wd = \"select zjq,count(*) from results where win between %s and %s and dog between %s and %s group by zjq order by count(*)\" % (myMin(w,a),myAdd(w,a),myMin(d,a),myAdd(d,a))\n    sql_dl = \"select zjq,count(*) from results where dog between %s and %s and los between %s and %s group by zjq order by count(*)\" % (myMin(d,a),myAdd(d,a),myMin(l,a),myAdd(l,a))\n    sql_wl = \"select zjq,count(*) from results where win between %s and %s or los between %s and %s group by zjq order by count(*)\" % (myMin(w,a),myAdd(w,a),myMin(l,a),myAdd(l,a))\n    temp_wd=[\"win&dog\"+\"\\n\"]\n    temp_wd.append((\"场次：%s \\n\") % str(scr))\n    temp_wd.append((\"win:%s  dog:%s  los:%s  acc:%s\"+\"\\n\") % (str(w),str(d),str(l),str(a)))\n    temp_dl=[\"win&dog\"+\"\\n\"]\n    temp_dl.append((\"场次：%s \\n\") % str(scr))\n    temp_dl.append((\"win:%s  dog:%s  los:%s  acc:%s\"+\"\\n\") % (str(w),str(d),str(l),str(a)))\n    temp_wl=[\"win&dog\"+\"\\n\"]\n    temp_wl.append((\"场次：%s \\n\") % str(scr))\n    temp_wl.append((\"win:%s  dog:%s  los:%s  acc:%s\"+\"\\n\") % (str(w),str(d),str(l),str(a)))\n\n    f = open(\"/root/bet/prediction.txt\",'a')\n\n    sum_wd=0\n    #wd_alldata:前4个进球数以及比例\n    wd_alldata=[]\n    #将SQL的所有结果保存到文件中\n    cur.execute(sql_wd)\n    for item in cur.fetchall():\n        temp_wd_str1=str(item[0])+\"球,\"\n        temp_wd.append(temp_wd_str1)\n        temp1_wd=str(item[1])\n        sum_wd+=item[1]\n        temp_wd_str2 = re.search(\"\\d{1,3}\",temp1_wd).group()\n        temp_wd.append(temp_wd_str2+'\\n')\n    temp_wd.append(\"总共：\"+str(sum_wd)+\"场\")\n    temp_wd.append('\\n\\n\\n')\n    cur.execute(sql_wd)\n    for d in cur.fetchall():\n        wd_alldata.append(str(d[0]))\n        tmp4=str(d[1])\n        temp_srt3 = re.search(\"\\d{1,3}\",tmp4).group()\n        wd_alldata.append(temp_srt3)\n    for item in temp_wd:\n        f.writelines(str(item))\n    l = len(wd_alldata)\n    print (\"场次: %s \\n主赔+平陪-->\"+\"一共 \"+str(sum_wd)+\"场\") % str(scr)\n    if l==2:\n        temp_wd_alldata = wd_alldata[-2:]\n        print str((temp_wd_alldata[0])+\"球:\")+str(format(int(temp_wd_alldata[1])/sum_wd,\".2%\"))\n    elif l==4:\n        temp_wd_alldata = wd_alldata[-4:]\n        print str((temp_wd_alldata[0])+\"球:\")+str(format(int(temp_wd_alldata[1])/sum_wd,\".2%\"))\n        print str((temp_wd_alldata[2])+\"球:\")+str(format(int(temp_wd_alldata[3])/sum_wd,\".2%\"))\n    elif l>=6:\n        temp_wd_alldata = wd_alldata[-6:]\n        print str((temp_wd_alldata[0])+\"球:\")+str(format(int(temp_wd_alldata[1])/sum_wd,\".2%\"))\n        print str((temp_wd_alldata[2])+\"球:\")+str(format(int(temp_wd_alldata[3])/sum_wd,\".2%\"))\n        print str((temp_wd_alldata[4])+\"球:\")+str(format(int(temp_wd_alldata[5])/sum_wd,\".2%\"))\n\n    #平负\n    sum_dl=0\n    #dl_alldata:前4个进球数以及比例\n    dl_alldata=[]\n    #将SQL的所有结果保存到文件中\n    cur.execute(sql_dl)\n    for item in cur.fetchall():\n        temp_dl_str1=str(item[0])+\"球,\"\n        temp_dl.append(temp_dl_str1)\n        temp1_dl=str(item[1])\n        sum_dl+=item[1]\n        temp_dl_str2 = re.search(\"\\d{1,3}\",temp1_dl).group()\n        temp_dl.append(temp_dl_str2+'\\n')\n    temp_dl.append(\"总共：\"+str(sum_dl)+\"场\")\n    temp_dl.append('\\n\\n\\n')\n    cur.execute(sql_dl)\n    for d in cur.fetchall():\n        dl_alldata.append(str(d[0]))\n        tmp4=str(d[1])\n        temp_srt3 = re.search(\"\\d{1,3}\",tmp4).group()\n        dl_alldata.append(temp_srt3)\n    for item in temp_dl:\n        f.writelines(str(item))\n    l = len(dl_alldata)\n    print (\"\\n平赔+负陪-->\"+\"一共 \"+str(sum_dl)+\"场\")\n    if l==2:\n        temp_dl_alldata = dl_alldata[-2:]\n        print str((temp_dl_alldata[0])+\"球:\")+str(format(int(temp_dl_alldata[1])/sum_dl,\".2%\"))\n    elif l==4:\n        temp_dl_alldata = dl_alldata[-4:]\n        print str((temp_dl_alldata[0])+\"球:\")+str(format(int(temp_dl_alldata[1])/sum_dl,\".2%\"))\n        print str((temp_dl_alldata[2])+\"球:\")+str(format(int(temp_dl_alldata[3])/sum_dl,\".2%\"))\n    elif l>=6:\n        temp_dl_alldata = dl_alldata[-6:]\n        print str((temp_dl_alldata[0])+\"球:\")+str(format(int(temp_dl_alldata[1])/sum_dl,\".2%\"))\n        print str((temp_dl_alldata[2])+\"球:\")+str(format(int(temp_dl_alldata[3])/sum_dl,\".2%\"))\n        print str((temp_dl_alldata[4])+\"球:\")+str(format(int(temp_dl_alldata[5])/sum_dl,\".2%\"))\n\n    #胜负\n    sum_wl=0\n    #wl_alldata:前4个进球数以及比例\n    wl_alldata=[]\n    #将SQL的所有结果保存到文件中\n    cur.execute(sql_wl)\n    for item in cur.fetchall():\n        temp_wl_str1=str(item[0])+\"球,\"\n        temp_wl.append(temp_wl_str1)\n        temp1_wl=str(item[1])\n        sum_wl+=item[1]\n        temp_wl_str2 = re.search(\"\\d{1,3}\",temp1_wl).group()\n        temp_wl.append(temp_wl_str2+'\\n')\n    temp_wl.append(\"总共：\"+str(sum_wl)+\"场\")\n    temp_wl.append('\\n\\n\\n')\n    cur.execute(sql_wl)\n    for d in cur.fetchall():\n        wl_alldata.append(str(d[0]))\n        tmp4=str(d[1])\n        temp_srt3 = re.search(\"\\d{1,3}\",tmp4).group()\n        wl_alldata.append(temp_srt3)\n    for item in temp_wl:\n        f.writelines(str(item))\n    l = len(wl_alldata)\n    print (\"\\n主赔+负陪-->\"+\"一共 \"+str(sum_wl)+\"场\")\n    if l==2:\n        temp_wl_alldata = wl_alldata[-2:]\n        print str((temp_wl_alldata[0])+\"球:\")+str(format(int(temp_wl_alldata[1])/sum_wl,\".2%\"))\n    elif l==4:\n        temp_wl_alldata = wl_alldata[-4:]\n        print str((temp_wl_alldata[0])+\"球:\")+str(format(int(temp_wl_alldata[1])/sum_wl,\".2%\"))\n        print str((temp_wl_alldata[2])+\"球:\")+str(format(int(temp_wl_alldata[3])/sum_wl,\".2%\"))\n    elif l>=6:\n        temp_wl_alldata = wl_alldata[-6:]\n        print str((temp_wl_alldata[0])+\"球:\")+str(format(int(temp_wl_alldata[1])/sum_wl,\".2%\"))\n        print str((temp_wl_alldata[2])+\"球:\")+str(format(int(temp_wl_alldata[3])/sum_wl,\".2%\"))\n        print str((temp_wl_alldata[4])+\"球:\")+str(format(int(temp_wl_alldata[5])/sum_wl,\".2%\"))\n    print \"============\"\n    f.close()\n\ndef preSpf(cur,scr,w,d,l,a):\n    print \"======胜平负预测======\"\n    sql_spf_wd = \"select spf,count(*) from results where win between %s and %s and dog between %s and %s group by spf order by count(*)\" % (myMin(w,a),myAdd(w,a),myMin(d,a),myAdd(d,a))\n    sql_spf_dl = \"select spf,count(*) from results where dog between %s and %s and los between %s and %s group by spf order by count(*)\" % (myMin(d,a),myAdd(d,a),myMin(l,a),myAdd(l,a))\n    sql_spf_wl = \"select spf,count(*) from results where win between %s and %s or los between %s and %s group by spf order by count(*)\" % (myMin(w,a),myAdd(w,a),myMin(l,a),myAdd(l,a))\n\n    temp_spf_wd = []\n    temp_spf_dl = []\n    temp_spf_wl = []\n    temp = []\n    #添加场次信息\n    temp.append((\"场次：%s \\n\") % str(scr))\n    #添加赔率信息\n    temp.append((\"win:%s  dog:%s  los:%s  acc:%s\"+\"\\n\") % (str(w),str(d),str(l),str(a)))\n\n    #写入到文件Precdiction.txt\n    f = open(\"/root/bet/prediction.txt\",'a')\n\n    #1.对于sql_spf_wd的输出进行处理\n    cur.execute(sql_spf_wd)\n    #统计胜平负场次总和\n    sum_spf_wd=0\n    #将SQL的所有结果保存到文件中\n    for item in cur.fetchall():\n        temp_spf_wd.append(str(item[0]))\n        temp_spf_wd.append(str(item[1]))\n        sum_spf_wd+=(item[1])\n    #收集胜平负的场次，并求百分比\n    print \"胜平-->共\"+str(sum_spf_wd)+\"场\"\n    #统计胜平负的比例\n    cur.execute(sql_spf_wd)\n    l = len(temp_spf_wd)\n    print (\"场次: %s \\n主赔+平陪-->\"+\"一共 \"+str(sum_spf_wd)+\"场\") % str(scr)\n    if l==2:\n        temp_spf_wd = temp_spf_wd[-2:]\n        print str((temp_spf_wd[0])+\":\")+str(format(int(temp_spf_wd[1])/sum_spf_wd,\".2%\"))\n    elif l==4:\n        temp_spf_wd = temp_spf_wd[-4:]\n        print str((temp_spf_wd[0])+\":\")+str(format(int(temp_spf_wd[1])/sum_spf_wd,\".2%\"))\n        print str((temp_spf_wd[2])+\":\")+str(format(int(temp_spf_wd[3])/sum_spf_wd,\".2%\"))\n    elif l>=6:\n        temp_spf_wd = temp_spf_wd[-6:]\n        print str((temp_spf_wd[0])+\":\")+str(format(int(temp_spf_wd[1])/sum_spf_wd,\".2%\"))\n        print str((temp_spf_wd[2])+\":\")+str(format(int(temp_spf_wd[3])/sum_spf_wd,\".2%\"))\n        print str((temp_spf_wd[4])+\":\")+str(format(int(temp_spf_wd[5])/sum_spf_wd,\".2%\"))\n\n    #2.对于sql_spf_dl的输出进行处理\n    cur.execute(sql_spf_dl)\n    #统计胜平负场次总和\n    sum_spf_dl=0\n    #将SQL的所有结果保存到文件中\n    for item in cur.fetchall():\n        temp_spf_dl.append(str(item[0]))\n        temp_spf_dl.append(str(item[1]))\n        sum_spf_dl+=(item[1])\n    #统计胜平负的比例\n    cur.execute(sql_spf_dl)\n    l = len(temp_spf_dl)\n    print (\"\\n平陪+负赔-->\"+\"一共 \"+str(sum_spf_dl)+\"场\")\n    if l==2:\n        temp_spf_dl = temp_spf_dl[-2:]\n        print str((temp_spf_dl[0])+\":\")+str(format(int(temp_spf_dl[1])/sum_spf_dl,\".2%\"))\n    elif l==4:\n        temp_spf_dl = temp_spf_dl[-4:]\n        print str((temp_spf_dl[0])+\":\")+str(format(int(temp_spf_dl[1])/sum_spf_dl,\".2%\"))\n        print str((temp_spf_dl[2])+\":\")+str(format(int(temp_spf_dl[3])/sum_spf_dl,\".2%\"))\n    elif l>=6:\n        temp_spf_dl = temp_spf_dl[-6:]\n        print str((temp_spf_dl[0])+\":\")+str(format(int(temp_spf_dl[1])/sum_spf_dl,\".2%\"))\n        print str((temp_spf_dl[2])+\":\")+str(format(int(temp_spf_dl[3])/sum_spf_dl,\".2%\"))\n        print str((temp_spf_dl[4])+\":\")+str(format(int(temp_spf_dl[5])/sum_spf_dl,\".2%\"))\n\n    #3.对于sql_spf_wl的输出进行处理\n    cur.execute(sql_spf_wl)\n    #统计胜平负场次总和\n    sum_spf_wl=0\n    #将SQL的所有结果保存到文件中\n    for item in cur.fetchall():\n        temp_spf_wl.append(str(item[0]))\n        temp_spf_wl.append(str(item[1]))\n        sum_spf_wl+=(item[1])\n    #统计胜平负的比例\n    cur.execute(sql_spf_wl)\n    l = len(temp_spf_wl)\n    print (\"\\n主陪+负赔-->\"+\"一共 \"+str(sum_spf_wl)+\"场\")\n    if l==2:\n        temp_spf_wl = temp_spf_wl[-2:]\n        print str((temp_spf_wl[0])+\":\")+str(format(int(temp_spf_wl[1])/sum_spf_wl,\".2%\"))\n    elif l==4:\n        temp_spf_wl = temp_spf_wl[-4:]\n        print str((temp_spf_wl[0])+\":\")+str(format(int(temp_spf_wl[1])/sum_spf_wl,\".2%\"))\n        print str((temp_spf_wl[2])+\":\")+str(format(int(temp_spf_wl[3])/sum_spf_wl,\".2%\"))\n    elif l>=6:\n        temp_spf_wl = temp_spf_wl[-6:]\n        print str((temp_spf_wl[0])+\":\")+str(format(int(temp_spf_wl[1])/sum_spf_wl,\".2%\"))\n        print str((temp_spf_wl[2])+\":\")+str(format(int(temp_spf_wl[3])/sum_spf_wl,\".2%\"))\n        print str((temp_spf_wl[4])+\":\")+str(format(int(temp_spf_wl[5])/sum_spf_wl,\".2%\"))\n    print \"============\"\n    f.close()\n\n#=========================================\n#比分预测   \ndef preRes(cur,scr,w,d,l,a):\n    sql_res_wd = \"select res,count(*) from results where win between %s and %s and dog between %s and %s group by res order by count(*)\" % (myMin(w,a),myAdd(w,a),myMin(d,a),myAdd(d,a))\n    sql_res_dl = \"select res,count(*) from results where dog between %s and %s and los between %s and %s group by res order by count(*)\" % (myMin(d,a),myAdd(d,a),myMin(l,a),myAdd(l,a))\n    sql_res_wl = \"select res,count(*) from results where win between %s and %s or los between %s and %s group by res order by count(*)\" % (myMin(w,a),myAdd(w,a),myMin(l,a),myAdd(l,a))\n\n    #统计比分的场次之和\n    sum_res_wd = 0\n    sum_res_dl = 0\n    sum_res_wl = 0\n\n    #暂存保存到文件的信息\n    temp_res_wd = []\n    temp_res_dl = []\n    temp_res_wl = []\n    #添加场次信息\n    temp_res_wd.append((\"场次：%s \\n\") % str(scr))\n    #添加赔率信息\n    temp_res_wd.append((\"win:%s  dog:%s  los:%s  acc:%s\"+\"\\n\") % (str(w),str(d),str(l),str(a)))\n    #对于总共收集的场次\n    sum_res = 0\n    #对于比分以及场次进行收集\n    all_res_data=[]\n\n    #写入到文件Precdiction.txt\n    f = open(\"/root/bet/prediction.txt\",'a')\n\n    print \"======比分预测======\"\n\n    #1.对于sql_res_wd的输出进行处理\n    cur.execute(sql_res_wd)\n    #将SQL的所有结果保存到文件中\n    for item in cur.fetchall():\n        temp_res_wd.append(str(item[0]))\n        temp_res_wd.append(str(item[1]))\n        sum_res_wd+=item[1]\n    print \"\\n胜平预测-->共\"+str(sum_res_wd)+\"场\"\n    #统计比分比例\n    cur.execute(sql_res_wd)\n    l = len(temp_res_wd)\n    if l==4:\n        temp_res_wd2 = temp_res_wd[-2:]\n        print str((temp_res_wd2[0])+\"==》\")+str(format(int(temp_res_wd2[1])/sum_res_wd,\".2%\"))\n    elif l==6:\n        temp_res_wd2 = temp_res_wd[-4:]\n        print str((temp_res_wd2[0])+\"==》\")+str(format(int(temp_res_wd2[1])/sum_res_wd,\".2%\"))\n        print str((temp_res_wd2[2])+\"==》\")+str(format(int(temp_res_wd2[3])/sum_res_wd,\".2%\"))\n    elif l>6:\n        temp_res_wd2 = temp_res_wd[-8:]\n        print str((temp_res_wd2[0])+\"==》\")+str(format(int(temp_res_wd2[1])/sum_res_wd,\".2%\"))\n        print str((temp_res_wd2[2])+\"==》\")+str(format(int(temp_res_wd2[3])/sum_res_wd,\".2%\"))\n        print str((temp_res_wd2[4])+\"==》\")+str(format(int(temp_res_wd2[5])/sum_res_wd,\".2%\"))\n        print str((temp_res_wd2[6])+\"==》\")+str(format(int(temp_res_wd2[7])/sum_res_wd,\".2%\"))\n\n    #2.对于sql_res_dl的输出进行处理\n    cur.execute(sql_res_dl)\n    #将SQL的所有结果保存到文件中\n    for item in cur.fetchall():\n        temp_res_dl.append(str(item[0]))\n        temp_res_dl.append(str(item[1]))\n        sum_res_dl+=item[1]\n    print \"\\n平负预测-->共\"+str(sum_res_dl)+\"场\"\n    #统计比分比例\n    cur.execute(sql_res_dl)\n    l = len(temp_res_dl)\n    if l==4:\n        temp_res_dl2 = temp_res_dl[-2:]\n        print str((temp_res_dl2[0])+\"==》\")+str(format(int(temp_res_dl2[1])/sum_res_dl,\".2%\"))\n    elif l==6:\n        temp_res_dl2 = temp_res_dl[-4:]\n        print str((temp_res_dl2[0])+\"==》\")+str(format(int(temp_res_dl2[1])/sum_res_dl,\".2%\"))\n        print str((temp_res_dl2[2])+\"==》\")+str(format(int(temp_res_dl2[3])/sum_res_dl,\".2%\"))\n    elif l>6:\n        temp_res_dl2 = temp_res_dl[-8:]\n        print str((temp_res_dl2[0])+\"==》\")+str(format(int(temp_res_dl2[1])/sum_res_dl,\".2%\"))\n        print str((temp_res_dl2[2])+\"==》\")+str(format(int(temp_res_dl2[3])/sum_res_dl,\".2%\"))\n        print str((temp_res_dl2[4])+\"==》\")+str(format(int(temp_res_dl2[5])/sum_res_dl,\".2%\"))\n        print str((temp_res_dl2[6])+\"==》\")+str(format(int(temp_res_dl2[7])/sum_res_dl,\".2%\"))\n\n    #3.对于sql_res_wl的输出进行处理\n    cur.execute(sql_res_wl)\n    #将SQL的所有结果保存到文件中\n    for item in cur.fetchall():\n        temp_res_wl.append(str(item[0]))\n        temp_res_wl.append(str(item[1]))\n        sum_res_wl+=item[1]\n    print \"\\n胜负预测-->共\"+str(sum_res_wl)+\"场\"\n    #统计比分比例\n    cur.execute(sql_res_wl)\n    l = len(temp_res_wl)\n    if l==4:\n        temp_res_wl2 = temp_res_wl[-2:]\n        print str((temp_res_wl2[0])+\"==》\")+str(format(int(temp_res_wl2[1])/sum_res_wl,\".2%\"))\n    elif l==6:\n        temp_res_wl2 = temp_res_wl[-4:]\n        print str((temp_res_wl2[0])+\"==》\")+str(format(int(temp_res_wl2[1])/sum_res_wl,\".2%\"))\n        print str((temp_res_wl2[2])+\"==》\")+str(format(int(temp_res_wl2[3])/sum_res_wl,\".2%\"))\n    elif l>6:\n        temp_res_wl2 = temp_res_wl[-12:]\n        print str((temp_res_wl2[0])+\"==》\")+str(format(int(temp_res_wl2[1])/sum_res_wl,\".2%\"))\n        print str((temp_res_wl2[2])+\"==》\")+str(format(int(temp_res_wl2[3])/sum_res_wl,\".2%\"))\n        print str((temp_res_wl2[4])+\"==》\")+str(format(int(temp_res_wl2[5])/sum_res_wl,\".2%\"))\n        print str((temp_res_wl2[6])+\"==》\")+str(format(int(temp_res_wl2[7])/sum_res_wl,\".2%\"))\n        print str((temp_res_wl2[8])+\"==》\")+str(format(int(temp_res_wl2[9])/sum_res_wl,\".2%\"))\n        print str((temp_res_wl2[10])+\"==》\")+str(format(int(temp_res_wl2[11])/sum_res_wl,\".2%\"))\n    #======END OF THE FUNCTION======\n    f.close()\n\ndef preAll(cur,scr,w,d,l,a):\n    preSpf(cur,scr,w,d,l,a)\n    preZjq(cur,scr,w,d,l,a)\n    preRes(cur,scr,w,d,l,a)\n\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}