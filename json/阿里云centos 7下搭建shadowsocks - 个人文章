{"title": "阿里云centos 7下搭建shadowsocks - 个人文章 ", "index": "python,linux,shadowsocks", "content": "1.安装pip\n由于安装的是python 版本的 shadowsocks，所以首先安装pip\n$ curl \"https://bootstrap.pypa.io/get-pip.py\" -o \"get-pip.py\"\n$ python get-pip.py\n\n2.安装shadowsocks\n$ pip install --upgrade pip\n$ pip install shadowsocks\n\n3.创建配置文件\n创建文件所在目录:/etc\n#创建文件命令,\n$ vi /etc/shadowsocks.json\n#若进入了etc目录\n$ vi shadowsocks.json\n配置文件内容：\n单端口：\n {\n \"server\":\"0.0.0.0\",            --服务器IP，直接用0.0.0.0也可\n \"server_port\":8888,            --端口端口\n \"local_address\": \"127.0.0.1\",  --本地地址，可省略\n \"local_port\":1080,             --本地端口，可省略\n \"password\":\"password\",         --密码\n \"timeout\":300,                 --超时时间，可省略\n \"method\":\"aes-256-cfb\",        --加密策略，有多重策略，具体自查\n}\n多端口：\n{\n    \"server\":\"0.0.0.0\",\n    \"local_address\":\"127.0.0.1\",\n    \"local_port\":1080,\n    \"port_password\":{           --每个端口对应一个密码\n        \"1111\":\"password1\",\n        \"1112\":\"password2\",\n        \"1113\":\"password3\"\n    },\n    \"timeout\":300,\n    \"method\":\"aes-256-cfb\",\n    \"fast_open\":false\n}\n4.启动shadowsocks\n#启动\nssserver -c /etc/shadowsocks.json -d start\n#停止\nssserver -c /etc/shadowsocks.json -d stop\n#重启\nssserver -c /etc/shadowsocks.json -d restart\n\n启动成功即可通过ss客户端使用。在window端可以在控制台通过以下命令查看端口是否打开\ntelnet {ip} {port}\n5.配置自启动新建启动脚本文件/etc/systemd/system/shadowsocks.service，内容如下：\n[Unit]\nDescription=Shadowsocks\n\n[Service]\nTimeoutStartSec=0\nExecStart=/usr/bin/ssserver -c /etc/shadowsocks.json\n\n[Install]\nWantedBy=multi-user.target\n通过以下命令注册，启动服务\n$ systemctl enable shadowsocks\n$ systemctl start shadowsocks\n启动后可以查看服务状态\n$ systemctl status shadowsocks -l\n若启动成功：\n● shadowsocks.service - Shadowsocks\n   Loaded: loaded (/etc/systemd/system/shadowsocks.service; enabled; vendor preset: disabled)\n   Active: active (running) since Sun 2017-08-13 18:03:41 CST; 1h 29min ago\n Main PID: 9567 (ssserver)\n   CGroup: /system.slice/shadowsocks.service\n           └─9567 /usr/bin/python2 /usr/bin/ssserver -c /etc/shadowsocks.json\n\n6.firewalld防火墙centos7用的firewalld，若不进行设置，可能会导致SS无法使用这部分规则可以通过阿里云安全组添加，也可以直接通过代码添加，这里介绍直接添加规则方法\n# 开放端口\n$ firewall-cmd --permanent --add-port=18381-18385/tcp \n# 修改规则后需要重启\n$ firewall-cmd --reload \n参考文章:在 CentOS 7 下安装配置 shadowsocks\n\n                ", "mainLikeNum": ["3 "], "mainBookmarkNum": "17"}