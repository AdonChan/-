{"title": "pandas操作txt文件的方便之处 - 个人文章 ", "index": "pandas,python", "content": "使用txt文件分析数据遇到的问题\n有时候到手的数据基本是固定分隔符分隔的几个文件，需要重里面做一些数据统计，比如去重，计算某一列的和，两个文件的并集等等，如果能够像sql一样操作txt文件就好了，这就是pandas带来的好处\n如何加载txt文件？\n示例文件数据 papa.txt\n paxi_id grade\n  1       50\n  2       50\n  3       100\n  4       200\n  3       100\n  5       100\n \n安装好jupyter ,在文件目录中运行jupyter notebook,在打开的浏览器界面上，选择python运行\n在打开的界面上，运行加载的命令\nimport pandas #引入pandas\npapa=pandas.read_csv('papa.txt',sep='\\t') #加载papa.txt,指定它的分隔符是 \\t\npapa.head() #显示数据的前几行\n可以看到加载的结果直观的用表格展示\n\n如何知道刚加载的数据有几行？有几列？\n运行指令如下\nrowNum=papa.shape[0] #不包括表头\ncolNum=papa.columns.size\n结果为\n\n如何根据一列对整个数据进行去重？\n运行指令如下\nuPapa=papa.drop_duplicates(['paxi_id'])\n结果如下\n如何获取一列的去重的值？去重后有多少个？\n运行指令如下\nuPaxiId=papa['paxi_id'].unique()\nprint(\"uPaxiId:\",uPaxiId)\ntotalUPaxiIdNum=uPaxiId.size\nprint(\"num:\",totalUPaxiIdNum)\n运行结果如下\n\n如何计算一列的和？\n运行指令如下\npapa['grade'].sum()\n结果如下\n\n如何过滤特定的值的行？\n运行指令如下\npapa[ ( papa['grade'] == 50 ) | ( papa['grade'] == 100 ) ]\n结果如下\n\n如何计算某一列各个取值的个数?\n运行指令如下\ngPapa=papa.groupby('grade').size()\n结果如下\n\n如何计算其中两个或者所有的和？\n运行指令如下\nv=gPapa[50]+gPapa[100]\nprint(\"两个的和:\",v)\nprint(\"总和:\",gPapa.sum())\n结果如下\n\n如何用图形表示各个值？\n运行指令如下\nimport matplotlib.pyplot as plt\nfig=plt.figure()\ngPapa.plot(kind='bar',grid=True) #bar 和 barh 能切换x轴，y轴\nplt.show() #在需要显示的时候调用，会一次把所有的图都画出来\n结果如下\n\n如何对两个txt的文件根据一列做join?\n另一个文件为xixi.txt\npaxi_id    type\n1    3\n2    4\n3    3\n4    4\n5    3\n执行指令如下\nxixi=pandas.read_csv('xixi.txt',sep='\\t')\nuXixi=xixi.drop_duplicates(['paxi_id'])\npandas.merge(uPapa,uXixi,on=['paxi_id']) #join\n结果如下\n附pandas官方文档\nhttps://pandas.pydata.org/pan... 有教程~\n\n                ", "mainLikeNum": ["1 "], "mainBookmarkNum": "2"}