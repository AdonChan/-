{"title": "Python调用有道词典翻译 - 小墨鱼 ", "index": "网页爬虫,有道词典,python", "content": "Python调用有道词典翻译\n分析\n有道翻译官网\n\n翻译按钮\n点击翻译按钮，查看网络请求，如图共有四个网络请求，通过分析，查看返回的信息，显然第一个是真正的翻译请求，具体信息如下：如图所示，我们真正关注的是请求参数，在这么多的参数当中，其中，i是需要翻译的词语，通过对多个翻译请求分析知道，from是翻译原文语言，to是翻译的目标语言，剩下的除了salt，sign之外的都是固定的，因此，现在问题是salt，sign是怎么来的\n前端代码\n通过前端的断点分析，找到发送网络请求的代码，具体如下：显然，salt是一个时间戳加上随机数得到\"\" + ((new Date).getTime() + parseInt(10 * Math.random(), 10))，sign是一个md5加密的字符串，显然，只有模拟出这两个参数就可以了\n代码\n# -*- coding: UTF-8 -*-\nimport hashlib\nimport random\nimport requests\nimport time\n\n\ns = requests.Session()\nm = hashlib.md5()\n\nclass Dict:\n    def __init__(self):\n        self.headers = {\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:57.0) Gecko/20100101 Firefox/57.0',\n            'Referer': 'http://fanyi.youdao.com/',\n            'contentType': 'application/x-www-form-urlencoded; charset=UTF-8'\n        }\n        self.url = 'http://fanyi.youdao.com/translate_o?smartresult=dict&smartresult=rule&sessionFrom='\n        self.base_config()\n\n    def base_config(self):\n        \"\"\"\n        设置基本的参数，cookie\n        \"\"\"\n        s.get('http://fanyi.youdao.com/')\n\n    def translate(self):\n        i = '你好'\n        salf = str(int(time.time() * 1000) + random.randint(0, 9))\n        n = 'fanyideskweb' + i + salf + \"rY0D^0'nM0}g5Mm1z%1G4\"\n        m.update(n.encode('utf-8'))\n        sign = m.hexdigest()\n        data = {\n            'i': i,\n            'from': 'AUTO',\n            'to': 'AUTO',\n            'smartresult': 'dict',\n            'client': 'fanyideskweb',\n            'salt': salf,\n            'sign': sign,\n            'doctype': 'json',\n            'version': \"2.1\",\n            'keyfrom': \"fanyi.web\",\n            'action': \"FY_BY_DEFAULT\",\n            'typoResult': 'false'\n        }\n        resp = s.post(self.url, headers=self.headers, data=data)\n        return resp.json()\n\ndic = Dict()\nresp = dic.translate()\nprint(resp)\n\n项目地址： 基于Python的爬虫QQ交流群： 173318043\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}