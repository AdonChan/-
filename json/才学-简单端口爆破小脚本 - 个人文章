{"title": "才学-简单端口爆破小脚本 - 个人文章 ", "index": "python", "content": "简单的脚本\n\n#coding:utf-8\n\n\nfrom socket import *\nimport sys\nimport threading\nimport time\n\n#python scan_port.py <host> <start_port>-<end_port>\nlock = threading.RLock()\n\nclass INFO:\n    HEADER = '\\033[95m'\n    OKBLUE = '\\033[94m'\n    OKGREEN = '\\033[92m'\n    WARNING = '\\033[93m'\n    ARNING = '\\033[93m'\n    FAIL = '\\033[91m'\n    ENDC = '\\033[0m'\n    BOLD = '\\033[1m'\n    UNDERLINE = '\\033[4m'\n\ndef scan_port(host, port):\n    s = socket(AF_INET, SOCK_STREAM)\n    s.settimeout(5)\n    try:\n        result = s.connect_ex((host, port))\n        #print result\n        if result == 0:\n            lock.acquire()\n            print INFO.OKBLUE+u\"[+]---%s, %d 端口开放---[+] \"%(host, port)+INFO.ENDC\n            lock.release()\n        else:\n            print INFO.WARNING+u\"[+]---%s, %d 端口没有开放---[+] \" % (host, port)+INFO.ENDC\n\n        #s.close()\n        #\n    except Exception, e:\n        raise e\n\n\nif __name__ == '__main__':\n    #scan_port(\"demo.testfire.net\", 80)\n    start_time =time.time()\n    if len(sys.argv) != 3:\n        print \"python scan_port.py <host> <start_port>-<end_port>, and port must 1-65535 int\"\n        sys.exit()\n\n    host = sys.argv[1]\n    ports = sys.argv[2].split('-')\n    #print ports\n    #port = ports[0]\n    #print len(sys.argv)\n    if len(ports) ==2 and (1 <= int(ports[0]) <= 65535) and (1 <= int(ports[1]) <=65535):\n        for p in range(int(ports[0]),int(ports[1])+1):\n            t = threading.Thread(target=scan_port,args=(host,p))\n            t.start()\n            #print  \"Finished in %.2fs\" % (time.time() - start_time)\n            #scan_port(host, p)\n\n    elif len(ports) ==1 and len(sys.argv) == 3 and (1 <= int(ports[0]) <= 65535):\n        t = threading.Thread(target=scan_port,args=(host, int(ports[0])))\n        t.start()\n    else:\n        print \"python scan_port.py <host> <start_port>-<end_port>, and port must 1-65535 int\"\n        sys.exit()\n\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}