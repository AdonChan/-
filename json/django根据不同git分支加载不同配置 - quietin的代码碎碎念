{"title": "django根据不同git分支加载不同配置 - quietin的代码碎碎念 ", "index": "git,python", "content": "部署之前检测代码和功能，为了保存本地数据，单独建了几个数据库对部署前的线上使用分支的代码进行测试。\n配置文件如通常一样是两份，一份settings.py作为基准，另外一份settings_local.py用来覆盖。后面一个文件是没有track的，可以随便改。\n切换分支的时候要手动去改配置，很麻烦，就想能不能通过检测分支自动加载配置(因为懒)，搜了一下操作Git的python库，大概有PyGit2和GitPython两种，星也都差不多，大致渺了下介绍和文档，选择的后者。示例：\nfrom git import Repo\n\ngit_repo_path = '/home/you_git_repo'\nrepo = Repo(git_repo_path)\nif repo.active_branch.name == 'develop':\n    conf = conf1\nelse:\n    conf = conf2\n其实用python的os库获取一下git branch的结果再匹配也能得到当前分支，但是比较麻烦\n以上\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "1"}