{"title": "sqlite3使用sqlite2创建的数据库 - A Geek's Jolly Wing ", "index": "python,sqlite3,sqlite", "content": "问题\n用 sqlite 2.8.17 创建了一个数据库 heroes.db。其中创建了一个表 heroes，这张表中存储的是魔兽争霸中英雄的技能数据。select * from heroes;会得到：\n大魔法师|人族|水元素|暴风雪|辉煌光环|时空传送\n山丘之王|人族|风暴之锤|雷霆一击|重击|天神下凡\n血魔法师|人族|炎击|放逐|吸魔|火凤凰\n圣骑士|人族|圣光|圣盾|神圣光环|复活\n\n但是用python通过sqlite3操作heroes.db的时候会报错。\nError: file is encrypted or is not a database\n\n我想也许是sqlite3和sqlite2创建的数据库格式不同造成的。\n果然，直接用sqlite3的命令行工具操作heroes.db，也报同样的错误。\n解决\n接下来的工作，就是把sqlite2创建的heroes.db转换成sqlite3可以使用的格式：\n用sqlite heroes.db打开数据库文件，然后在sqlite shell中执行：\n.output heroes.sql\n.dump heroes\n.exit\n\n现在heroes.sql的内容如下：\nBEGIN TRANSACTION;\ncreate table heroes (name varchar, race varchar, skill1 varchar, skill2 varchar, skill3 varchar, superskill varchar);\nINSERT INTO heroes VALUES('大魔法师','人族','水元素','暴风雪','辉煌光环','时空传送');\nINSERT INTO heroes VALUES('山丘之王','人族','风暴之锤','雷霆一击','重击','天神下凡');\nINSERT INTO heroes VALUES('血魔法师','人族','炎击','放逐','吸魔','火凤凰');\nINSERT INTO heroes VALUES('圣骑士','人族','圣光','圣盾','神圣光环','复活');\nCOMMIT;\n\n可以把原来的heroes.db删除了： rm heroes.db。\n用sqlite3创建新的数据库文件并导入数据：\nsqlite3 heroes.db < heroes.sql\n\n验证\n现在再用sqlite3 打开heroes.db看看，已经可以进行查询和增改删操作了。当然python也能通过import sqlite3使用该数据库了。\n注意，再用sqlite时，直接使用sqlite3比较好，因为python好像只直接支持sqlite3。\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}