{"title": "Python的Struct模块，用法以及个人理解 - 个人文章 ", "index": "python,struct", "content": "简介\npython strtuct模块主要在Python中的值于C语言结构之间的转换。可用于处理存储在文件或网络连接（或其它来源）中的二进制数据。\n顺序、格式字符\n现在先不要看图表，稍后我们回来看。图片来自Python官网\n例子\n用例子说明效果是最好的，我们用特定格式往二进制文件里写入数据，然后再读出数据。\n#! usr/bin/env python3\n# -*- conding:utf-8 -*-\n\nimport struct\n\n'''\n数据格式\n名字  职业   年\nmuyu  coder 2018\n'''\n\nname = b'muyu'\njob = b'coder'\nyear = 2018\n\n\nfile = open(r'C:\\Users\\matzoh\\Desktop\\test.bin', 'rb+')\n\nfile.write(struct.pack('4s5si', name, job, year))\nfile.flush()\n\nfile.seek(0)\n\nstrBin = file.read()\nprint(strBin) # b'muyucoder\\x00\\x00\\x00\\xe2\\x07\\x00\\x00'\n\ncontent = struct.unpack('4s5si', strBin)\nprint(content) # (b'muyu', b'coder', 2018)\n上述代码的含义就是，以二进制格式打开一个文件，以指定格式写入一个二进制串，再从文件取出二进制串，再把取出的串翻译成python数据\nstruct 最常用的方法有两个：\nstruct.pack(fmt,v1,v2,…) 返回的是一个字符串，是参数按照fmt数据格式组合而成struct.unpack(fmt,string)按照给定数据格式解开(通常都是由struct.pack进行打包)数据，返回值是一个tuple\n\n\n两个方法的第一个参数都是fmt，fmt就是上面的两个表格，我们根据实际内容（具体需求）写出fmt串，读取或写入文件\n文中我们的fmt串是4s5si，具体含义对照上面表格：\n\n4s表示4字节的字符串（可能我们会遇到整数计数，例如5h，意思是5个相同的h，意思和4s并不一样） 5s含义同4s i表示整数（有符号）具体解释官方文档也有\n上述代码运行结果：\nb'muyucoder\\x00\\x00\\x00\\xe2\\x07\\x00\\x00'\n(b'muyu', b'coder', 2018)\n记录自己的学习笔记，好记性不如烂笔头（而且还不是好记性...）\n拓展\n看完本篇文章，有兴趣的可以看：struct（廖雪峰）这篇文章，文章讲怎么从bmp文件中读取内容\n感谢\n学习Python主要在：廖雪峰的官方网站、菜鸟教程这两个网站学习，很感谢他们！\n也很感谢其他乐于分享贡献知识经验的人，谢谢\n原文在自己的小博客：木鱼博客\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}