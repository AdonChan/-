{"title": "Python2 JSON.load成Unicode的坑 - kamushin ", "index": "unicode,python", "content": "我是接口调用方，今天在联调的时候，接口方的同学问我传过来的json是神马玩意，怎么每个item前还带个u的。\n我看了一眼，我靠，还真是带个u的，自己调试的时候楞是没发现。也怪自己以前没怎么遇到过Python的编码坑，这次重新用起Python2来，一不小心就踩进坑了。\n一通debug发现是Python自带的Json库会把json文件load成Unicode对象。如果想要变成str对象的话，就要自己去encode。\n祭出so大法...#请叫我so搬运工\n\ndef byteify(input):\n    if isinstance(input, dict):\n        return {byteify(key):byteify(value) for key,value in input.iteritems()}\n    elif isinstance(input, list):\n        return [byteify(element) for element in input]\n    elif isinstance(input, unicode):\n        return input.encode('utf-8')\n    else:\n        return input\n\n\n这个函数递归的把list和dict里的Unicode对象encode成str。\n当然，我不觉得这是the right way。使用yaml里的json来代替官方自带的json可能更好。\n\n                ", "mainLikeNum": ["2 "], "mainBookmarkNum": "8"}