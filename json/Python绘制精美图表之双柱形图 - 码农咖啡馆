{"title": "Python绘制精美图表之双柱形图 - 码农咖啡馆 ", "index": "图表,matplotlib,python", "content": "图表是比干巴巴的表格更直观的表达，简洁、有力。工作中经常遇到的场景是，有一些数值需要定时的监控，比如服务器的连接数、活跃用户数、点击某个按钮的人数，并且通过邮件或者网页展示出来。当我们想关注比数值本身更多的信息（像数值的变化、对比或异常），图表就非常有用了。把数值转化为图片要依赖第三方库的帮忙，在Python之中最好的图表库叫matplotlib。（一直觉得，Python最大的优势就是丰富的第三方库，让你能轻易实现各种需求）\nmatplotlib，顾名思义就是提供了一整套和matlab相似的API，它的文档相当完备，示例页面提供了上百个图表的入门代码，可以说只有你想不到的，没有它做不到的。\n举个稍复杂的例子，小明和小红两个同学各有语文、数学、英语的课程成绩，用一个双柱形图输出各项成绩的对比：\n#!/usr/bin/env python\n# coding: utf-8\n\nimport matplotlib as mpl\nmpl.use('Agg')\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n# 必须配置中文字体，否则会显示成方块\n# 注意所有希望图表显示的中文必须为unicode格式\ncustom_font = mpl.font_manager.FontProperties(fname='/Library/Fonts/华文细黑.ttf')\n\nfont_size = 10 # 字体大小\nfig_size = (8, 6) # 图表大小\n\nnames = (u'小明', u'小红') # 姓名\nsubjects = (u'语文', u'数学', u'英语') # 科目\nscores = ((65, 90, 75), (85, 80, 90)) # 成绩\n\n# 更新字体大小\nmpl.rcParams['font.size'] = font_size\n# 更新图表大小\nmpl.rcParams['figure.figsize'] = fig_size\n# 设置柱形图宽度\nbar_width = 0.35\n\nindex = np.arange(len(scores[0]))\n# 绘制「小明」的成绩\nrects1 = plt.bar(index, scores[0], bar_width, color='#0072BC', label=names[0])\n# 绘制「小红」的成绩\nrects2 = plt.bar(index + bar_width, scores[1], bar_width, color='#ED1C24', label=names[1])\n# X轴标题\nplt.xticks(index + bar_width, subjects, fontproperties=custom_font)\n# Y轴范围\nplt.ylim(ymax=100, ymin=0)\n# 图表标题\nplt.title(u'企鹅班同学成绩对比', fontproperties=custom_font)\n# 图例显示在图表下方\nplt.legend(loc='upper center', bbox_to_anchor=(0.5, -0.03), fancybox=True, ncol=5, prop=custom_font)\n\n# 添加数据标签\ndef add_labels(rects):\n    for rect in rects:\n        height = rect.get_height()\n        plt.text(rect.get_x() + rect.get_width() / 2, height, height, ha='center', va='bottom')\n        # 柱形图边缘用白色填充，纯粹为了美观\n        rect.set_edgecolor('white')\n\nadd_labels(rects1)\nadd_labels(rects2)\n\n# 图表输出到本地\nplt.savefig('scores_par.png')\n最终图表显示如下：\n\n小结一下，从上面的代码片段可以了解到：matplotlib是一个自由度非常高的图表库，能够实现从颜色、字体等基础属性到图例、网格等图表属性的定制输出。\n来自：建造者说\n\n                ", "mainLikeNum": ["4 "], "mainBookmarkNum": "18"}