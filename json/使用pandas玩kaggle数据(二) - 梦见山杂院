{"title": "使用pandas玩kaggle数据(二) - 梦见山杂院 ", "index": "python,pandas", "content": "还是有点懒，本应早点写第二集。按类型去分析数据并没有得到规律性的东西。我们再来看看元数据。Dates是案件发生的时间，案件是否具有时间规律，随着时间在增长或者减少呢？\n时间序列\n基于这个思路，创建以时间为index的DataFrame，其中index选用数据中的'Dates'列作为index，为方便按时间操作，将'Dates'列转换为DatetimeIndex类型。按年月日格式化时间key，按key进行分类，我们得到每日发生的案件统计走势图。\n# -*- coding: utf-8 -*-\n__author__ = 'longtaiye'\n\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n#读取数据\ndf = pd.read_csv('/Users/longtaiye/Documents/ml-learn/train.csv')\n\n#设置pandas打印格式\npd.set_option('display.width', 300)\n\n＃以日期为index创建新的DataFrame\ndateDF = pd.DataFrame(np.asarray(df), index=pd.to_datetime(df['Dates']), columns=df.columns)\n\n#按年月日统计案件发生规律\nkey1 = lambda x:x.strftime(\"%Y-%m-%d\")\ndateDF['Category'].groupby(key1).count().plot(figsize=(26, 10))\n\nplt.show()\n\n依照相同的方法可以得到时走势、日走势、月走势、年走势图，从图上看并没有什么规律性。\n时走势图\n日走势图\n月走势图\n年走势图\n和其它列结合分析\n上面的分析表明，单纯的时间趋势并不存在，那么在限定其它因素情况下的时间走势关系是否存在呢？我们先从警区入手。按警区划分案件，然后统计每个警区的案件走势。\n# -*- coding: utf-8 -*-\n__author__ = 'longtaiye'\n\n\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n\ndf = pd.read_csv('/Users/longtaiye/Documents/ml-learn/train.csv')\npd.set_option('display.width', 300)\n\ndateDF = pd.DataFrame(np.asarray(df), index=pd.to_datetime(df['Dates']), columns=df.columns)\n\n＃按警区划分\ngroups = dateDF.groupby('PdDistrict')\n\nii = 1\nkey = lambda x:x.strftime(\"%Y\")\nplt.figure(figsize=(20, 12))\nfor name, group in groups:\n    subplot = plt.subplot(4, 4, ii)\n    subplot.plot(group.groupby(key).count())\n    plt.title(name)\n\n    ii+=1\n\nplt.show()\n\n按警区按年的案件走势\n按星期几按年的案件走势\n这两张图也并没有太多的规律，但下面这张图让我们看到了一丝希望。如BAD CHECK类型但案件时逐年降低的。\n按类型按年的案件走势\n\n                ", "mainLikeNum": ["1 "], "mainBookmarkNum": "1"}