{"title": "用 Vim 写 Python 的最佳实践 - 区块链技术研究 ", "index": "vim,python", "content": "先来晒个图：\n\n对于一些 Python 的小项目，使用 vim 是一个不错的选择。本文内容整理自我在知乎的回答 用 Vim 写 Python 的最佳实践是什么？，下面的内容是对知乎旧有回答的一个补充，尤其有一些主要针对 vim8. 如果想要更多内容，可以查看知乎对于该问题的一些回答。\n语法检查\n如果用 vim8, 那么可以用异步检测的 w0rp/ale 代替 syntastic 了，再也不用羡慕 flycheck, 也不用因为语法检查而卡顿了。\n关于 ale 这部分的个性化配置，其实有点 “吹毛求疵”，一般使用默认的应该就够了，不过我喜欢 fancy 的东西，就折腾了一把。涉及的东西可能比较细枝末节，可以直接看 space-vim: syntax-checking 了解一下大概的配置 。主要是针对 ale 提供的 statusline 内容进行再提取进行展示。如果没有语法错误就不显示在 statusline, 如果有 warning 或 error, 则通过不同颜色就行区分。\n\n而关于侧边的 warning 或 error sign, 我喜欢干净一点，用前景色区分就好，下面这样有时候会像一块块的补丁贴在上面，觉得不太好看。\n\n\nsyntax 增强\nvim 自带对于 python 的高亮有点弱，连 self 都不给我亮起来, 这一点可以通过 python-mode/python-mode 来进行增强：\n    hi pythonSelf            ctermfg=174 guifg=#6094DB cterm=bold gui=bold\n具体可以看这里 space-vim: python layer\n在 python-mode 的 syntax/python.vim 里，可以看到比 vim 自带的 syntax/python.vim 更加细致的高亮群组，应该不难看懂各项内容，照着颜色表自行修改高亮风格就可以了。这是 terminal 256 色对照表 256 Terminal colors and their 24bit equivalent (or similar)， 这是 GUI 颜色对照表 Complete HTML True Color Chart 。\n这么做的优点自然是想要什么效果完全可自定义，但是也有缺点，因为可能没办法适配所有的 vim 主题。当你切换主题时，这些针对 python 自定义的高亮也许会有些不太契合。就算是只算流行的那些 vim 主题，恐怕也有两位数了，有些是冷色调，有些是暖色调，有些以蓝色为主，有些是红色居多，应该不太容易找一些百搭的配色。不过每个人所中意的主题可能也就是那么几个，所以自行选择吧.....\n其实 python-mode 有点集大成的意思，囊括了用 vim 写 python 的很多功能，有兴趣的可以尝试靠它 “一招打遍天下”。不过，目前我只是中意这一部分而已。\n代码格式化\n这一点可以通过 google/yapf 来完成，安装好 yapf, 像下面这样 <LocalLeader>= 就能对当前文件进行格式化：\nautocmd FileType python nnoremap <LocalLeader>= :0,$!yapf<CR>\n自动补全\n这一点因为我主要还是使用 vim， 因此用的 YouCompleteMe, 实际后端用的是已经提到的 jedi-vim. 如果不喜欢 ycmd, 使用 neovim 的可以尝试使用 deoplete.nvim .\nimport 整理\n各种 import 是不是显得有点乱？使用 timothycrosley/isort 整理一下吧：\nautocmd FileType python nnoremap <LocalLeader>i :!isort %<CR><CR>\n一键运行\n这个可以通过 skywind3000/asyncrun.vim 来增强， 把之前的 ! 换成 AsyncRun! 就好了. 其实还是有些小小的注意点:\n很多人的一键运行可能大概长这样：\n...\nexec \"!g++ % -o %<\"\nexec \"!time ./%<\"\n...\n可以直接把上面的 ! 换成 AsyncRun! 吗？答案是不可以，如果要达到之前的效果，应该要这样：\nexec \"AsyncRun! g++ -stdc++11 % -o %<; time ./%<\"\n要用分号链接多条命令（linux）或者 & 链接多条命令（windows），具体可以看 这里。\n具体完整的 vim 配置在这里: >>> space-vim （觉得写得不错的话可以顺便到 github 点个 star ? 支持下哈）, 启用 ycmd, syntax-checking, programming, python Layer 就能达到上面的效果了。\n\n                ", "mainLikeNum": ["2 "], "mainBookmarkNum": "21"}