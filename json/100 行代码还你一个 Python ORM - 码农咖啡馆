{"title": "100 行代码还你一个 Python ORM - 码农咖啡馆 ", "index": "orm,mysql,python", "content": "工作中难免有遇到 MySQL 欧巴的时候，奈何我是个记性不大好的人，临笔忘词，只能祭出谷歌大法，于是想着造个小破轮子，优雅地解决 Python 连接 MySQL 的问题。\n\n这个轮子一定不要像 sqlalchemy 那么复杂，也不需要像 Django 的 ORM 那么丰富，就像一碗白米饭，管你吃饱，还为你解决三大问题：\n\n\n轻松连接 MySQL\n数据结构到模型的映射\n满足增改查的基本功能，避免手写SQL\n\n创建连接\n\npythonfrom data_handler import Database\n\ndb_config = {\n    'host': 'localhost',\n    'port': 3306,\n    'user': 'root',\n    'password': '123456',\n    'database': 'test'\n}\nDatabase.connect(**db_config)\n\n\n定义模型\n\npythonfrom data_handler import Model, Field\n\nclass TestModel(Model):\n  db_table = 'test'\n  a = Field()\n  b = Field()\n\n\n插入\n\npythontest = TestModel()\ntest.a = 5\ntest.b = 'john'\ntest.save()\n\n\n查询\n\npythonfor r in TestModel.where(a=5, b='john').select():\n  print r.a\n  print r.b\n\n\n计数\n\npythonprint TestModel.where(a=5, b='john').count()\n\n\n更新\n\npythonTestModel.where(a=5, b='john').update(a=1)\n\n\n复杂查询请使用raw sql\n\npythonfrom data_handler import execute_raw_sql\n\nresults = execute_raw_sql('select b, count(*) from test where b = %s group by b;', (1,))\nfor val, cnt in results:\n  print val, cnt\n\n\n代码放GitHub了 -->  QuickORM\n\n\n  来自：建造者说\n\n\n                ", "mainLikeNum": ["3 "], "mainBookmarkNum": "17"}