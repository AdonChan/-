{"title": "Python获取实例的方法列表，并运行方法 - 八牛博客 ", "index": "python", "content": "具体需求是这样的，有一个类，是用作检查运行环境的，比如python版本，java_home等，具体如下:\n\nclass FlumeEnv(object):\n    # use a class to check flume environment\n    def __init__(self, zk_ip):\n        self._zk_ip = zk_ip\n    def check(self):\n        flag = True\n        # run all method statswith '_check'\n    def _check_zk_connection(self):\n        try:\n            telnetlib.Telnet(self._zk_ip, 2181, 5)\n            return True\n        except:\n            return False\n    def _check_java_home(self):\n        return True if 'JAVA_HOME' in os.environ else False\n\n\ngoogle了下找到了解决方法，其中用到了dir和getattr。\n\n代码示例：\n\nclass A(object):\n    def foo(self):\n        print 'in foo'\ndef _foo2(self):\n    print 'in private foo2'\n\n\n在ipython中，getattr获得的已经是bound到a的方法了，所以可以直接使用：\n\nIn [79]: dir(a)\nOut[79]: \n['__class__',\n '__delattr__',\n '__dict__',\n '__doc__',\n '__format__',\n '__getattribute__',\n '__hash__',\n '__init__',\n '__module__',\n '__new__',\n '__reduce__',\n '__reduce_ex__',\n '__repr__',\n '__setattr__',\n '__sizeof__',\n '__str__',\n '__subclasshook__',\n '__weakref__',\n '_foo2',\n 'foo']\nIn [80]: [i for i in dir(a) if i.startswith('foo')][0]\nOut[80]: 'foo'\n\nIn [81]: getattr(a, 'foo')\nOut[81]: <bound method A.foo of <__main__.A object at 0x2970550>>\n\nIn [82]: getattr(a, 'foo')()\nin foo\n\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}