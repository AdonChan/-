{"title": "练手项目3：访问图像网站，查找某类型图片，下载查询结果 - 个人文章 ", "index": "网页爬虫,python", "content": "一般常用爬虫下载文本，图片，视频，声音。此处以下载图片为例，图片也是相对最容易。\n#-*- coding:utf-8 -*-\nimport os,re,requests\n#获取图片链接（以百度图片为例，因为部分参考了voidsky_很有趣儿的爬虫分享）\nkeyword=raw_input('please input what you want to serch:')\nurl='https://image.baidu.com/search/flip?tn=baiduimage&ie=utf-8&word='+keyword+'&ct=201326592&ic=0&lm=-1&width=&height=&v=flip'\npage=requests.get(url).text\npic_link=re.findall('\"objURL\":\"(.*?)\",',page,re.S)\n\n#将图片文件写入本地\ni=1\nfor item in pic_link:\n#需要添加捕获异常，因为不是所有图片都能下载\n    try:\n        pic=requests.get(item).content\n    except requests.exceptions.ConnectionError:\n        print 'Sorry.The current pic is not avilible.'\n        continue\n    filename=str(i)+('.jpg')\n    path=os.path.join('F:','001',filename)#这个地址是我电脑的地址，可修改输出地址\n    file=open(path,'wb')\n    file.write(pic)\n    file.close()\n    print ('have down', i)\n    i+=1\nprint ('download' ,i-1)\n总结和反思：1、url变量本身就是str类型，无需纠结‘ ’或“ ”；2、requests.get().text  获取了链接地址的源代码文本；   requests.get().text  获取链接地址的二进制内容，用于将图片，声音，视频等写入这些文件中；3、涉及这样批量下载，需要处理捕获异常，不然程序就会在出错处中断，不会继续运行；4、continue 使得程序即使报错了，也能继续下一个循环，即图片下载；5、在正则匹配中re.S参数设置，表示把字符串当做一个整体，n也当做字符串而不是换行，不因换行而重新匹配，可跨行匹配，。6、MP3、MP4格式的文件下载,只要抓包或者F12得到请求链接，那么将上面的程序稍稍改动一下，即可下载。比如：只要能试听，就会有链接。\n声明：部分参考了voidsky_很有趣儿的爬虫分享：https://www.jianshu.com/p/19c...\n\n                ", "mainLikeNum": ["1 "], "mainBookmarkNum": "1"}