{"title": "Python代码缩进与测试模块 - 个人文章 ", "index": "测试,缩进,python", "content": "一、Python代码缩进\nPython 函数没有明显的  begin 和  end ，没有标明函数的开始和结束的花括号。唯一的分隔符是一个冒号 ( : )，接着代码本身是缩进的。\n例如：缩进  buil dCon necti onStr ing 函数\ndef buildConnectionString(params):\n\"\"\"Build a connection string from a dictionary of parameters.\nReturns string.\"\"\"\nreturn \";\".join([\"%s=%s\" % (k, v) for k, v in params.items()])\n代码块是通过它们的缩进来定义的。我所说的“代码块”是指：函数、 if 语句、for 循环、 while 循环，等等。开始缩进表示块的开始，取消缩进表示块的结束。不存在明显的括号，大括号或关键字。这就意味着空白是重要的，并且要一致。在这个例子中，函数代码 (包括  doc string ) 缩进了 4 个空格。不一定非要是 4 个，只要一致就可以了。没有缩进的第一行则被视为在函数体之外。\n例如： “if  语句” 展示了一个  if 语句缩进的例子。\ndef fib(n): (1)\nprint 'n =', n (2)\nif n > 1: (3)\nreturn n * fib(n - 1)\nelse: (4)\nprint 'end of the line'\nreturn 1\n(1) 这是一个名为  fib 的函数，有一个参数  n 。在函数内的所有代码都是缩进的。\n(2) 在 Python 中向屏幕输出内容非常容易，只要使用  print 即可。 print 语句可以接受任何数据类型，包括字符串、整数和其它类型，如字典和列表 。甚至可以混在一起输出，只需用逗号隔开。所有值都输出到同一行，用空格隔开 (逗号并不打印出来)。所以当用  5 来调用  fib时，将输出“n = 5”。\n(3)  if 语句是一种的代码块。如果  if 表达式计算为 true，紧跟着的缩进块会被执行，否则进入  else 块执行。\n(4) 当然  if 和  else 块可以包含许多行，只要它们都同样缩进。这个  else 块中有两行代码。对于多行代码块没有其它特殊的语法，只要缩进就行了。在经过一些最初的抗议和几个与 Fortran 的嘲讽的类比之后，您会心平气和地对待代码缩进，并且开始看到它的好处。一个主要的好处就是所有的 Python程序看上去都差不多，因为缩进是一种语言的要求而不是一种风格。这样就使得阅读和理解他人的 Python 代码容易得多。\nNote: Python vs. Java:  语句和语句分割Python 使用硬回车来分割语句，冒号和缩进来分割代码块。C++ 和 Java 使用分号来分割语句，花括号来分割代码块。\n二、Python测试模块\n所有的 Python 模块都是对象，并且有几个有用的属性。您可以使用这些属性方便地测试您所编写的模块。下面是一个使用  if name 的技巧。\nif name == \"__main__\":\n在继续学习新东西之前，有几个重要的观察结果。首先， if 表达式无需使用圆括号括起来。其次， if 语句以冒号结束，紧跟其后的是缩进代码。\nNote: Python vs. C:  比较和赋值与 C 一样，Python 使用  == 做比较，使用  = 做赋值。与 C 不一样，Python 不支持行内赋值，所以不会出现想要进行比较却意外地出现赋值的情况。\n那么为什么说这个特殊的  if 语句是一个技巧呢？模块是对象，并且所有的模块都有一个内置属性  name 。一个模块的  name 的值取决于您如何应用模块。如果  import 模块，那么  name 的值通常为模块的文件名，不带路径或者文件扩展名。但是您也可以像一个标准的程序一样直接运行模块，在这种情况下  name 的值将是一个特别的缺省值， main 。\n>>> import odbchelper\n>>> odbchelper.__name__\n'odbchelper'\n只要了解到这一点，您就可以在模块内部为您的模块设计一个测试套件，在其中加入这个  if 语句。当您直接运行模块， name 的值是  main ，所以测试套件执行。当您导入模块， name 的值就是别的东西了，所以测试套件被忽略。这样使得在将新的模块集成到一个大程序之前开发和调试容易多了。\nTip: Mac OS  上的  if    name __在 MacPython 上，需要一个额外的步聚来使得  if name 技巧有效。点击窗口右上角的黑色三角，弹出模块的属性菜单，确认 Run as main 被选中。\n参考：Dive Into Python http://diveintopython.org感谢阅读上海尚学堂python文章，更多请点击 上海python培训\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}