{"title": "Django migrations 默认目录修改 - 个人文章 ", "index": "django,python", "content": "migrations 默认目录修改\n群里看到个问题：\nmigrations目录默认放在./app/models/migrations下面，能指定到别的目录吗?比如/data/app/models/migrations下么?\n闲来无事，就稍稍研究了一下。\n先从Migration 方向入手，翻遍手册，没有发现可以指定 path 的地方。\n再从 settings 着手，查找有没有相关可设置的方向，稍稍有所收获：\nMIGRATION_MODULES  选项，可以指定各个label的migration的包路径及名字。但还是相对路径，除非指定一个当前程序路径外的包路径？这点我没有去验证。\n最后再从源码入手，其实就在\nLib\\site-packages\\django\\core\\management\\commands\\makemigrations.py 中使用了 MigrationWriter 类\n\n而MigrationWriter类中的 path 方法决定了路径，\n\npath方法 调用了 basedir 和 filename 方法，一个控制文件名，一个管理路径。\n\n在不想改变文件名的情况下，只需要修改basedir 方法中的 返回值就可以实现这个需求。\nTips: 改完系统包，需要部署到其它环境的时候不要忘了将修改带过去！\nbasedir 中调用了 MigrationLoader 的 migrations_module 方法，该方法返回 app_label 名称 及 一个布尔值\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}