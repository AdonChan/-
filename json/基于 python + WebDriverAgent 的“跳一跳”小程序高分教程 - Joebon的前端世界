{"title": "基于 python + WebDriverAgent 的“跳一跳”小程序高分教程 - Joebon的前端世界 ", "index": "python", "content": "2017年12月28日，微信放出了 6.6.1 版本，在微信首页二楼（下拉出现）位置重磅推出了“跳一跳”小程序，瞬间刷爆朋友圈。\n\n在大家忙于游戏的时候，有人独辟蹊径基于 python + WebDriverAgent 实现了通过 PC 远程操控手机“跳一跳”小程序小人自动跳动，将分数刷到了令人发指的地步，悄悄占领朋友圈第一。\n\n目前已经有比较火的几篇文章详细讲如何实现上述操作，但是或多或少存在描述不够详细、参数设置只在某些机型上表现较好的问题。这也造成我在根据这些教程实现过程中踩了几个小坑。本文基于 Macbook + iphone 6s plus 来讲一下如何实现上述过程，也将踩过的坑记录下。\n环境准备\n安装 python3\n下载并点击安装。下载地址：https://www.python.org/downlo...在终端 terminal 中输入如下命令，查看是否安装 python3 成功。\n~ python3 -V\nPython 3.6.4 \n创建 python3 虚拟环境\n文档地址：https://docs.python.org/3/tut...方法如下：\n~ python3 -m venv tutorial-env\n~ source tutorial-env/bin/activate\n(tutorial-env) ➜  ~\n安装 pip\n安装 python 包管理工具 pip。文档地址：https://pip.pypa.io/en/latest...方法如下：\n(tutorial-env) ➜  ~ curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py\n(tutorial-env) ➜  ~ python get-pip.py\n安装 xcode\n通过 appstore 安装\n安装 WebDriverAgent\nxcode，尽量新版。尽量升级Xcode到最新版，保持iPhone的版本大于9.3。\n从github上下载代码\ngit clone https://github.com/facebook/WebDriverAgent\n安装 carthage\nbrew install carthage\n运行初始化脚本\n./Scripts/bootstrap.sh\n该脚本会使用Carthage下载所有的依赖，使用npm打包响应的js文件\n执行完成后，直接双击打开WebDriverAgent.xcodeproj这个文件。\n设置证书\n设置证书签名，Team 一栏勾选个人账号即可。接着在TARGETS里面选中WebDriverAgentRunner，用同样的方法设置好证书重命名WebDriverAgent的BundleID，避免重名。接着在TARGETS里面选中WebDriverAgentRunner，用同样的方法重命名。\n运行和测试\nXcode - Product - Scheme 中选择 WebDriverAgentRunner。将 iphone 通过数据线连接到 macbook 上。在 Xcode - Product - Destination 中选择数据线连接的 iphone 。\n运行 Xcode - Product - Test\n\n端口转发\n~ brew install libimobiledevice\n~ iproxy 8100 8100\n使用iproxy --help 可以查到更具体的用法。 这时通过访问http://localhost:8100/status确认WDA是否运行成功。\n而inspector的地址是http://localhost:8100/inspector， inspector是用来查看UI的图层，方便写测试脚本用的\n\n使用 python 控制 iphone 自动跳一跳\n获取 python 跳一跳代码\n仓库地址：https://github.com/korbinzhao...\ngit clone git@github.com:korbinzhao/wechat_jump_game.git\n安装 facebook-wda\n(tutorial-env) ➜ ~ pip3 install --pre facebook-wda\n安装项目依赖\n (tutorial-env) ➜  wechat_jump_game git:(master) ✗ pip3 install -r requirements.txt\n拷贝 ./config/iPhone 目录下对应的设备配置文件，重命名并替换到 ./config.json\n\n在手机中打开小程序界面，运行 python 脚本\n\n(tutorial-env) ➜  wechat_jump_game git:(master) ✗ python3 wechat_jump_auto_iOS.py\n最终效果\n\n参考资料\n\n教你用 Python 来玩微信跳一跳\n微信跳一跳 mac + iphone 图文教程\nATX 文档 - iOS 真机如何安装 WebDriverAgent\n\n\n                ", "mainLikeNum": ["2 "], "mainBookmarkNum": "5"}