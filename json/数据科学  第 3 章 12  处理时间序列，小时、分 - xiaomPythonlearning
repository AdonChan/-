{"title": "æ•°æ®ç§‘å­¦  ç¬¬ 3 ç«  12  å¤„ç†æ—¶é—´åºåˆ—ï¼Œå°æ—¶ã€åˆ† - xiaomPythonlearning ", "index": "æ—¶é—´å‡½æ•°,æ•°æ®å¤„ç†,pandas,python", "content": "æ—¶é—´åºåˆ—ï¼Œæ—¥æœŸæ ¼å¼å¤„ç†\nåŸä»¥ä¸ºæœ¬ç« æ˜¯è®²æ€ä¹ˆç”¨pythonå¤„ç†æ—¶é—´æ ¼å¼ï¼Œæ¯”å¦‚æå–å¹´æœˆä¹‹ç±»çš„ã€‚ ä½†æœ¬èŠ‚å†™çš„æ˜¯æ—¶é—´æ ¼å¼å·²ç»å·¥æ•´åçš„äº‹ï¼Œæš‚æ—¶ä¸æ˜¯æˆ‘æƒ³å­¦çš„ï¼Œæ‰€ä»¥è·³è¿‡ï¼Œå°±æ²¡æœ‰å†™å…¬å¼äº†ã€‚\nä¸‹é¢çš„å‡½æ•°æ—¶ä¹‹å‰è°·æ­Œä¹‹åå­¦åˆ°çš„ï¼Œå…ˆæ”¾ä¸Šæ¥ï¼Œä¹¦é‡Œé¢çš„åœ¨åˆ†å‰²çº¿åé¢ï¼š\n--1ã€æŠŠåˆ—è¡¨ä¸­ str è½¬ä¸ºdatetimeæ ¼å¼ï¼špd.to_datetime\nè¿™æ¬¡ä½¿ç”¨çš„æ˜¯trdçš„æ•°æ®ï¼Œå¯¹ç”¨æˆ·åï¼Œäº§å“ï¼Œå§“ååšäº†å¤„ç†ã€‚è¦æ”¹å˜dfä¸­timesçš„æ ¼å¼cycle    3576     non-null objectamount      3576 non-null float64times       3576 non-null object\n#ä¿®æ”¹æ—¶é—´æ ¼å¼\n# datetime.strptime(df.times, %Y%m%d)  è¿™è¡Œä»£ç æ˜¯å…ˆæµ‹è¯•æ˜¯å¦ä¿®æ”¹æˆåŠŸ\ndf['times'] = pd.to_datetime(df['times'], format='%Y/%m/%d')\næ›´æ”¹åcycle    3576 non-null objectamount      3576 non-null float64times       3576 non-null datetime64[ns]\n*è®²äº†asfreq() å’Œ resample() çš„ä½¿ç”¨æ–¹æ³•ï¼Œä½†æ˜¯æ²¡æœ‰getåˆ°æ„æ€ï¼Œç•¥è¿‡ã€‚\n--2ã€åªå–æ—¥æœŸï¼Œä¸è¦æ—¶åˆ†\næ–°å¢ä¸€åˆ—dateï¼Œä¿ç•™å¹´æœˆæ—¥ï¼Œä¸è¦å°æ—¶å’Œåˆ†ã€‚\n#æ–°å¢ä¸€åˆ—æ—¥æœŸï¼Œä¸è¦æ—¶åˆ†\ndf['date'] = pd.to_datetime(df['times']).dt.normalize()\ndf\n\næ–°å¢ä¸¤åˆ—ï¼šå¹´ï¼Œæœˆï¼Œä»¥ä¾¿åç»­åˆ†æã€‚ï¼ˆ-- è¿™ä¸ªæ–¹æ³•å¤ªå¤æ‚ï¼Œè€Œä¸”å¤„ç†æ—¶é—´å¯èƒ½ä¼šæ›´é•¿ï¼Œçœ‹ä¸‹é¢çš„ç®€å•æ–¹æ³•ï¼ï¼ï¼ï¼‰\n#æ–°å¢æœˆä»½ã€å¹´ã€‚åœ¨æœˆä»½è¡¥é½ä¸ºä¸¤ä½æ•°ï¼Œè¦å…ˆæŠŠåŸæ¥çš„monthæ”¹ä¸ºå­—ç¬¦ä¸²ï¼Œå†è¡¥é½åŸmonthï¼Œæœ€åå¾ªç¯\ndf['year'] = [i.year for i in df['date']]\ndf['month'] = [str(i.month).zfill(2) for i in df['date']]\ndf\n\næ•°æ®å¤„ç†å®Œæˆä¹‹åï¼Œå°±å¯ä»¥ç”¨å¹´æœˆåˆ›å»ºé€è§†è¡¨äº†ã€‚\nç”»äº†ä¸€ä¸ª17å¹´æ¯å¤©äº¤æ˜“é‡çš„å›¾ï¼Œé¡ºä¾¿å¼•å‡ºä¸‹ä¸€ç« çš„å†…å®¹ï¼Œç”»å›¾ã€‚\ndf.groupby(['date'])['amount'].count().plot()\næŠŠå›¾åˆ äº†ï¼Œä¸‹ä¸€ç« å…¨æ˜¯è®²çš„å›¾ï¼Œè€Œä¸”è¦çªå‡ºä¸‹é¢çš„å†…å®¹ã€‚\n\n3ã€è¯»å–æ—¥æœŸä¸­çš„å¹´ã€æœˆã€æ—¥ã€å°æ—¶ã€åˆ†ã€ç­‰ç­‰ç­‰ç­‰\nå•Šå•Šå•Šå•Šå•Šå•Šå•Šï¼ï¼ï¼ï¼ï¼è¿™ä¸ªçœŸçš„æ‰¾äº†å¥½ä¹…çš„æ–¹æ³•æ€ä¹ˆè¯»å–dataframeä¸­çš„å°æ—¶å’Œåˆ†ï¼Œæœç´¢ä¹‹åå…¨æ˜¯è¯»å–ç°åœ¨çš„ï¼Œå¦¹çš„ï¼Œä½ è¦ç°åœ¨çš„æœ‰é¬¼ç”¨å•Šï¼Œä½ çš„æ•°æ®é‡Œé¢ä¸æ˜¯å·²ç»æœ‰å…·ä½“çš„æ—¶é—´äº†å—ï¼Œåˆ†æç°åœ¨çš„æ—¶åˆ†å¹²å˜›ï¼Ÿæ‰¾äº†2ä¸ªå°æ—¶ï¼Œç¿»æ¥è¦†å»éƒ½æ˜¯è¿™äº›æ²¡ç”¨çš„ï¼Œè¶Šæ‰¾è¶Šæš´èºï¼Œæœ€åè¿˜æ˜¯åœ¨stackoverflowä¸Šæ‰¾åˆ°äº†ï¼Œæ„Ÿæ©ğŸ’—\n#æå–æ—¶é—´ä¹‹å‰ï¼Œè¦å…ˆæŠŠæå–çš„å­—æ®µè®¾ç½®æˆdatatimeæ ¼å¼\ndf['shijian'] = pd.to_datetime(df['date'], format = \"%Y/%m/%d %H:%M:%S\")\n\n#>>>Out: shijian    825120 non-null datetime64[ns]\n\n#æ‹†åˆ†æ—¥æœŸå’Œå°æ—¶åˆ†\ntemp = pd.DatetimeIndex(df['shijian'])\ndf['Date'] = temp.date\ndf['Time'] = temp.time\ndf['hourss'] = temp.hour\ndf['year'] = temp.year\ndf['month'] = temp.month\næ˜¯ä¸æ˜¯æ¯”ç¬¬äºŒä¸ªæ–¹ä¾¿å¥½å¤šï¼Œè€Œä¸”å¿«å•Šï¼Œæˆ‘çœŸæ£’ï¼ï¼ï¼ç»™è‡ªå·±é¼“æŒğŸ‘ğŸ‘ğŸ‘æ—¥æœŸå’Œæ—¶é—´æ˜¯çœ‹äº†stackoverflowå­¦åˆ°çš„ï¼Œå°æ—¶çš„çœ‹çš„å®˜æ–¹æ–‡æ¡£ã€‚åˆšå¼€å§‹æŠŠtimeæ±‚å‡ºæ¥ä¹‹åï¼Œæƒ³çš„æ˜¯ç”¨æ‹†åˆ†çš„æ–¹æ³•æŠŠå°æ—¶ç®—å‡ºæ¥ï¼Œä½†æ˜¯ç”¨str.split()å¾—åˆ°çš„ç»“æœæ˜¯NaNï¼Œåæ¥çœ‹äº†DatetimeIndexçš„å®˜æ–¹æ–‡æ¡£åï¼Œæ‰å‘ç°å¯ä»¥ç›´æ¥æå–hourçš„å€¼ï¼Œæ‰€ä»¥è¿˜æ˜¯çœ‹æ–‡æ¡£ã€‚\n\né™„ä¸Šæ–‡æ¡£çš„é“¾æ¥åŠæˆªå›¾ï¼Œæ–‡æ¡£èƒ½è§£å†³çš„é—®é¢˜åªæœ‰ä½ æƒ³ä¸åˆ°ï¼Œæ²¡æœ‰åšä¸åˆ°ï¼šhttps://pandas.pydata.org/pan...\n\n\nä¸‹é¢æ˜¯å…¶ä»–å¯èƒ½æœ‰ç”¨çš„çŸ¥è¯†ç‚¹ï¼šæŸ¥çœ‹â€˜2017-09-03â€™ æ˜¯å‘¨å‡ ï¼š\nimport pandas as pd\ndate1 =pd.to_datetime( \"2017-09-03\")\ndate1.strftime('%A')\n\nOut:\n'Sunday'\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}