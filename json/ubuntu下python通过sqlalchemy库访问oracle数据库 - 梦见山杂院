{"title": "ubuntu下python通过sqlalchemy库访问oracle数据库 - 梦见山杂院 ", "index": "sqlalchemy,python", "content": "sqlalchemy并不是数据库驱动，python访问oracle数据的驱动是cx_Oracle，但是这个驱动依赖于Oracle instant client。所以python如果想通过sqlalchemy库访问oracle数据库，那么需要先安装Oracle instant client、再安装cx_Oracle、最后安装sqlalchemy。搞了一圈下来，发现这个过程比较繁琐，现在的资料有些老旧，写篇文档和大家分享下。\n安装Oracle instant client\n去Oracle官网下载安装包\nhttp://www.oracle.com/technet...   我看的时候已经是版本 12.1.0.2.0 ，同一个版本下有很多包，支持cx_Oracle需要下载下面两个包   oracle-instantclient12.1-basic-12.1.0.2.0-1.x86_64.rpm    oracle-instantclient12.1-devel-12.1.0.2.0-1.x86_64.rpm   简称basic、devel包   basic包含有所有的oracle client lib/bin 文件   devel包含了oracle client 外部接口的头文件\n安装\nOracle官方只提供了RPM包，我的操作系统是ubuntu，需要安装一个alien进行转换。   sudo install alien 就可以完成安装\n用alien 将 RPM包转换成DEB包，\n   sudo alien -i oracle-instantclient12.1-basic-12.1.0.2.0-1.x86_64.rpm \n   sudo alien -i oracle-instantclient12.1-devel-12.1.0.2.0-1.x86_64.rpm \n\n然后安装deb包\n   sudo dpkg -i oracle-instantclient12.1-basic-12.1.0.2.0-1.x86_64.deb\n   sudo dpkg -i oracle-instantclient12.1-devel-12.1.0.2.0-1.x86_64.deb\n\nbasic包安装成功后，在/usr/lib/oracle/12.1/client64/目录拷贝了lib、bin库，devel包安装后会/usr/lib/oracle/12.1/client64/目录下拷贝include头文件。   但是，我在用alien转devel RPM包时失败了，后来我就把RPM包解压，发现devel RPM包里面就是一些include文件，把这些文件拷贝到/usr/lib/oracle/12.1/client64/include目录，也能正常工作。\n安装包的作用是在指定目录下存放bin、lib、include头文件这些东西，如果安装不了，可以自己解压执行。\n\n设置环境变量\n设置环境变量的目的是为了让其它程序能找到安装的Oracle库\n   $ export ORACLE_HOME=/usr/lib/oracle/11.2/client64 \n   $ export LD_LIBRARY_PATH=$ORACLE_HOME/lib\n\n链接oracle库到系统目录\n在 /etc/ld.so.conf.d 目录下创建 oracle.conf文件，在文件里面指定oracle库的路径/usr/lib/oracle/11.2/client64/lib    执行链接配置\n   $ sudo ldconfig\n\n安装cx_Oracle\n安装libaio包，libaio是Linux下的一个异步非阻塞接口，它提供了以异步非阻塞方式来读写文件的方式，读写效率比较高，oracle SQLPlus库依赖它。\n   sudo apt-get install libaio1\n\n所有准备工作完成后，执行包安装命令就可以成功安装cx_Oracle了\n   sudo apt-get install cx_Oracle\n\n如果前期的准备工作没做好，会报各种安装失败，大家可以对照安装步骤，比对前面的操作是否正确。\n安装sqlalchemy\n最后使用 sudo apt-get install sqlalchemy 就可以完成安装了\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "1"}