{"title": "django项目运行因中文而出现的乱码报错解决总结 - 个人文章 ", "index": "django,python,linux,debian", "content": "django项目开发过程中，碰到了多种情况下的中文乱码报错，在这儿做一下处理总结。报错：UnicodeEncodeError: 'ascii' codec can't encode characters in position x-x: ordinal not in range(128)\n1.因代码中的中文注释问题的报错\ndjango项目的.py文件文件中加入了中文注释，经常会因此报错而导致无法运行，究其原因是编码的问题，最后的解决办法是直接在有中文注释的.py文件的顶部加上：\n# -*-coding:utf-8 -*-\n\n2.运行过程中的中文乱码的报错\n首先确保连接的数据库的基础设置是utf-8：\n\n然后确认django项目中的网页头部设置编码为utf-8，网页头部加上代码：\n<meta charset=\"utf-8\">\n\n最后仍然报错就是因为django项目中我们没有指明编码方式，所以按照默认设置来，而非正常的utf-8，为：\n\n所以项目最后需要在进行编码操作的地方，或者直接在settings.py中加入：\nimport sys\nreload(sys)\nsys.setdefaultencoding('utf-8')\n\n3.项目配置在debian系统中，FileField字段在admin中因中文文件名上传报错\n在一个django项目中发现，在本地windows测试环境中，django admin的文件上传功能毫无障碍，可是当项目布置在debian环境中时，中文文件名的文件在admin中无法上传，并且报中文乱码的错，该错误的主要原因来自系统编码问题，该debian系统中未设置系统编码语言，均为默认设置，导致所布置的项目无法正常运行，解决如下：（1）.终端中操作安装locales\napt-get install locales\n（2）.重新选择字符编码\ndpkg-reconfigure locales\n（3）.空格选择所有zh_开头的字符编码，OK确认下一步，选择中文UTF-8\n\n\n\n（4）.debian里需要在~/.bashrc里面最下面加入export LC_ALL=zh_CN.UTF-8或者直接运行export LANG=zh_CN.UTF-8（5）.最后直接reboot重启服务器，查看系统编码，UTF-8中文生效，locale命令可以直接查看系统编码设置，此时再运行django项目上传中文名文件无误。\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "1"}