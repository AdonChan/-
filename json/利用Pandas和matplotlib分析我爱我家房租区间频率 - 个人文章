{"title": "利用Pandas和matplotlib分析我爱我家房租区间频率 - 个人文章 ", "index": "可视化,数据分析,网页爬虫,python", "content": "前几天利用python爬取了我爱我家的租房的一些数据，就想着能不能对房租进行一波分析，于是通过书籍和博客等查阅了相关资料，进行了房租的区间分析。不得不说，用python做区间分析比我之前用sql关键字统计区间简单多了，话不多说，上代码\n# coding=utf-8\nimport pandas as pd\nimport pymysql\nimport matplotlib.pyplot as plt\n\ndb = pymysql.connect(host=\"127.0.0.1\", port=3306, user=\"root\", passwd=\"root\", db=\"woaiwojia\", charset='utf8')\ncursor = db.cursor()\ndf = pd.read_sql(\"select  * from zufang \", db)\n#以下注释为对pandas读取数据之后的数据处理读取的尝试\n#前三行\n#rows = df[0:3] \n#price和lxrphone两列\n#cols = df[['price', 'lxrphone']]\n#aa = pd.DataFrame(df)\n#前三行和lxrphone和price列\n# print(df.ix[0:3,['price','lxrphone']])\n#读取数据的信息\n# print(df.info())\n#查看表的描述性信息\n# print(df.describe())\n\n\n#以下为获取price列的最大最小值并分组\nxse = df['price']\n# print(xse.max())\n# print(xse.min())\nfanwei = list(range(1500, xse.max(), 1500))\nfenzu = pd.cut(xse.values, fanwei, right=False)  # 分组区间,长度91\n# print(fenzu.codes)#标签\n# print(fenzu.categories)#分组区间，长度8\npinshu = fenzu.value_counts()  # series,区间-个数\n#print(pinshu)\n# print(pinshu.index)\n\n#设置plot的展示格式\npinshu.plot(kind='bar')\nqujian = pd.cut(xse, fanwei, right=False)\ndf['区间'] = qujian.values\ndf.groupby('区间').median()\ndf.groupby('区间').mean()\n\npinshu_df = pd.DataFrame(pinshu, columns=['频数'])\npinshu_df['频率f'] = pinshu_df / pinshu_df['频数'].sum()\npinshu_df['频率%'] = pinshu_df['频率f'].map(lambda x: '%.2f%%' % (x * 100))\n\npinshu_df['累计频率f'] = pinshu_df['频率f'].cumsum()\npinshu_df['累计频率%'] = pinshu_df['累计频率f'].map(lambda x: '%.4f%%' % (x * 100))\n\nprint(pinshu_df)\n\nplt.show()\n打印的结果\n\n使用matplotlib.pyplot的show方法展示的数据\n参考博客 pandas分区间，算频率参考书籍《Python3爬虫、数据清洗与可视化实战》\n\n                ", "mainLikeNum": ["1 "], "mainBookmarkNum": "1"}