{"title": "[No.003-1]爬虫网易赔率数据并导入到mysql数据库 - Profee-L ", "index": "python", "content": "#encoding:utf-8\nimport urllib2\nfrom bs4 import BeautifulSoup\n\nwebsite = \"http://caipiao.163.com/order/jczq-hunhe/#from=leftnav\"\npage = urllib2.urlopen(website)\nsoup = BeautifulSoup(page)\n\n\n'''\n获取场次以及分数合集比如\n比分对应代码表：\n11对应：1:1\n70对应：胜其他\n77对应：平其他\n07对应：负其他\n因此场次和比分结合为，017-10,017-20,017-21\n'''\n#场次信息 screening\ni = 1\nscreening = []\nfor item in soup.findAll(\"span\",{\"class\":\"co1\"}):\n    screening.append(item.i.string+'\\n')\n    i+=1\n\nsc = open('sc.txt','w')\nsc.writelines(screening)\nsc.close()\n\n#比分标题 bifen\nbifen=[\"1:0\",\"2:0\",\"2:1\",\"3:0\",\"3:1\",\"3:2\",\"4:0\",\"4:1\",\"4:2\",\"5:0\",\"5:1\",\"5:2\",\"胜其他\",\"0:0\",\"1:1\",\"2:2\",\"3:3\",\"平其他\",\"0:1\",\"0:2\",\"1:2\",\"0:3\",\"1:3\",\"2:3\",\"0:4\",\"1:4\",\"2:4\",\"0:5\",\"1:5\",\"2:5\",\"负其他\"]\n\n#场次+比分：ccbf\nccbf = []\nfor item_jtip in screening:\n    for item_bifen in bifen:\n        ccbf.append(item_jtip+item_bifen)\n\n#之后遍历ccbf\nfor item in ccbf:\n    print item\n\n#得到结果集如(场次为3位数字，第一个为主场比分，中间为冒号，最后一个为客场比分)：\n0281:1\n0282:2\n0283:3\n028平其他\n0280:1\n0280:2\n0281:2\n0280：3\n0281:3\n0282:3\n0280:4\n0281:4\n0282:4\n0280:5\n0281:5\n\n#----------------\n'''\n这里因为使用的是python2，所以需要将str->Unicode\n具体参考：\nhttp://blog.csdn.net/mindmb/article/details/7898528\n'''\n\n#建立比分赔率字典bfpl\n#获取比分赔率\nbfpl = []\nfor item in soup.findAll(\"td\",{\"gametype\":\"bf\"}):\n    bfpl.append(item.find(\"div\").string+'\\n')\n\n#写入到文件bf.txt\nbf = open('bf.txt','w')\nbf.writelines(bfpl)\nbf.close()\n\n#组合\nbfdata = {}\nbf = dict(zip(ccbf,bfpl))\n#--------------------\n#出现错误！！！\n#bfpl获取的数量和ccbf数量不一致，重新使用一个队列，同时获取场次和比分的赔率数据放置在一个队列中\n\n\n\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "1"}