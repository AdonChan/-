{"title": "Python 探测图片文件类型 - Python提高班 ", "index": "python", "content": "探测图片类型\n\n今天遇到一个小问题，如何探测图片的文件类型。总结如下：\npython magic\n\nmagic 模块的github地址在这， 可以用来方便地探测文件类型，使用示例如下，可以方便地探测一个文件或是字节流文件。\n>>> import magic\n>>> magic.from_file(\"testdata/test.pdf\")\n'PDF document, version 1.2'\n>>> magic.from_buffer(open(\"testdata/test.pdf\").read(1024))\n'PDF document, version 1.2'\n>>> magic.from_file(\"testdata/test.pdf\", mime=True)\n'application/pdf'\n\nimghdr\n\npython提供的标准库 imghdr 可以用来确定图片的类型，参见这里。API如下:\nimghdr.what(filename[, h])\n# 接受文件名作为参数。如果提供了字节流作为第二个参数，那么第一个文件名参数会被忽略，从而探测字节流的图片类型\n\n简单的例子如下:\n>>> import imghdr\n>>> imghdr.what('bass.gif')\n'gif'\n\n可能的返回类型如下:\n\n'rgb':        SGI ImgLib Files\n'gif':        GIF 87a and 89a Files\n'pbm':        Portable Bitmap Files\n'pgm':        Portable Graymap Files\n'ppm':        Portable Pixmap Files\n'tiff':        TIFF Files\n'rast':        Sun Raster Files\n'xbm':        X Bitmap Files\n'jpeg':        JPEG data in JFIF or Exif formats\n'bmp':        BMP files\n'png':        Portable Network Graphics\n\nPIL.Image\n\n使用PIL也可以检测图片类型，例子如下:\nfrom PIL import Image\n\nimg = Image.open(filename)\nprint(img.format)  # 'JPEG'\n\n而且可以用 PIL 方便地转化图片格式，它会自动检测后缀以合适的格式保存：\nimport Image\nim = Image.open('test.jpg')\nim.save('test.tiff')  # or 'test.tif'\n\n# 或者手动指定格式\nimport Image\nim = Image.open(\"file.png\")\nim.save(\"file.jpg\", \"JPEG\")\n\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "1"}