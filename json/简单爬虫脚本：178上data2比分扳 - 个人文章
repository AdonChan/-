{"title": "简单爬虫脚本：178上data2比分扳 - 个人文章 ", "index": "python,网页爬虫", "content": "Dota2基辅特锦赛正在进行，上班时候又不能看比赛，打开游戏网站吧，也不太好，写了个小脚本抓取178上的比分扳，看下比赛结果，也是极好的吧。。。\n比分扳的数据是js生成的，那就直接传入参数，获取内容\n仔细一看这参数还挺多，Headers中参数标签再窗口中直接打开连接：\n\n使用正则查找数据吧\nfrom bs4 import BeautifulSoup\nimport re\nimport requests\n\ndata={\n    'endpoint':'three',\n    'ids':'100000282,100000930,100000924,100000918,100000843',\n    'callback':'jQuery112408214716044557848_1493194419017',\n    '_':'1493194419018'\n      }\n\nweb_data = requests.get(\"http://wxapi.178.com/vpgame_proxy.php\",params=data)\nsoup = BeautifulSoup(web_data.text,'lxml')\nevent_list = str(soup).split('}]}}')[:-1]\n\n\ndef get_events(strings):\n    events_name = re.findall(r'\"tournamentName\":\"(.*?)\"',strings)\n    events_date = re.findall(r'(\\d{4}-\\d{2}-\\d{2})',strings)\n    events_status = re.findall(r'\"status\":\"(\\w+)\"',strings)\n    l_teams = re.findall(r'\"leftTeam\":\"(.*?)\"',strings)\n    r_teams = re.findall(r'\"rightTeam\":\"(.*?)\"',strings)\n    l_scores = re.findall(r'\"leftTeamScore\":\"(\\d+)\"',strings)\n    r_scores = re.findall(r'\"rightTeamScore\":\"(\\d+)\"',strings)\n    print('|{0!s: ^37s}|{1!s: ^20s}|'.format(events_name[0], events_date[0]))\n    print('{:-^60}'.format('-'))\n    \n    for events_statu,l_team,l_score,r_score,r_team in zip(events_status,l_teams,l_scores,r_scores,r_teams):\n        print('|{0!s: ^8s}|{1!s: ^20}| {2!s: ^1s} - {3!s: ^1s} |{4!s: ^20s}|'.format(events_statu,l_team,l_score,r_score, r_team))\n\nfor i in event_list:\n    get_events(i)\n    print('{:-^60}'.format('-'))\n执行结果\n\n写的比较粗糙，也没有进行排序，凑合用吧\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}