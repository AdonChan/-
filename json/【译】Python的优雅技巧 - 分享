{"title": "【译】Python的优雅技巧 - 分享 ", "index": "python", "content": "枚举\n\n不要这么做：\n\ni = 0 \nfor item in iterable: \n    print i, item \n    i += 1\n\n\n而是这样：\n\nfor i, item in enumerate(iterable):\n    print i, item\n\n\nEnumerate可以接受第二个参数，例如：\n\n>>> list(enumerate('abc')) \n[(0, 'a'), (1, 'b'), (2, 'c')] \n\n>>> list(enumerate('abc', 1)) \n[(1, 'a'), (2, 'b'), (3, 'c')]\n\n\n字典/集合 解析\n\n你可能知道列表解析，但不知道字典/集合解析。字典/集合解析简单而且高效，例如：\n\nmy_dict = {i: i * i for i in xrange(100)} \nmy_set = {i * 15 for i in xrange(100)}\n# There is only a difference of ':' in both\n\n\n强制浮点数除法\n\n如果我们除以一个整数，即使结果是一个浮点数，Python（2） 依旧会给我们一个整数。为了规避这个问题，我们需要这样做：\n\nresult = 1.0/2\n\n\n但是现在有一种别的方法可以解决这个问题，甚至在之前我都没有意识到有这种方法存在。你可以进行如下操作：\n\nfrom __future__ import division \nresult = 1/2\n# print(result)\n# 0.5\n\n\n需要注意的是这个窍门只适用于Python 2。在Python 3 中就不需要进行import 操作了，因为它已经默认进行import了。\n\n简单的服务器\n\n你想快速简单的分享目录下的文件吗？可以这样做：\n\n# Python2\npython -m SimpleHTTPServer\n\n# Python 3\npython3 -m http.server\n\n\n这回启动一个服务器\n\nPython表达式求值\n\n我们都知道eval,但也许并不是所有人都知道literal_eval.可以这么做：\n\nimport ast \nmy_list = ast.literal_eval(expr)\n\n\n而不是这样：\n\nexpr = \"[1, 2, 3]\" \nmy_list = eval(expr)\n\n\n我相信对于大多数人来说这种形式是第一次看见，但是实际上这个在Python中已经存在很长时间了。\n\n分析脚本\n\n按下面的方式运行脚本，可以很简单的对其进行分析：\n\npython -m cProfile my_script.py\n\n\n对象自检\n\n在Python中，可以通过dir()来检查对象，例如：\n\n>>> foo = [1, 2, 3, 4]\n>>> dir(foo) \n['__add__', '__class__', '__contains__', \n'__delattr__', '__delitem__', '__delslice__', ... , \n'extend', 'index', 'insert', 'pop', 'remove', \n'reverse', 'sort']\n\n\n调试脚本\n\n你可以使用pdb模块在脚本中设置断点来调试脚本，就像这样：\n\nimport pdb\npdb.set_trace()\n\n\n你可以在脚本的任何地方加入pdb.set_trace()，该函数会在那个位置设置一个断点。超级方便。你应该多阅读pdb 函数的相关内容，因为在它里面还有很多鲜为人知的功能。\n\n简化if结构\n\n如果必须检查一些值，可以用\n\nif n in [1,4,5,6]:\n\n\n而不是用复杂的if结构：\n\nif n==1 or n==4 or n==5 or n==6:\n\n\n字符串/数列 逆序\n\n下面的方式可以快速反转一个列表：\n\n>>> a = [1,2,3,4]\n>>> a[::-1]\n[4, 3, 2, 1]\n\n# This creates a new reversed list. \n# If you want to reverse a list in place you can do:\n\na.reverse()\n\n\n这种方式同样适用于字符串：\n\n>>> foo = \"yasoob\"\n>>> foo[::-1]\n'boosay'\n\n\n优雅地打印\n\n下面的方式可以用优雅的方式打印字典和列表：\n\nfrom pprint import pprint \npprint(my_dict)\n\n\n这用于字典打印是非常高效的，如果你想从文件中快速优雅的打印出json，可以这样做：\n\ncat file.json | python -m json.tools\n\n\n三元运算\n\n三元运算是if-else 语句的快捷操作，也被称为条件运算。这里有几个例子可以供你参考:\n\n[on_true] if [expression] else [on_false]\nx, y = 50, 25\nsmall = x if x < y else y\n\n\n译文出处：http://www.ido321.com/1576.html\n\n\n\n  本文根据@Nicolas Bevacqua的《nifty-python-tricks》所译，整个译文带有我自己的理解与思想，如果译得不好或有不对之处还请同行朋友指点。如需转载此译文，需注明英文出处：https://freepythontips.wordpress.com/2015/04/19/nifty-python-tricks/。\n\n\n                ", "mainLikeNum": ["7 "], "mainBookmarkNum": "46"}