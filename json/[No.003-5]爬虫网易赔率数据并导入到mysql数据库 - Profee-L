{"title": "[No.003-5]爬虫网易赔率数据并导入到mysql数据库 - Profee-L ", "index": "python", "content": "创建比赛结果数据库\n\nCREATE TABLE `results` (\n`id`  char(14) NOT NULL,\n`scr`  char(3) NULL ,\n`lea`  char(100) NULL ,\n`gmd`  date NULL ,\n`hos`  char(100) NULL ,\n`gue`  char(100) NULL ,\n`win`  float(5,2) NULL ,\n`dog`  float(5,2) NULL ,\n`los`  float(5,2) NULL ,\n`res`  char(10) NULL ,\n`odd`  float(5,2) NULL ,\n`zjq`  int1 NULL,\n`spf`  int1 NULL,\n  PRIMARY KEY (`ID`)\n)\n;\n\n\n#导入结果到results\n#导入到Mysql数据库中\nimport sys\n\nreload(sys)\nsys.setdefaultencoding('utf-8')\n\nimport MySQLdb as mdb\nconn=mdb.connect(host='localhost',user='root',passwd='oracle',db='betdb',port=3306)\ncur = conn.cursor()\nSQL=\"insert into results(id,scr,lea,gmd,hos,gue,win,dog,los,res,odd) values(%s,%s,%s,%s,%s,%s,%s,%s,%s,%s,%s)\"\nl =len(res)/11\nfor i in range(l):\n    for item in res[11*i:11*i+1]:\n        cur.execute(SQL,res[11*i:11*i+11])\n        i+=1\n\n\n#更新胜负数据\n#插入wdl（win,dog,lose）\nALTER TABLE `results`\nADD COLUMN `wdl`  int(1) NULL AFTER `res`;\n#更新胜场3\nupdate results set wdl=3 where\nres=\"1:0\" or\nres=\"2:0\" or\nres=\"2:1\" or\nres=\"3:0\" or\nres=\"3:1\" or\nres=\"3:2\" or\nres=\"4:0\" or\nres=\"4:1\" or\nres=\"4:2\" or\nres=\"5:0\" or\nres=\"5:1\" or\nres=\"5:2\" or\nres=\"胜其他\";\n\n#更新负场0\nupdate results set wdl=0 where\nres=\"0:1\" or\nres=\"0:2\" or\nres=\"1:2\" or\nres=\"0:3\" or\nres=\"1:3\" or\nres=\"2:3\" or\nres=\"0:4\" or\nres=\"1:4\" or\nres=\"2:4\" or\nres=\"0:5\" or\nres=\"1:5\" or\nres=\"2:5\" or\nres=\"负其他\";\n\n#更新平局1\nupdate results set wdl=1 where\nres=\"0:0\" or\nres=\"1:1\" or\nres=\"2:2\" or\nres=\"3:3\" or\nres=\"平其他\";\n#查看更新结果\nselect scr,hos,gue,wdl from results;\n\n\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}