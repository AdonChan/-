{"title": "sphinx快速入门 - nummy的专栏 ", "index": "python,doc,sphinx,sphinx-doc", "content": "简介\nsphinx是一个用于快速生成文档的工具，非常适合生成Python文档。\n它具有以下优点：\n\n支持多种输出格式， 如html，Latex，ePub等。\n丰富的扩展\n结构化文档\n自动索引\n支持语法高亮\n\nsphinx使用reStructuredtext作为它的标记语言。\n安装\n使用pip进行安装：\npip install sphinx\n设置源文件目录\n包含.rst文件的根目录称之为源文件目录，目录中还包含sphinx的配置文件conf.py。\n进入源文件目录，执行以下命令，会指引用户配置整个项目：\nsphinx-quickstart\n定义文件结构\n执行上述命令之后，sphinx会在源文件目录中自动生成conf.py文件以及index.rst。index.rst称之为主文档，它被sphinx作为欢迎页面。\nindex.rst中包含了目录树指令toctree，sphinx使用它链接其他子文档。\ntoctree指令的初始值为空：\n.. toctree::\n   :maxdepth: 2\n接下来就可以给它添加子文档的链接了，直接使用文档的名称即可，省略掉文件后缀，如果是多级目录，则使用/分隔开。\n.. toctree::\n   :maxdepth: 2\n\n   intro\n   tutorial\n   chapter/doc1\n   ...\n接着我们就可以创建上面列出的文件并添加相应内容了，sphnix会自动将这些文档的章节标题插入到doctree指令的位置。\n添加内容\n在sphinx源文件中，使用reStructuredText标记语言进行文档编写，除此之外，sphinx还格外提供了一些指令。\n具体可以参考\nreStructuredText Primer 以及Sphinx Markup Constructs\n生成文档\n使用下面的命令生成文档：\n$ sphinx-build -b html sourcedir builddir\nsourcedir指源文件目录，生成的文档放置在builddir指定的目录中。\n实际上还有一个更简便的方法，sphinx-quickstart生成了一个make.bat文件，可以直接运行这个脚本：\nmake html\n上述命令会直接在源文件目录中生成文档。\n对象文档\nsphinx的设计初衷之一就是更容易生成任何域中对象的文档，域指很多对象的集合，这些对象中还包含了相应的文档注释。\n最主要的域是Python域， 例如python内置函数enumerate()的注释文档如下所示：\n.. py:function:: enumerate(sequence[, start=0])\n\n   Return an iterator that yields tuples of an index and an item of the\n   *sequence*. (And so on.)\n它将被渲染成如下格式：\nenumerate(sequence[, start=0])\n　　Return an iterator that yields tuples of an index and an item of the sequence. (And so on.)　　指令参数是我们需要描述的对象，内容是我们编写的文档注释。由于Python是默认的域，所以并不需要特别指出所属的域来。\n.. function:: enumerate(sequence[, start=0])\n\n   ...\nsphinx还提供了一些指令用于生成其他对象类型的文档。例如py:class以及py:method\n基本配置\nsphinx通过conf.py进行配置，conf.py使用python语法，默认以utf-8编码保存。具体配置请查看 The build configuration file。\n自动生成文档注释\nsphinx支持从python源代码中提取文档注释信息，然后生成文档，我们将这称之为autodoc。\n为了使用autodoc，首先需要在配置文件的extensions选项中添加'sphinx.ext.autodoc'。然后我们就可以使用autodoc的指令了。\n例如，生成函数io.open()的文档，只需要在rst文件中添加如下语句：\n.. autofunction:: io.open\n也可以直接生成整个类的文档：\n.. automodule:: io\n   :members:\n为了提取文档注释，autodoc需要导入注释所在的模块。因此需要在sys.path中设置好模块的路径。\n设置主题\n推荐使用readthedoc使用的主题，美观又简洁大方。首先安装主题库：\npip install sphinx_rtd_theme\n然后配置conf.py:\nimport sphinx_rtd_theme\n\nhtml_theme = \"sphinx_rtd_theme\"\n\nhtml_theme_path = [sphinx_rtd_theme.get_html_theme_path()]\n简书地址\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "5"}