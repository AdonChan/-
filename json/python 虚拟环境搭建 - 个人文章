{"title": "python 虚拟环境搭建 - 个人文章 ", "index": "python", "content": "写这篇的原因是在使用 python 的过程中，陆续安装了 python2.7、python3.6、python3.7 的版本，区分 python2 和 python3 还好，而更新到 python3.7 后，每次安装使用命令pip3 install pkg-name 总是容易安装到 python3.7 的 site-packages 中，而我是想要在 python3.6 环境下进行运行，这个问题如果有更简便的解决方法，还请评论区留言。那么，一个好的方法就是安装 python 虚拟环境，随便你想在哪个版本下进行开发，减少了版本混乱带来的问题。\n下面我们来看具体步骤，以及如何在 PyCharm 和 jupyter notebook 中使用虚拟环境。\n\n设置步骤\n根据需要，设置不同版本的 python 虚拟环境，本文以 python3.6 为例。创建一个名为 python036 的环境，指定 Python 版本是 3.6，conda 会为我们自动寻找 3.6.x 中的最新版本。在执行这一步时要确保你的网络连接正常。\nconda create --name python036 python=3.6\n新创建好的环境就保存在了/anaconda3/envs/python036文件夹下，用户安装的不同 python 环境都会被放在该目录下（在安装过程中会显示environment location），可以在命令中运行conda info -e查看已安装的环境，当前被激活的环境会显示有一个星号或者括号。以本机为例如下：\n# conda environments:\n#\nbase                  *  /anaconda3\nbasemap                  /anaconda3/envs/basemap\npython036                /anaconda3/envs/python036\npython36                 /anaconda3/envs/python36\n在使用虚拟环境时需要注意的一点就是：在每次使用虚拟环境时，需要先激活它（包括安装包在该环境中的时候）。\n输入下列命令来激活新的虚拟环境：\nsource activate python036\n此时，激活后 terminal 会显示如下，多出了 python036 的字样：\n(python036) MacBook-Pro:~ user$ \n实际上，系统做的事情就是把默认的环境从 PATH 中去除，再把 3.6 对应的命令加入 PATH。\n接下来就可以在该环境下，即你指定的某一个 python 版本环境下愉快的写代码了。\n当你想恢复默认环境时，只需执行代码：\nsource deactivate python036\n删除一个已有的虚拟环境，只需在命令行输入：\nconda remove --name python036 --all\n在PyCharm中使用虚拟环境\n这一步设置很简单，打开 PyCharm --> Preferences --> Project Interpreter，点击右上方的设置图标按钮，Add Local 选中对应的路径即可。\n\n但是要注意的是：上图中我添加的路径是 pythonw，而不是python。\n这是为什么呢？\n这一点是为了在 PyCharm 的虚拟环境中使用 Matplotlib。如果直接使用python，会导致无法正常引入 Matplotlib，因为我们这里是使用 conda 进行管理的，官方的解释如下：\n\n看到这里就很清楚该怎么做了，因此解决了这个问题，就可以在 PyCharm 中畅通无阻的写代码了。\n在jupyter notebook中使用虚拟环境\n要想让 jupyter notebook 支持虚拟运行环境，只需在 Anaconda 里安装一个插件，一行命令搞定：\nconda install nb_conda\n要注意的是需要在终端激活的 python 虚拟环境下执行该语句，然后打开 jupyter notebook 新建，就会看到我们的虚拟环境 python036 已经在列表中，选中它即可，如下图所示：\n\n最后，当不需要这个虚拟环境时，使用命令：\nconda remove --name python036 --all\n删除已有的环境。使用conda info -e查看如下：\n# conda environments:\n#\nbase                  *  /anaconda3\nbasemap                  /anaconda3/envs/basemap\npython36                 /anaconda3/envs/python36\n环境 python036 已安全删除。\n使用了一段时间虚拟环境的我觉得这项操作十分的人文关怀，绕开了那些乱七八糟的环境和版本。需要注意的是每次必须先使用source activate python036激活环境，否则徒劳。这一点也是一开始使用比较容易忘的地方。\n今天的分享主要是关于 python 虚拟环境的安装和管理，也许不是最全的，但用来使用应该足以应付，这也是在使用过程中遇到问题而去解决而“被逼的”一次主动学习。如果有更好的方法，欢迎评论区见！\n\n参考链接：Anaconda使用conda管理技巧汇总如何在Jupyter Notebook中使用Python虚拟环境？Working with Matplotlib on OSX\n不足之处，欢迎指正。\n\n                ", "mainLikeNum": ["1 "], "mainBookmarkNum": "1"}