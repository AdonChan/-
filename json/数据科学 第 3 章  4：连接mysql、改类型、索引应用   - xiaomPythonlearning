{"title": "数据科学 第 3 章  4：连接mysql、改类型、索引应用   - xiaomPythonlearning ", "index": "python,数据处理", "content": "今天开始学习《数据科学手册》，主要学习3-5章，其他的选修。\n-- 先连接数据库加载数据：\n用sqlalchemy 的create_engine连接：  注意：代码里mysql+pymysql:  这部分不能加空格，否则会报错\nimport pymysql\nimport pandas as pd\nfrom sqlalchemy import  create_engine\n\nsql = \"select * from sougou\"\nengine = create_engine('mysql+pymysql://root:123456@192.168.200.200/xiaom')\ndf = pd.read_sql(sql,engine,)\n查看每列的格式：<class 'pandas.core.frame.DataFrame'>RangeIndex: 2324 entries, 0 to 2323Data columns (total 6 columns):date       2324 non-null objectid         2324 non-null objectword       2324 non-null objectrank1      2324 non-null objectnumber1    2324 non-null objecturl        2324 non-null objectdtypes: object(6)memory usage: 109.0+ KB\n-- 改rank1、number1的格式\nstr转int转换为数字:https://vimsky.com/article/36...\ndata =df\ndata[['rank1','number1']] = data[['rank1','number1']].apply(pd.to_numeric,errors='coerce')\ndata\n\n第3章4-6节：索引\n-- loc、iloc、ix的运用\n1、多重索引  两个条件\ndata[(data['rank1'] > 10) & (data['number1'] > 10)]\n\n2、loc与iloc的区别：loc[1:3]包含2-4条，iloc为2-3条 ，不含第4条数据\n\n3、行列转换：data.T\n\n4、用iloc取指定行列数据：\ndata.iloc[1:3,3:4]\ndata.iloc[:,2:4]\ndata.iloc[:,:'rank1']  #从前面取到rank1列\n\n5、没怎么懂的pd.MultiIndex.from_tuples()，直接跳过\n6、设置索引、索引排序：\nset_index(inplace = True) 会在原数据集上修改sort_index()reset_index(drop= True)   # 重设索引为默认索引\nindexdata = data\nindexdata.set_index(data['rank1'], inplace = True) \n\nindexdata.sort_index()\n\nindexdata.reset_index(drop= True)  #重设索引为默认索引\n\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}