{"title": "13.首页内容展示 - 后端开发——Flask初体验 ", "index": "flask,python", "content": "发布问答界面与功能以及完成了，我们要把用户发布的内容在首页展示出来，逻辑也是很简单，在请求home.html的时候，从Questions中获取所有的数据，在home.html中使用for循环将每一个对象的内容写上去。将home视图函数改写如下：\n@app.route('/')\ndef home():\n    questions = Questions.query.order_by(Questions.create_time.desc()).all()\n    return render_template('home.html', questions=questions)\n与之前相比，增加了一行从Questions中获取所有数据，并按创建时间倒序排列，因为网页的内容一般都是从新到旧的。然后把获取的数据用questions这个参数传入home.html，因此我们要在home.html增加处理questions的代码，如下：\n{% extends 'base.html' %}\n\n{% block page_name %}首页{% endblock %}\n\n{% block body_part %}\n<ul>\n{% for question in questions %}\n    <li>\n        <div>{{ question.title }}</div>\n        <div>{{ question.content }}</div>\n        <div>{{ question.author.username }}</div>\n        <div>{{ question.create_time }}</div>\n    </li>\n{% endfor %}\n</ul>\n{% endblock %}\n这里也很好理解，从questions中遍历所有的数据，每一个for对应一个li标签，li标签了显示问题的标题、内容、作者及创建时间，其中获取作者的username是通过6.ORM与SQLAlchemy （2） - 模型关系与引用提到的反向引用实现的。此时主页的内容显示如下：\n\n再随便发布一条，首页也会增加，并且新发布的会位于最上面：\n\n到现在展示的功能已经算是实现了，我们再美化一下html，通过author的avatar_path字段把头像也显示出来，最终的效果如下：\n\n附上html代码：\n{% extends 'base.html' %}\n\n{% block static_files %}\n<link rel=\"stylesheet\" href=\"{{ url_for('static',filename='css/home.css') }}\"/>\n{% endblock %}\n\n{% block page_name %}首页{% endblock %}\n\n{% block body_part %}\n<ul>\n{% for question in questions %}\n    <li>\n        <div class=\"avatar-group\">\n            <img src=\"{{ url_for('static',filename=question.author.avatar_path) }}\" class=\"img-circle\"/>\n        </div>\n        <div class=\"question-group\">\n            <p class=\"question-title\"><a href=\"#\">{{ question.title }}</a></p>\n            <p class=\"question-content\">{{ question.content }}</p>\n            <p class=\"question-info\">\n                <span class=\"question-author\">{{ question.author.username }}</span>\n                <span class=\"question-time\">{{ question.create_time }}</span>\n            </p>\n        </div>\n    </li>\n{% endfor %}\n</ul>\n{% endblock %}\n对应的home.css代码：\n.body-container ul{\n    list-style: none;\n    padding: 0 10px;\n}\n\n.body-container li{\n    overflow: hidden;\n    padding: 10px 0;\n    border-bottom: 1px solid #eee;\n}\n\n.avatar-group{\n    width: 38px;\n    float: left;\n}\n\n.img-circle{\n    width: 38px;\n}\n\n.question-group{\n    margin-left: 10px;\n    width: 525px;\n    float: left;\n}\n\n.question-title{\n    font-weight: 900;\n    color: #259;\n}\n\n.question-content{\n    text-indent: 2em;\n}\n\n.question-info{\n    text-align: right;\n}\n\n.question-author{\n    margin-right: 10px;\n}\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}