{"title": "pandas concat ignore_index 无效，依然保留索引 - 个人文章 ", "index": "python", "content": "假设现在有两个数据：\ndf1\n\n    0 1 2 3\na 5.1 4.7 4.9 2.4\nb 3.0 3.2 3.0 6.2\nc 4.5 1.3 2.7 1.8\nd 1.4 1.9 1.4 0.5\ne 0.2 0.2 0.2 3.5\nnewdf\n    0 1 2 3\n0 10 45 13 1\n1 47 15 46 42\n2 38 26 20 11\n3 9 16 44 23\n4 45 6 24 35\n　使用concat合并，设置参数axis=1，ignore_index=True\n\npd.concat([df1,newdf],axis=1,ignore_index=True)\n\n    0 1 2 3 4 5 6 7\na 5.1 4.7 4.9 2.4 NaN NaN NaN NaN\nb 3.0 3.2 3.0 6.2 NaN NaN NaN NaN\nc 4.5 1.3 2.7 1.8 NaN NaN NaN NaN\nd 1.4 1.9 1.4 0.5 NaN NaN NaN NaN\ne 0.2 0.2 0.2 3.5 NaN NaN NaN NaN\n0 NaN NaN NaN NaN 10.0 45.0 13.0 1.0\n1 NaN NaN NaN NaN 47.0 15.0 46.0 42.0\n2 NaN NaN NaN NaN 38.0 26.0 20.0 11.0\n3 NaN NaN NaN NaN 9.0 16.0 44.0 23.0\n4 NaN NaN NaN NaN 45.0 6.0 24.0 35.0\n但是参数设置为axis=0的时候有效，列表成功合并，而且index的确被忽略了。\npd.concat([df1,newdf],axis=0,ignore_index=True)\n\n    0   1   2   3\n0 5.1 4.7 4.9 2.4\n1 3.0 3.2 3.0 6.2\n2 4.5 1.3 2.7 1.8\n3 1.4 1.9 1.4 0.5\n4 0.2 0.2 0.2 3.5\n5 10.0 45.0 13.0 1.0\n6 47.0 15.0 46.0 42.0\n7 38.0 26.0 20.0 11.0\n8 9.0 16.0 44.0 23.0\n9 45.0 6.0 24.0 35.0\n最后的解决方法是先删除索引，再进行合并。。。\ndf1.reset_index(drop=True, inplace=True)\ndf2.reset_index(drop=True, inplace=True)\n　原因\n\nignore_index = True并不意味忽略index然后连接，而是指连接后再重新赋值index(len(index))。从上面可以看出如果两个df有重叠的索引还是可以自动合并的。\n原解释\nignore_index = True'忽略'，表示未在连接轴上对齐。它只是按它们传递的顺序将它们粘贴在一起，然后重新分配实际索引的范围（例如，范围（len（索引））），以便加入非重叠索引之间的差异（假设示例中的轴= 1）是，使用ignore_index = False（默认值），您获得索引的concat，并使用ignore_index = True获得范围。\n参考：pandas concat ignore_index doesn't work\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}