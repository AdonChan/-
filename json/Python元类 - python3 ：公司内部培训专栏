{"title": "Pythonå…ƒç±» - python3 ï¼šå…¬å¸å†…éƒ¨åŸ¹è®­ä¸“æ  ", "index": "python", "content": "Pythonå…ƒç±»\nä¸Šä¸€ç¯‡æ–‡ç« ï¼šPython==ä¸iså¯¹æ¯”ä¸‹ä¸€ç¯‡æ–‡ç« ï¼šPythonæ˜¯åŠ¨æ€è¯­è¨€ï¼šåŠ¨æ€ç¼–è¾‘å±æ€§ã€åŠ¨æ€ç¼–è¾‘æ–¹æ³•æœ¬ç¯‡å†…å®¹åªä¾›äº†è§£ï¼Œå®é™…ä¸Š99%çš„pythonç¨‹åºå‘˜éƒ½ç”¨ä¸åˆ°å…ƒç±»å“Ÿï¼Œä¸è¿‡ä½ è¦æƒ³æˆä¸ºé‚£1%ï¼Œè¯·éšæ„äº«ç”¨ï¼Œåˆ«å®¢æ°”ğŸ˜†\nå…ƒç±»ä½œç”¨ï¼šæ‹¦æˆªç±»çš„åˆ›å»ºã€ä¿®æ”¹ç±»ã€è¿”å›ä¿®æ”¹ä¹‹åçš„ç±»\n\nä¸‡ç‰©çš†å¯¹è±¡ï¼Œç±»åˆ›å»ºäº†å®ä¾‹å¯¹è±¡ï¼Œé‚£æ—¢ç„¶ä¸‡ç‰©çš†å¯¹è±¡ï¼Œç±»ä¹Ÿæ˜¯å¯¹è±¡ï¼Œé‚£ä»€ä¹ˆåˆ›å»ºäº†ç±»å‘¢ï¼Œå•¦å•¦å•¦ï¼Œå½“ç„¶å°±æ˜¯æœ¬ç¯‡çš„ä¸»äººç¿ï¼šå…ƒç±»ã€‚\n1ã€ç±»ä¹Ÿæ˜¯å¯¹è±¡\næ—¢ç„¶ç±»ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£å°±åº”è¯¥å…·æœ‰å¯¹è±¡å…±æœ‰çš„ç‰¹æ€§ï¼šå¯ä»¥å°†å…¶èµ‹ç»™å˜é‡\nå¯ä»¥æ‹·è´\nå¯ä»¥å¢åŠ å±æ€§\nå¯ä»¥ä½œä¸ºå‡½æ•°å‚æ•°è¿›è¡Œä¼ é€’\n\nå®ä¾‹ï¼š\nclass A:\n    def hello_fun(self):\n        print(\"Hello World\")\n\ndef test(a):\n    print(\"ç±»ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’ï¼š\",a)\n\n#ç±»ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥æ‰“å°\nprint(A)\n\n#å› ä¸ºç±»ä¹Ÿæ˜¯å¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥ä½œä¸ºå‡½æ•°å‚æ•°è¿›è¡Œä¼ é€’\ntest(A)\n\n#hasattrç”¨æ¥åˆ¤æ–­æŒ‡å®šç±»ä¸­æ˜¯æœ‰æœ‰å¯¹åº”å±æ€§\nprint(hasattr(A,\"mark\"))#å“¼ï¼Œæˆ‘å°±æ˜¯ä¸€ä¸ªå±æ€§ï¼Œæ¥æ‰“æˆ‘å‘€\n\n#æ·»åŠ å±æ€§å¹¶ä¸”èµ‹å€¼\nA.mark=\"å¸…\"#markæ˜¯å±æ€§åç§°ï¼Œå¸…æ˜¯å€¼\nprint(hasattr(A,\"mark\"))\nprint(\"markå±æ€§å€¼ï¼š\",A.mark)\n\n#å› ä¸ºç±»æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å¯ä»¥æ‹·è´\nB=A#æ‹·è´\nprint(B)\nè¿è¡Œç»“æœï¼š\n<class '__main__.A'>\nç±»ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’ï¼š <class '__main__.A'>\nFalse\nTrue\nmarkå±æ€§å€¼ï¼š å¸…\n<class '__main__.A'>\n2ã€åŠ¨æ€ï¼ˆå‡½æ•°å†…éƒ¨ï¼‰åˆ›å»ºç±»\næ—¢ç„¶ç±»ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå½“ç„¶å¯ä»¥åŠ¨æ€åˆ›å»ºï¼Œæ¯”å¦‚åœ¨å‡½æ•°å†…éƒ¨åˆ›å»ºã€‚\nå®ä¾‹ï¼š\ndef test():\n    class A:\n        def hello_fun(self):\n            print(\"Hello World\")\n    print(\"å‡½æ•°å†…éƒ¨åˆ›å»ºçš„ç±»ï¼š\",A)\n\n\ntest()\nè¿è¡Œç»“æœï¼š\nå‡½æ•°å†…éƒ¨åˆ›å»ºçš„ç±»ï¼š <class '__main__.test.<locals>.A'>\n3ã€typeåŠ¨æ€åˆ›å»ºç±»\ntypeå‡½æ•°é™¤äº†å¯ä»¥æ£€æŸ¥ç±»å‹å¤–ï¼Œå¦ä¸€ä¸ªé«˜å¤§ä¸Šçš„ç”¨é€”å°±æ˜¯åŠ¨æ€åˆ›å»ºç±»ã€‚è¯­æ³•ï¼štype(ç±»å,ç”±çˆ¶ç±»åç§°ç»„æˆçš„å…ƒç»„ï¼ˆå¯ä»¥ä¸ºç©ºï¼‰,åŒ…å«å±æ€§çš„å­—å…¸ï¼ˆåç§°å’Œå€¼ï¼‰)\n\nå®ä¾‹ï¼š\n#å®šä¹‰ä¸€ä¸ªæ²¡æœ‰æ–¹æ³•ï¼Œæ²¡æœ‰å±æ€§çš„ç±»ï¼šA\nA=type(\"A\",(),{})\n\n#æ‰“å°A\nprint(A)\n#æ‰“å°Açš„å®ä¾‹\nprint(A())\n\nprint(\"*\"*30)\n\n#å®šä¹‰ä¸€ä¸ªå¸¦ä¸¤ä¸ªå±æ€§çš„ç±»ï¼šB\nB=type(\"B\",(),{\"name\":\"mark\",\"age\":18})\nprint(B.name)\nprint(B.age)\n\nprint(\"*\"*30)\n\n#å®šä¹‰ä¸€ä¸ªå¸¦æ™®é€šæ–¹æ³•çš„ç±»ï¼šC\ndef test_for_c(self):\n    print(self.name)\nC=type(\"C\",(),{\"name\":\"mark\",\"age\":18,\"test_for_c\":test_for_c})\nc=C()\nc.test_for_c()\n\nprint(\"*\"*30)\n\n#æ·»åŠ é™æ€æ–¹æ³•\n@staticmethod\ndef static_method_test():\n    print(\"static method test\")\nD=type(\"D\",(),{\"name\":\"mark\",\"age\":18,\"static_method_test\":static_method_test})\nD.static_method_test()\n\n\nprint(\"*\"*30)\n#æ·»åŠ ç±»æ–¹æ³•\n@classmethod\ndef class_method_test(cls):\n    print(cls.name)\nE=type(\"E\",(),{\"name\":\"mark\",\"age\":18,\"class_method_test\":class_method_test})\ne=E()\ne.class_method_test()\nE.class_method_test()\n\n\n\n\nç»“æœï¼š\n<class '__main__.A'>\n<__main__.A object at 0x10b7ac0f0>\n******************************\nmark\n18\n******************************\nmark\n******************************\nstatic method test\n******************************\nmark\nmark\n4ã€__metaclass__\nå®ä¾‹ï¼š\nclass A(object,metaclass=xxxx):\n    pass\næ»´ç­”æ»´ç­”ï¼Œæƒ³è±¡ä¸€ä¸‹ï¼Œè§£ææŒ‡é’ˆç°åœ¨è¿è¡Œåˆ°è¿™ä¸ªç±»çš„ä¸Šé¢ï¼Œæ­¤å¤„ç±»è¿˜æ²¡åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œç„¶åå¼€å§‹è§£æAï¼Œé¦–å…ˆå»Açš„å®šä¹‰ä¸­æ‰¾ï¼Œæœ‰æ²¡æœ‰æŒ‡å®š__metaclass__å±æ€§ï¼Œå¦‚æœæŒ‡å®šäº†ï¼Œå°±åˆ©ç”¨è¿™ä¸ªæŒ‡å®šçš„å±æ€§æ¥åˆ›å»ºç±»ï¼Œæ²¡æœ‰æŒ‡å®šå°±ä¼šç”¨typeå¼€ç”Ÿæˆç±»ã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š\n\nç±»ä¸­æœ‰è¿™ä¸ª__metaclass__å±æ€§å—ï¼Œå¦‚æœæœ‰ï¼Œåˆ©ç”¨è¿™ä¸ªå±æ€§æ¥åˆ›å»ºç±»ã€‚\nå¦‚æœç±»ä¸­ä¸å­˜åœ¨ï¼Œåˆ¤æ–­çˆ¶ç±»æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨ï¼Œå°±åˆ©ç”¨è¿™ä¸ªå±æ€§åˆ›å»ºç±»ã€‚\nçˆ¶ç±»ä¹Ÿæ²¡æœ‰ï¼Œå°±å»æ¨¡å—å±‚æ¬¡å¯»æ‰¾è¿™ä¸ªå±æ€§ï¼Œå­˜åœ¨çš„è¯å°±åˆ©ç”¨è¿™ä¸ªå±æ€§åˆ›å»ºç±»ï¼Œ\nå¦‚æœè¿˜æ²¡æœ‰æ‰¾åˆ°ï¼Œå°±ä½¿ç”¨typeæ¥åˆ›å»ºç±»ã€‚\n\n5ã€è‡ªå®šä¹‰å…ƒç±»ï¼ˆé€šè¿‡å®šä¹‰æ–¹æ³•ï¼‰\nç°åœ¨è‡ªå®šä¹‰ä¸€ä¸ªå…ƒç±»ï¼Œä¿è¯æ‰€æœ‰çš„å±æ€§åéƒ½å¤§å†™\nå®ä¾‹ï¼š\ndef upper_attr(class_name,class_parent,class_attr):\n    #éå†å±æ€§å­—å…¸ï¼ŒæŠŠä¸æ˜¯__å¼€å¤´çš„å±æ€§åç§°éƒ½ç¼–ç¨‹å¤§å†™\n    newAttr={}\n    for name,value in class_attr.items():\n        if not name.startswith(\"__\"):\n            newAttr[name.upper()]=value\n    #è°ƒç”¨typeæ¥åˆ›å»ºç±»\n    return type(class_name,class_parent,newAttr)\nclass A(object,metaclass=upper_attr):\n    mark=\"å¸…å“¥\"\n\nprint(hasattr(A,\"mark\"))\nprint(hasattr(A,\"MARK\"))\n\nprint(A.MARK)\n\n\n\nç»“æœï¼š\nFalse\nTrue\nå¸…å“¥\n6ã€è‡ªå®šä¹‰å…ƒç±»ï¼ˆé€šè¿‡ç»§æ‰¿typeï¼‰\nç°åœ¨è‡ªå®šä¹‰ä¸€ä¸ªå…ƒç±»ï¼Œä¿è¯æ‰€æœ‰çš„å±æ€§åéƒ½å¤§å†™\nå®ä¾‹ï¼š\nclass UpperAttrMetaClass(type):\n    #__new__æ˜¯åœ¨__init__ä¹‹å‰è¢«è°ƒç”¨çš„ç‰¹æ®Šæ–¹æ³•ï¼Œç”¨æ¥åˆ›å»ºå¯¹è±¡å¹¶è¿”å›ï¼Œ\n    #è€Œ__init__åªæ˜¯å°†ä¼ é€’çš„å‚æ•°èµ‹ç»™å¯¹è±¡\n    def __new__(cls,class_name,class_parent,class_attr):\n        # éå†å±æ€§å­—å…¸ï¼ŒæŠŠä¸æ˜¯__å¼€å¤´çš„å±æ€§åç§°éƒ½ç¼–ç¨‹å¤§å†™\n        newAttr = {}\n        for name, value in class_attr.items():\n            if not name.startswith(\"__\"):\n                newAttr[name.upper()] = value\n        # æ–¹æ³•1ï¼šè°ƒç”¨typeæ¥åˆ›å»ºç±»\n        #return type(class_name, class_parent, newAttr)\n\n        #æ–¹æ³•2ï¼šå¤ç”¨type.__new__æ–¹æ³•\n        #return type.__new__(cls,class_name,class_parent,newAttr)\n\n        #æ–¹æ³•3ï¼šä½¿ç”¨superæ–¹æ³•\n        return super(UpperAttrMetaClass,cls).__new__(cls,class_name,class_parent,newAttr)\n\n\n\nclass A(object,metaclass=UpperAttrMetaClass):\n    mark=\"å¸…å“¥\"\n\nprint(hasattr(A,\"mark\"))\nprint(hasattr(A,\"MARK\"))\n\nprint(A.MARK)\n\n\n\nç»“æœï¼š\nFalse\nTrue\nå¸…å“¥\n\n                ", "mainLikeNum": ["1 "], "mainBookmarkNum": "0"}