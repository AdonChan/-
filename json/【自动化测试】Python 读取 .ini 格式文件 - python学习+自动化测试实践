{"title": "【自动化测试】Python 读取 .ini 格式文件 - python学习+自动化测试实践 ", "index": "yaml,python", "content": "\n大家应该接触过.ini格式的配置文件。配置文件就是把一些配置相关信息提取出去来进行单独管理，如果以后有变动只需改配置文件，无需修改代码。特别是后续做自动化的测试，需要拎出一部分配置信息，进行管理。比如说发送邮件的邮箱配置信息、数据库连接等信息。\n今天介绍一些如何用Python读取ini配置文件。\n一、ini文件格式 \n格式如下：\n; comments\n[section1]\nParam1 = value1\nParam2= value2\n[section2]\nParam3= value3\nParam4= value4\n\n\n[section]：ini的section模块，是下面参数值的一个统称，方便好记就行。\n\nParam = value：参数以及参数值。\nini 文件中，使用“;”进行注释。\n\n二、读取ini文件\nPython自带有读取配置文件的模块ConfigParser，配置文件不区分大小写。有一系列的方法可提供。\n\n\nread(filename)：读取文件内容\n\nsections()：得到所有的section，并以列表的形式返回。\n\noptions(section)：得到该section的所有option。\n\nitems(section)：得到该section的所有键值对。\n\nget(section,option)：得到section中option的值，返回string类型。\n\ngetint(section,option)：得到section中option的值，返回int类型。\n\n举个栗子：\nimport os\nimport configparser\n\n# 当前文件路径\nproDir = os.path.split(os.path.realpath(__file__))[0]\n# 在当前文件路径下查找.ini文件\nconfigPath = os.path.join(proDir, \"config.ini\")\nprint(configPath)\n\nconf = configparser.ConfigParser()\n\n# 读取.ini文件\nconf.read(configPath)\n# get()函数读取section里的参数值\nname  = conf.get(\"section1\",\"name\")\nprint(name)\nprint(conf.sections())\nprint(conf.options('section1'))\nprint(conf.items('section1'))\n运行结果：\nD:\\Python_project\\python_learning\\config.ini\n2号\n['section1', 'section2', 'section3', 'section_test_1']\n['name', 'sex', 'option_plus']\n[('name', '2号'), ('sex', 'female'), ('option_plus', 'value')]\n三、修改并写入ini文件\n\n\nwrite(fp)：将config对象写入至某个ini格式的文件中。\n\nadd_section(section)：添加一个新的section。\n\nset(section,option,value)：对section中的option进行设置，需要调用write将内容写入配置文件。\n\nremove_section(section)：删除某个section。\n\nremove_option(section,option)：删除某个section下的option\n\n举个栗子：接上部分\n# 写入配置文件 set()\n# 修改指定的section的参数值\nconf.set(\"section1\",'name','3号')\n\n# 增加指定section的option\nconf.set(\"section1\",\"option_plus\",\"value\")\nname = conf.get(\"section1\",\"name\")\nprint(name)\nconf.write(open(configPath,'w+'))\n\n# 增加section\nconf.add_section(\"section_test_1\")\nconf.set(\"section_test_1\",\"name\",\"test_1\")\nconf.write(open(configPath,'w+'))\n\n来句鸡汤：相信未来会越走越好 那么就肯定要坚持  我希望未来的我不会让自己后悔\n\n❤ thanks for watching, keep on updating...\n\n                ", "mainLikeNum": ["1 "], "mainBookmarkNum": "0"}