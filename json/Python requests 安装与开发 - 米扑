{"title": "Python requests 安装与开发 - 米扑 ", "index": "linux,php,css,html5,python", "content": "Requests 是用Python语言编写HTTP客户端库，跟urllib、urllib2类似，基于 urllib，但比 urllib 更加方便，可以节约我们大量的工作，完全满足 HTTP 测试需求，编写爬虫和测试服务器响应数据时经常会用到。Requests 的哲学是以 PEP 20 的习语为中心开发的，所以它比 urllib 更加 Pythoner，更重要的一点是它支持 Python3 Beautiful is better than ugly. (美丽优于丑陋)Explicit is better than implicit. (清楚优于含糊)Simple is better than complex. (简单优于复杂)Complex is better than complicated. (复杂优于繁琐)Readability counts. (重要的是可读性)\n Requests 官网：https://pypi.python.org/pypi/requests 安装 Requests方式1）pip 安装pip install requests      # python2.7pip3 install requests    # python3.6 方式2）源码安装下载 requests-2.18.2.tar.gz解压安装：tar zxvf requests-2.18.2.tar.gzcd requestspython setup.py install验证安装：\n$ python\nPython 2.7.13 (v2.7.13:a06454b1afa1, Dec 17 2016, 12:39:47) \n[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> import requests\n>>> requests\n<module 'requests' from '/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/requests/__init__.pyc'>\n 使用 Requestsrequests 封装了Python的urlib和urllib2，所以爬取网页非常简洁1. 爬取网页\nimport requests\n \n# 爬取米扑科技首页\nreq = requests.get(url = 'http://mimvp.com')\nprint(\"status_code : \" + str(req.status_code))\nprint(\"mimvp text : \" + req.text)\n \n# 爬取米扑代理（含请求参数）\nreq = requests.get(url='http://proxy.mimvp.com/free.php', params={'proxy':'out_tp','sort':'p_ping'})   \nprint(\"status_code : \" + str(req.status_code))\nprint(\"mimvp text : \" + req.text)\n爬取网页非常简洁吧，Python urllib 三行代码，requests只需要一行代码搞定urllib ：  urllib.urlopen('http://mimvp.com').read()urllib2： urllib2.urlopen('http://mimvp.com').read()或者\nimport urllib2\nreq = urllib2.Request('http://mimvp.com')\nres = urllib2.urlopen(req)\npage = res.read()\n requests 接口格式：\nrequests.get('https://mimvp.com/timeline.json')    # GET请求\nrequests.post('http://mimvp.com/post')            # POST请求\nrequests.put('http://mimvp.com/put')              # PUT请求\nrequests.delete('http://mimvp.com/delete')        # DELETE请求\nrequests.head('http://mimvp.com/get')             # HEAD请求\nrequests.options('http://mimvp.com/get')          # OPTIONS请求\n requests 接口示例：\nimport requests\nrequests.get('http://mimvp.com', params={'love': 'mimvp'})    # GET参数实例\nrequests.post('http://mimvp.com', data={'love': 'mimvp'})     # POST参数实例\n Requests 设置代理\n#!/usr/bin/env python\n# -*- encoding: utf-8 -*-\n#\n# Python requests 支持 http、https、socks4、socks5\n#\n# 米扑代理示例：\n# http://proxy.mimvp.com/demo2.php\n# \n# 米扑代理购买：\n# http://proxy.mimvp.com\n# \n# mimvp.com\n# 2016-09-16\n \n \nimport requests\nimport ssl\nimport socks, socket    # 需要引入socks.py文件，请到米扑代理下载\n \n \nmimvp_url = \"http://proxy.mimvp.com/exist.php\"\nmimvp_url2 = \"https://proxy.mimvp.com/exist.php\"\nmimvp_url3 = \"https://apps.bdimg.com/libs/jquery-i18n/1.1.1/jquery.i18n.min.js\"\n             \n             \n# 使用代理 http, https\nproxies = { \n            \"http\"  : \"http://120.77.155.249:8888\", \n            \"https\" : \"http://54.255.211.38:80\", \n           }   \n   \nreq = requests.get(mimvp_url2, proxies=proxies, timeout=30, verify=False) \nprint(\"mimvp text : \" + req.text)\n \n \n \n# 使用代理 socks4\nproxies = { \n            'socks4' : '163.121.188.2:4000',\n           }   \n  \nsocks4_ip = proxies['socks4'].split(\":\")[0]\nsocks4_port = int(proxies['socks4'].split(\":\")[1])\nsocks.setdefaultproxy(socks.PROXY_TYPE_SOCKS4, socks4_ip, socks4_port)\nsocket.socket = socks.socksocket\n  \nreq = requests.get(mimvp_url2, timeout=30, verify=False) \nprint(\"mimvp text : \" + req.text)\n \n \n \n# 使用代理 socks5\nproxies = { \n            'socks5' : '190.9.58.211:45454',\n           }   \n   \nsocks5_ip = proxies['socks5'].split(\":\")[0]\nsocks5_port = int(proxies['socks5'].split(\":\")[1])\nsocks.setdefaultproxy(socks.PROXY_TYPE_SOCKS5, socks5_ip, socks5_port)\nsocket.socket = socks.socksocket\n   \nreq = requests.get(mimvp_url2, timeout=30, verify=False) \nprint(\"mimvp text : \" + req.text)\n 本示例采用的米扑代理，支持 http、https、socks4、socks5等多种协议，覆盖全球120多个国家，中国34个省市推荐米扑代理： http://proxy.mimvp.com  参考推荐：Python pyspider 安装与开发Python3 urllib 用法详解PhantomJS 安装与开发Node.js 安装与开发Node.js SuperAgent 安装与开发 \n\n                ", "mainLikeNum": ["2 "], "mainBookmarkNum": "2"}