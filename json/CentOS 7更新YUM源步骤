{"title": "CentOS 7更新YUM源步骤 ", "index": "python,linux,mysql,人工智能,区块链", "content": "推荐本人的《Python 自动化运维实战》课程，提供在线实验环境，边敲代码边学习。\n国内小伙伴推荐使用阿里云的源，阿里大法好！真善忍好！可惜马云爸爸要退休了 (⊙︿⊙)\nStep1 找到需要的源\n阿里巴巴开源镜像站各种源应有尽有，老域名是https://mirrors.aliyun.com/\n\nStep2 编辑CentOS7.repo文件\n进入/etc/yum.repos.d，发现我的源还是7.4.1708\n[base]\nname=CentOS-$releasever - Base - mirrors.aliyun.com\nfailovermethod=priority\nbaseurl=http://mirrors.aliyun.com/centos/7.4.1708/os/x86_64/\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=os\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7\n\n#released updates\n[updates]\nname=CentOS-$releasever - Updates - mirrors.aliyun.com\nfailovermethod=priority\nbaseurl=http://mirrors.aliyun.com/centos/7.4.1708/updates/x86_64/\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=updates\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7\n\n#additional packages that may be useful\n[extras]\nname=CentOS-$releasever - Extras - mirrors.aliyun.com\nfailovermethod=priority\nbaseurl=http://mirrors.aliyun.com/centos/7.4.1708/extras/x86_64/\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=extras\ngpgcheck=1\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7\n\n#additional packages that extend functionality of existing packages\n[centosplus]\nname=CentOS-$releasever - Plus - mirrors.aliyun.com\nfailovermethod=priority\nbaseurl=http://mirrors.aliyun.com/centos/7.4.1708/centosplus/x86_64/\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=centosplus\ngpgcheck=1\nenabled=0\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7\n\n#contrib - packages by Centos Users\n[contrib]\nname=CentOS-$releasever - Contrib - mirrors.aliyun.com\nfailovermethod=priority\nbaseurl=http://mirrors.aliyun.com/centos/7.4.1708/contrib/x86_64/\n#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&arch=$basearch&repo=contrib\ngpgcheck=1\nenabled=0\ngpgkey=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7\n这个版本的源已经迁移到7.5.1804了，→地址，使用VIM将其替换\n:%s/7.4.1708/7.5.1804/g\nStep3 修复冲突报错\n然后更新系统试试yum -y update\n[root@liaogx ~]# yum -y update\nPlugin \"product-id\" can't be imported\nPlugin \"search-disabled-repos\" can't be imported\nLoaded plugins: fastestmirror\nLoading mirror speeds from cached hostfile\n * base: mirrors.aliyun.com\n * epel: mirrors.tuna.tsinghua.edu.cn\n * extras: mirrors.aliyun.com\n * updates: mirrors.aliyun.com\nResolving Dependencies\n--> Running transaction check\n---> Package ModemManager.x86_64 0:1.6.0-2.el7 will be updated\n......此处略......\n---> Package yum-rhn-plugin.noarch 0:2.0.1-10.el7 will be installed\n--> Running transaction check\n---> Package libbytesize.x86_64 0:1.2-1.el7 will be installed\n---> Package python2-pytoml.noarch 0:0.1.18-1.el7 will be installed\n---> Package volume_key-libs.x86_64 0:0.3.9-8.el7 will be installed\n--> Processing Conflict: initscripts-9.49.41-1.el7_5.1.x86_64 conflicts redhat-release < 7.5-0.11\n--> Finished Dependency Resolution\nError: initscripts conflicts with redhat-release-server-7.4-18.el7.x86_64\n You could try using --skip-broken to work around the problem\n** Found 2 pre-existing rpmdb problem(s), 'yum check' output follows:\nPackageKit-1.1.5-1.el7.centos.x86_64 has missing requires of PackageKit-backend\nrhn-check-2.0.2-17.el7.noarch has missing requires of yum-rhn-plugin >= ('0', '1.6.4', '1')\n[root@liaogx ~]#\n如果报如下错误\nError: initscripts conflicts with redhat-release-server-7.4-18.el7.x86_64\n这是更新软件包是与原版本冲突造成的，有两种解决办法\n\n通过关键字initscritps排除冲突：yum update --exclude=kernel* --exclude=centos-release* --exclude=initscripts*\n\n删除冲突包：rpm -e redhat-release-server-7.4-18.el7.x86_64 --nodeps\n\n\n这里使用第二种方法，把冲突的包干掉\n[root@liaogx ~]# rpm -e redhat-release-server-7.4-18.el7.x86_64 --nodeps\nwarning: file /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release: remove failed: No such file or directory\nwarning: file /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-legacy-rhx: remove failed: No such file or directory\nwarning: file /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-legacy-release: remove failed: No such file or directory\nwarning: file /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-legacy-former: remove failed: No such file or directory\nwarning: file /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-beta: remove failed: No such file or directory\n[root@liaogx ~]#\nStep4 更新系统\n小白从入门到跑路必会，sudo yum -y update，老鸟都懂。\n[root@liaogx ~]# yum -y update\n......此处省略10分钟......\nComplete!\n[root@liaogx ~]#\n更新成功 ^_^\n推荐本人的《Python 自动化运维实战》课程，提供在线实验环境，边敲代码边学习。\n\n                ", "mainLikeNum": ["11 "], "mainBookmarkNum": "8"}