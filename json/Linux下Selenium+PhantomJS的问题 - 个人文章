{"title": "Linux下Selenium+PhantomJS的问题 - 个人文章 ", "index": "python,python爬虫,phantomjs,selenium", "content": "今日Tbor登录linux大陆手拿Selenium+PhantomJS准备打怪升级，尼玛， 没有数据？\n<html><head></head><body></body></html>\nTbor怀疑自己昨晚太过劳累， 于是他。。。睡着了！每攻击一次睡一觉。男人嘛， 休息还是挺重要的！\nimport time\nfrom selenium import webdriver\ndriver = webdriver.PhantomJS(executable_path=\"/home/Tbor/Desktop/phantomjs-2.1.1-linux-x86_64/bin/phantomjs\")\ndriver.get(\"https://www.baidu.com/\")\ntime.sleep(3)\nprint driver.page_source\n结果他发现， 这完全改变不了他肾亏的事实！\n<html><head></head><body></body></html>\n这可不是Tbor想要的， 第一反应可能自己被发现了， Tbor怀疑自己的脑袋（请求头）辨识度太高， 于是Tbor抬起自己手中的Selenium+PhantomJS启动伪装术\nimport time\nfrom selenium import webdriver\nfrom selenium.webdriver.common.desired_capabilities import DesiredCapabilities\ndcap = DesiredCapabilities.PHANTOMJS.copy()\n\nheader = {\n\"Accept\":\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\",\n\"Accept-Encoding\":\"gzip, deflate, br\",\n\"Accept-Language\":\"zh-CN,zh;q=0.9\",\n\"Cache-Control\":\"max-age=0\",\n\"Connection\":\"keep-alive\",\n\"Cookie\":\"lsv=globalTjs_48e30dd-wwwTcss_cb39b0d-wwwBcss_483ee4a-framejs_2d8c954-globalBjs_8c0c610-sugjs_ddbaa53-wwwjs_5bf2601; plus_cv=1::m:caddfa4f; MSA_WH=320_568; ispeed_lsm=2; sug=3; sugstore=0; ORIGIN=0; bdime=0; BAIDUID=1A18D1CA8AAB7B0DDAAA0CC1CB239A9A:FG=1; BIDUPSID=1A18D1CA8AAB7B0DDAAA0CC1CB239A9A; PSTM=1524476137; B64_BOT=1; H_PS_645EC=a4beKut49tLxOMARLfm%2Fo6SdsqBYpvVfsiXBqLEPqjmyN6v9HOy5k06aQp8; BD_CK_SAM=1; PSINO=6; BDRCVFR[c3DJb-79z0f]=mk3SLVN4HKm; BD_HOME=0; H_PS_PSSID=26254_1424_21085_26106; BD_UPN=12314353\",\n\"Host\":\"www.baidu.com\",\n\"Upgrade-Insecure-Requests\":\"1\",\n\"User-Agent\":\"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36\",\n}\nfor key, value in header.items():\n    dcap['phantomjs.page.customHeaders.{}'.format(\n        key)] = value\n\ndriver = webdriver.PhantomJS(executable_path=\"/home/Tbor/Desktop/phantomjs-2.1.1-linux-x86_64/bin/phantomjs\")\ndriver.get(\"https://www.baidu.com/\"， desired_capabilities=dcap)\ntime.sleep(3)\nprint driver.page_source\n一阵激斗， 烟雾散去\n<html><head></head><body></body></html>\n尼玛， 这么强悍的吗？不过Tbor什么场面没见过， 于是他跑了。。Tbor回到了windows大陆， 用同样的招式\n\n难道是因为自己英俊的脸庞， 于是Tbor回到家赶紧找镜子吗看看自己是否又变帅了！因为他觉得只有这个原因， 没有其他解释！他找到镜子， 镜子旁边， 他翻开了一本古籍！\n“”PhantomJS使用的加密方式是SSLv3，有些网站用的是TLS。。。“”是否是因为加密方式的区别？\n于是他\nimport time\nfrom selenium import webdriver\ndriver = webdriver.PhantomJS(service_args=['--ignore-ssl-errors=true', '--ssl-protocol=any'],executable_path=\"/home/Tbor/Desktop/phantomjs-2.1.1-linux-x86_64/bin/phantomjs\")\ndriver.get(\"https://www.baidu.com/\")\ntime.sleep(3)\nprint driver.page_source\n于是他。。。\n\n                ", "mainLikeNum": ["1 "], "mainBookmarkNum": "2"}