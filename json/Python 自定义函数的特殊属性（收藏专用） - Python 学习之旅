{"title": "Python 自定义函数的特殊属性（收藏专用） - Python 学习之旅 ", "index": "python3.x,function,特殊属性,自定义函数,python", "content": "Python 中通过函数定义所创建的用户自定义函数对象均具有一些特殊属性，需要注意的是这里介绍的是自定义函数（function类型）的特殊属性，而非方法（method 类型）的特殊属性，函数和方法的特熟属性以及默认的返回值可能不尽相同。\n对于大多数特殊属性，可以通过下面这个例子示范一下：\nclass Test():\n\n    def func(self, v = 'dog'):\n        '''这里演示一个闭包函数'''\n\n        name = 'dobi'\n        def inn_func(age = 1):\n            print(name, v, age)\n\n        return inn_func\n\ntest = Test()\nclsfunc = test.func()\n首先看一下方法与函数的区别：实例的函数为bound method，而类的函数以及闭包均为function，需要强调的是 Python 2.x 中类的函数为unbound method，这点与Python 3.x 有所不同，本文则基于 Python 3.51 整理。\nprint(Test.func)\n# <function Test.func at 0x0000020F0766E268>\nprint(test.func)\n# <bound method Test.func of <__main__.Test object at 0x0000020F077E5DA0>>\nprint(clsfunc)\n# <function Test.func.<locals>.inn_func at 0x0000020F071D7F28>\n__doc__\n可写；用于获取函数的文档说明，如果没有，则返回 None。\nprint('Test.func.__doc__:', Test.func.__doc__)\n# Test.func.__doc__: 这里演示一个闭包函数\nTest.func.__doc__ = 'ddd'  #注意，这里是 Test,不能是 test\nprint('Test.func.__doc__:', Test.func.__doc__)\n# Test.func.__doc__: ddd\n__name__\n可写；获取函数的名称。\nprint('Test.func.__name__:', Test.func.__name__)\n# Test.func.__name__: func\nTest.func.__name__ = 'pet'\nprint('Test.func.__name__:', Test.func.__name__)\n# Test.func.__name__: pet\n__qualname__\n可写；获取函数的qualname：点示法显示函数名称、所在的类、模块等梯级地址。\nprint('Test.func.__qualname__:', Test.func.__qualname__)\n# Test.func.__qualname__: Test.func\nTest.func.__qualname__ = 'path'\nprint('Test.func.__qualname__:', Test.func.__qualname__)\n# Test.func.__qualname__: path\n__module__\n可写；返回函数所在的模块，如果无则返回None。\nprint('Test.func.__module__:', Test.func.__module__)\n# Test.func.__module__: __main__\nTest.func.__module__ = 'a'\nprint('Test.func.__module__:', Test.func.__module__)\n# Test.func.__module__: a\n__defaults__\n可写；以元组的形式返回函数的默认参数，如果无默认参数则返回None。\nprint('Test.func.__defaults__:', Test.func.__defaults__)\n# Test.func.__defaults__: ('dog',)\nTest.func.__defaults__ = ('cat',)\nprint('Test.func.__defaults__:', Test.func.__defaults__)\n# Test.func.__defaults__: ('cat',)\nprint('clsfunc.__defaults__:', clsfunc.__defaults__)\n# clsfunc.__defaults__: (1,)\nclsfunc.__defaults__ = (2,)\nprint('clsfunc.__defaults__:', clsfunc.__defaults__)\n# clsfunc.__defaults__: (2,)\n__code__\n可写；返回已编译的函数对象。\nprint('Test.func.__code__:', Test.func.__code__)\n# Test.func.__code__: <code object func at 0x0000020F072C2F60, file \"D:\\...\\a.py\", line 4>\n\ndef func2():print('cat')\nTest.func.__code__ = func2.__code__\nTest.func()\n# cat\nprint('Test.func.__code__:', Test.func.__code__)\n# Test.func.__code__: <code object func2 at 0x0000020F072C5780, file \"D:\\...\\a.py\", line 38>\n__globals__\n只读，以字典的形式返回函数所在的全局命名空间所定义的全局变量。\nprint('Test.func.__globals__:', Test.func.__globals__)\n# Test.func.__globals__: {\n# '__cached__': None, \n# 'Test': <class '__main__.Test'>, \n# '__builtins__': <module 'builtins' (built-in)>, \n# 'func2': <function func2 at 0x0000020F077D3C80>, \n# '__spec__': None, \n# '__doc__': None, \n# '__file__': 'D:\\\\...\\\\a.py', \n# 'test': <__main__.Test object at 0x0000020F077E5DA0>, \n# 'clsfunc': <function Test.func.<locals>.inn_func at 0x0000020F071D7F28>, \n# '__package__': None, \n# '__name__': '__main__', \n# '__loader__': <_frozen_importlib_external.SourceFileLoader object at 0x0000020F07289828>\n# }\n__dict__\n可写；以字典的形式返回命名空间所支持的任意自定义的函数属性。\nprint('Test.func.__dict__:', Test.func.__dict__)\n# Test.func.__dict__: {}\n__closure__\n只读；以包含cell的元组形式返回闭包所包含的自由变量。\nprint('Test.func.__closure__:', Test.func.__closure__)\n# None\nprint('clsfunc.__closure__:', clsfunc.__closure__)\n# clsfunc.__closure__: (\n# <cell at 0x0000020F071FE708: str object at 0x0000020F07289998>, \n# <cell at 0x0000020F072B8C78: str object at 0x0000020F0766C538>\n# )\nprint('clsfunc.__closure__[x]:', clsfunc.__closure__[0].cell_contents, clsfunc.__closure__[1].cell_contents)\n# clsfunc.__closure__[x]: dobi dog\n__annotations__\n可写；具体详见“Python 的函数注释”\n__kwdefaults__\n可写，具体详见 “Python 的 Keyword-Only Arguments(强制关键字参数)”\n\n                ", "mainLikeNum": ["3 "], "mainBookmarkNum": "14"}