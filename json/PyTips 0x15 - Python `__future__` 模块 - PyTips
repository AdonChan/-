{"title": "PyTips 0x15 - Python `__future__` 模块 - PyTips ", "index": "pytips,python3.5,python", "content": "项目地址：https://git.io/pytips\n我们经常从一些组织良好的 Python 项目中看到 __future__ 的身影，例如：\nfrom __future__ import absolute_import, division\n__future__ 模块由 PEP 236 提出并加入到 Python 2.1，其存在的主要原因是 Python 的版本升级经常会增加一些新的特性，而 __future__ 模块将一些新版本中将会增加的新的特性进行声明，同时使得旧版本可以使用这些新的语法特性。当然，如果你用的是 Python 2.1 以前的版本，是没办法使用 __future__ 的。__future__ 模块的导入一定要放在最上方，也就是在所有其它模块之前导入。\n根据 Python 3.5 中 __future__ 的源文件，一共包括下面几个新特性：\n\n表中第一列包含了所有可以从 __future__ 中导入的特性，optional in 中的版本号为最低可使用的版本，mandatory in 中的版本号为已经实现，无需从 __future__ 导入 的版本号。最后一列是每个新特性所对应的 PEP 及简单描述。下面主要看一下几个 3.0 之后添加的属性。\ndivision\n在 3.0 之前，除号 / 的用法都是整除，例如在 2.7 中，8/7=1，如果需要浮点数相除，需要显式使用浮点数类型：8./7=1.1428571428571428，如果是使用变量相除，则需要 a*1.0/7。而在 3.0 以后的版本，整除和浮点数相除分别使用 // 和 / 符号：\nfrom __future__ import division\nprint(8//7)\nprint(8/7)\n1\n1.1428571428571428\n\nabsolute_import\nPEP 328 主要添加了多行导入和绝对/相对导入的特性，可以使用括号而不是 \\ 来进行多行导入。相对导入则可以使用 . 为标记导入相对目录中的模块，具体可以参考这篇文章：Python导入模块的几种姿势。\nfrom __future__ import absolute_import\n\nfrom tkinter import (Tk, Frame, Button, Entry, Canvas, Text,\n    LEFT, DISABLED, NORMAL, RIDGE, END)\nprint_function\n我们都知道 3.0 以后 print 变为函数而不再是声明语句，而是一个内置函数，并且可以接受除打印内容以外的参数：\nprint(*args, sep=' ', end='\\n', file=None)\nfrom __future__ import print_function\nprint(\"Hello\", \"World\", sep=',', end='!')\nHello,World!\n\ngenerator_stop\n在生成器内部使用 raise StopIteration 意味着生成器终止，但这样写会造成一些隐藏的 BUG（见 PEP 479），新的特性要求杜绝这一用法并抛出 RuntimeError，若要终止生成器，请使用 return。\nfrom __future__ import generator_stop\ndef gen(n):\n    i = 0\n    while i < n:\n        yield i\n        i += 1\n        if i % 2 == 0:\n            raise StopIteration\n            # use return\n        \ng = gen(3)\nprint(next(g))\nprint(next(g))\ntry:\n    print(next(g))\nexcept RuntimeError as err:\n    print(err)\n0\n1\ngenerator raised StopIteration\n\n彩蛋\n为了吸引更多 Java、C 等语言的用户，使他们更快适应 Python 代码缩进的语法同时又能兼容他们不可抑制地输入 {} 的冲动，__future__ 还提供了 braces 特性，使花括号可以被正确解析！\nfrom __future__ import braces\n\n欢迎关注公众号 PyHub 每日推送\n\n\n                ", "mainLikeNum": ["1 "], "mainBookmarkNum": "4"}