{"title": "离线安装rabbitMQ - Road2Man ", "index": "rhel7,python,rabbitmq", "content": "安装步骤\n整体软件环境\n|软件|版本||-|-||RHEL |7 update3||Erlong|19.3||rabbitMQ|3.6.10|\nErlong语言安装离线安装\nrabbitMQ是使用erlang这种编程语言开发的，所以安装rabbitMQ的前提是安装Erlong语言。这次全都是离线安装，以便在远离internet的生产环境部署。\n软件依赖清单\n|编译报错|解决办法|下载网址||-|-|-||crypto : No usable OpenSSL found  |yum install openssl openssl-devel|rhel7.3光盘自带，建立本地源||jinterface : No Java compiler found|        rpm -ivh  jdk-8u144-linux-x64.rpm|http://www.oracle.com/technet...|odbc : ODBC library - link check failed|        rpm -ivh unixODBC-2.3.1-11.el7.x86_64.rpm unixODBC-devel-2.3.1-11.el7.x86_64.rpm|ftp://195.220.108.108/linux/centos/7.3.1611/os/x86_64/Packages/unixODBC-2.3.1-11.el7.x86_64.rpm ftp://195.220.108.108/linux/centos/7.3.1611/os/x86_64/Packages/unixODBC-devel-2.3.1-11.el7.x86_64.rpm||ssh : No usable OpenSSL found|yum install openssl openssl-devel|rhel7.3光盘自带，建立本地源||ssl : No usable OpenSSL found|yum install openssl openssl-devel|rhel7.3光盘自带，建立本地源|\n依赖安装\n编译Erlong还需要安装ncurses，也是rhel7.3光盘自带。以及fop（生成文档用），centos7光盘有，rhel7光盘中没有。\nyum install  fop\nyum install  ncurses-devel ncurses\nyum install openssl openssl-devel\nrpm -ivh unixODBC-2.3.1-11.el7.x86_64.rpm unixODBC-devel-2.3.1-11.el7.x86_64.rpm\nrpm -ivh jdk-8u144-linux-x64.rpm\n \nwxWidge安装（待补充，非必要部件）\nErlong软件包准备\n下载网址 http://erlang.org/download/对应的版本自选，我选择的是  19.3版本即 http://erlang.org/download/ot...\nErlong编译安装\ncd /tmp\nwget http://erlang.org/download/otp_src_19.3.tar.gz\ntar -zxvf otp_src_19.3.tar.gz\ncd otp_src_19.3\n./configure -prefix=/usr/local/erlang\nmake\nmake install\ncd /usr/local/erlang\ncd bin\nln -s /usr/local/erlang/bin/erl /usr/local/bin/erl\nErlong版本检查\nerl -v\nRabbitMQ离线安装\n软件下载\n下载链接http://www.rabbitmq.com/relea...\n离线安装\nwget http://www.rabbitmq.com/releases/rabbitmq-server/v3.6.10/rabbitmq-server-generic-unix-3.6.10.tar.xz\ntar -Jxvf rabbitmq-server-generic-unix-3.6.10.tar.xz \ntar -xvf rabbitmq-server-generic-unix-3.6.10.tar \ncp -R rabbitmq_server-3.6.10/   /usr/local/rabbitmq/\nchmod -R 755 /usr/local/rabbitmq/sbin\nRabbitMQ基本操作\nrabbitMQ启动\ncd /usr/local/rabbitmq/sbin\n./rabbitmq-server\n开启Web管理插件\ncd /usr/local/rabbitmq/sbin\n./rabbitmq-plugins enable rabbitmq_management\nrabbitMQ重启\ncd /usr/local/rabbitmq/sbin\n./rabbitmqctl stop   ## 停应用\n./rabbitmq-server    ## 启动应用\n通过web管理\n访问http://localhost:15672默认用户/密码 ： guest/guest注意初始状态只能本地登录，不可通过远程web访问，给权限也不行。需要远程访问的，必须新建用户并赋权限。\n用户管理并赋权限\n添加用户 如用户名：mqadmin 密码：mqadmin\ncd /usr/local/rabbitmq/sbin\n./rabbitmqctl add_user mqadmin mqadmin\n给用户添加角色 角色有none、management、policymaker、monitoring、administrator等，administrator为超级管理员\n./rabbitmqctl set_user_tags mqadmin administrator\n给用户授权\n./rabbitmqctl set_permissions -p  / mqadmin '.*' '.*' '.*'\n在浏览器中输入：http://ip:15672  如：http://192.168.137.200:15672/即可输入新添加的用户名和密码登录\n常用端口清单\n|端口|说明||-|-||4369| epmd, a peer discovery service used by RabbitMQ nodes and CLI tools| |5672, 5671| used by AMQP 0-9-1 and 1.0 clients without and with TLS| |25672| used by Erlang distribution for inter-node and CLI tools communication and is allocated from a dynamic range (limited to a single port by default, computed as AMQP port + 20000). See networking guide for details.| |15672| HTTP API clients and rabbitmqadmin (only if the management plugin is enabled)| |61613, 61614| STOMP clients without and with TLS (only if the STOMP plugin is enabled)| |1883, 8883| (MQTT clients without and with TLS, if the MQTT plugin is enabled| |15674| STOMP-over-WebSockets clients (only if the Web STOMP plugin is enabled)| |15675| MQTT-over-WebSockets clients (only if the Web MQTT plugin is enabled)|\npython环境（anaconda）安装pika客户端\n基于anaconda环境，下载pika离线包https://anaconda.org/conda-fo...\ncd /tmp\nwget  https://anaconda.org/conda-forge/pika/0.10.0/download/linux-64/pika-0.10.0-py36_0.tar.bz2\nconda install pika-0.10.0-py36_0.tar.bz2 \nconda list | grep pika ##检查\n结论\n综上，一个基本的开源MQ环境搭建完成，最重要的是离线安装脱离了internet的捆绑。\n参考资料\nhttp://erlang.org/doc/install...https://sites.google.com/site...https://www.rabbitmq.com/netw...https://github.com/linux-on-i...https://gist.github.com/craig...http://blog.csdn.net/amuseme_...\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "2"}