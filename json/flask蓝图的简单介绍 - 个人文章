{"title": "flask蓝图的简单介绍 - 个人文章 ", "index": "flask,python", "content": "flask蓝图的简单介绍\n蓝图概念的简单介绍:Flask 用 蓝图（blueprints） 的概念来在一个应用中或跨应用制作应用组件和支持通的模式。蓝图很好地简化了大型应用工作的方式，并提供给 Flask 扩展在应用上注册操作的核心方法。一个 Blueprint 对象与 Flask 应用对象的工作方式很像，但它确实不是一个应用，而是一个描述如何构建或扩展应用的 蓝图 。\n下面是我demo结构:\n为什么要使用蓝图？\n\n把一个应用分解为一个蓝图的集合。这对大型应用是理想的。一个项目可以实例化一个应用对象，初始化几个扩展，并注册一集合的蓝图。\n以 URL 前缀和/或子域名，在应用上注册一个蓝图。 URL 前缀/子域名中的参数即成为这个蓝图下的所有视图函数的共同的视图参数（默认情况下）。\n在一个应用中用不同的 URL 规则多次注册一个蓝图。\n通过蓝图提供模板过滤器、静态文件、模板和其它功能。一个蓝图不一定要实现应用或者视图函数。\n初始化一个 Flask 扩展时，在这些情况中注册一个蓝图。 引用自官方文档\n\n\n在我看来，有了蓝图可以将一个应用注册成很多模块，方便管理，和添加扩展。\n我的第一个蓝图\n导入相应的模块，Blueprint中的三个参数，第一个可以自己随意命令，第二个一般都是__name__,他指定了当前的flask应用，也就是当前我的app文件夹(也是一个包)，第三个参数指定你存放，模板文件的位置，这个主要看你你应用的目录结构，我喜欢只存放一个templates目录在app文件夹下，然后使用相对路径。\n    from flask import Blueprint, render_template, abort, redirect, url_for\n    from jinja2 import TemplateNotFound\n\n    blog = Blueprint('blog', __name__, template_folder='../templates')\n\n    @blog.route('/index')\n    def index():\n        try:\n            return render_template(\"blog.html\")\n            except TemplateNotFound:\n            abort(404)\n\n    @blog.route('/welcome')\n    def welcome():\n            return \"welcome to blog\"\n        \n\n当时这样你并不能访问网页，因为你还没有注册蓝图，蓝图不是即插即用的\n注册蓝图\n在注册前一定要导入相应的蓝图，如代码中的admin和blog。\n    from flask import Flask\n    from view.addmin import admin\n    from view.blog import blog\n\n    app = Flask(__name__)\n    app.register_blueprint(blog, url_prefix='/blog')\n    app.register_blueprint(admin, url_prefix='/admin')\n\n    if __name__ == \"__main__\":\n        app.run(debug=True)\n        # from werkzeug.serving import run_simple\n        # run_simple('localhost', 5000, app)\n\n访问相应的页面时，一定要将url_prefix中的前缀加上，比如要访问blog.html中的内容，要写成http://localhost/blog/index 的形式。\n构造URL\n要想从一个页面跳转到另一个页面，通常是redirect和url_for配合使用，由于我们加入了蓝图，在访问时我们可以更加轻松\n    url_for('blog.index')\n\n具体代码如下:\n    from flask import Blueprint, render_template, abort, redirect, url_for\n    from jinja2 import TemplateNotFoun\n\n    blog = Blueprint('blog', __name__, template_folder='../templates')\n\n    @blog.route('/index')\n    def index():\n        try:\n            return redirect(url_for('blog.welcome'))\n        except TemplateNotFound:\n            abort(404)\n\n    @blog.route('/welcome')\n    def welcome():\n        return \"welcome to blog\"\n        \n\n当你访问/blog/index的页面时，会自动帮你跳转到/blog/welcome的页面中。\n以上大部分内容都借鉴自官方文档，如果有不明白的地方，可以自行查阅。\n\n                ", "mainLikeNum": ["1 "], "mainBookmarkNum": "0"}