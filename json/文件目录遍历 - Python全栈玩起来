{"title": "文件目录遍历 - Python全栈玩起来 ", "index": "python", "content": "递归遍历目录和文件\nimport os\n\npath = r'F:\\PycharmProjects\\basic gram\\作业和习题\\test'\n\ndef getAllFileAndDir(path):\n    # 获取当前目录下所有文件及文件目录\n    fileList = os.listdir(path)\n    # print(fileList)\n\n    # 遍历fileList列表\n    for fileName in fileList:\n        # isdir isfile\n        # print(fileName)\n        # 拼接绝对路径\n        absFile = os.path.join(path,fileName)\n        if os.path.isdir(absFile):\n            print(absFile+'---目录')\n            getAllFileAndDir(absFile)\n        else:\n            print(absFile+'---文件')    \ngetAllFileAndDir(path)\n\n\n栈 深度遍历\nimport collections\n\ndef getAllFileAndDir(sourcePath):\n\n    stack = collections.deque()\n    stack.append(sourcePath)\n    while len(stack) != 0:\n        path = stack.pop()\n        fileList = os.listdir(path)\n        for fileName in fileList:\n            absFile = os.path.join(path, fileName)\n            if os.path.isdir(absFile):\n                print(absFile+'---目录')\n                stack.append(absFile)\n            else:\n                print(absFile+'---文件')\n\ngetAllFileAndDir(path)\n\n队列 广度遍历\ndef getAllFileAndDir(sourcePath):\n\n    queue = collections.deque()\n    queue.append(sourcePath)\n\n    while len(queue) !=0:\n        path = queue.popleft()\n        fileList = os.listdir(path)\n        for fileName in fileList:\n            absFile = os.path.join(path, fileName)\n            if os.path.isdir(absFile):\n                print(absFile+'---目录')\n                queue.append(absFile)\n            else:\n                print(absFile+'---文件')\n\n\ngetAllFileAndDir(path)\n\n\n复制目录和文件\nimport os\n# 复制目录\ndef copyDir(sourDir,targetDir):\n    if not os.path.exists(sourDir):\n        print(\"如果源目录不存在,直接停止\")\n        return\n\n    if not os.path.exists(targetDir):\n        os.makedirs(targetDir)\n\n    listName = os.listdir(sourDir)\n    for dirNameAndFileName in listName:\n        sourAbsPath = os.path.join(sourDir,dirNameAndFileName)\n        targetAbsPath = os.path.join(targetDir,dirNameAndFileName)\n        if os.path.isdir(sourAbsPath):\n            copyDir(sourAbsPath,targetAbsPath)\n        if os.path.isfile(sourAbsPath):\n            #   如果目标文件不存在,   或者   如果该文件已经存在但是文件大小不一样\n            if (not os.path.exists(targetAbsPath)) or (os.path.exists(targetAbsPath) and (os.path.getsize(sourAbsPath) != os.path.getsize(targetAbsPath))):\n                rf = open(sourAbsPath,\"rb\")\n                wf = open(targetAbsPath,\"wb\")\n                while True:\n                    content = rf.read(1024*1024)\n                    if len(content) == 0:\n                        break\n                    wf.write(content)\n                    wf.flush()\n                wf.close()\n                rf.close()\n\nsPath = r'F:\\PycharmProjects\\basic gram\\作业和习题\\test'\ntPath = r'F:\\PycharmProjects\\basic gram\\作业和习题\\testNew'\ncopyDir(sPath, tPath)\n\n文件复制实例\n1.一个函数接受文件夹的名称作为输入参数,请将该文件夹中的所有文件复制到 文件夹名-副本  中去,请补充缺失的代码. (20分)def  copyFile(sPath)2.题1复制过程中,每隔一秒打印一次复制进度(即当前已复制个数/总文件个数)(15分)\nimport os\nimport collections\nimport time\nimport sys\ndef getFileNum(sPath):\n    num = 0\n    stack = collections.deque()\n    stack.append(sPath)\n    while len(stack) != 0:\n        path = stack.pop()\n        fileList = os.listdir(path)\n        for fileName in fileList:\n            absFile = os.path.join(path, fileName)\n            if os.path.isdir(absFile):\n                stack.append(absFile)\n            else:\n                num += 1\n    return num\n\ndef copyFile(sPath):\n    tPath = r'F:\\PycharmProjects\\basic gram\\作业和习题\\Anaconda3-副本'\n    stack1 = collections.deque()\n    stack1.append(sPath)\n    stack2 = collections.deque()\n    stack2.append(tPath)\n    timepoint = 1\n    filenum = 0\n    while len(stack1) != 0:\n        sPath = stack1.pop()\n        tPath = stack2.pop()\n        if not os.path.exists(tPath):\n            os.makedirs(tPath)\n        listName = os.listdir(sPath)\n        for filename in listName:\n            absfile = os.path.join(sPath, filename)\n            tabsfile = os.path.join(tPath, filename)\n            if os.path.isdir(absfile):\n                stack1.append(absfile)\n                stack2.append(tabsfile)\n            else:\n                rf = open(absfile, 'rb')\n                wf = open(tabsfile, 'wb')\n                while True:\n                    content = rf.read(1024*1024)\n                    if len(content) == 0:\n                        break\n                    wf.write(content)\n                    # 刷新缓冲区\n                    wf.flush()\n                    if time.clock()//1 == timepoint:\n                         sys.stdout.write('\\r进度:%d/%d'%(filenum,num))\n                         timepoint += 1\n                wf.close()\n                rf.close()\n                filenum += 1\n    sys.stdout.write('\\r进度:%d/%d' % (num, num))\n\n\nsPath = r'F:\\PycharmProjects\\basic gram\\作业和习题\\Anaconda3'\n\nnum = getFileNum(sPath)\n# print(num)\nstart_time = time.clock()\ncopyFile(sPath)\n\n                ", "mainLikeNum": ["2 "], "mainBookmarkNum": "0"}