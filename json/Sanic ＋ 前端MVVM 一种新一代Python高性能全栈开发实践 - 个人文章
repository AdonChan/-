{"title": "Sanic ＋ 前端MVVM 一种新一代Python高性能全栈开发实践 - 个人文章 ", "index": "javascript,node.js,python", "content": "SanicCRUD-vue\nSanic ＋ 前端MVVM 一种新一代Python高性能全栈开发实践\n背景\n本项目将使用Sanic + Vue2 ＋ Webpack2 配合最简单CRUD的逻辑来展示一个基于Python的全新一代高性能全栈开发实践的Demo\n为什么是Sanic\n对于为何不是Flask、Django等著名框架，或许可能很多人会产生疑惑，Sanic本身和Flask非常的相似，而它的出现，不仅是大大改进过去WSGI时代性能低下通病，外加配合uvloop作为核心引擎，使Sanic在很多情况下单机并发甚至不亚于Golang，而且它更意味着Python在Web领域走进了全新的未来。\n那么uvloop又是什么？简单的说，Python3.4之后作为最高效简单的协程并发库莫过于asyncio，而asyncio的出现仅仅只是为了提供更方便的异步编程及互操作的接口，其底层用的还是比较传统的event loop，而uvloop是在重新定制asyncio基础上引入了libuv，其性能不仅超过了以往如gevent、tornado等Python异步框架，也同样以超过2倍多的性能领先于node.js。\n\n是不是和Flask非常相似？\n为什么是MVVM\n那么在我继续之前，我也想和大家回顾一下Web开发的发展简史：\n\n第一阶段: 网页三剑客，生猛的通过原生javascript直接操作Dom树;\n第二阶段: JQuery诞生，配合前端MVC为代表的Backbone.js, 让我们可以优雅而简单的操作Dom树;\n第三阶段: 后端架构升级为MVC，前后端分工更清晰，前端工程化、ECMAScript规范开始崭露头角;\n第四阶段: 后端架构进入了微服务时代，前端架构不仅升级为MVVM，ES6更是成为目前事实上的标准;\n\n在这里，我不想过于神化MVVM有多么的先进，JQuery为代表的MVC有多么的落后，但确实MVVM有着很多先进的特性:\n\n低开销\n易维护\n可重用\n\n为什么选择Vue.js\nVue.js是MVVM设计模式中目前最火热的一个前端框架之一，除了性能表现优异之外，与类似React相比，更轻量级、更容易上手。\n通过Vue中的“单文件组件”特性，更灵活的定义组件，不仅使代码结构更清晰，而且能与任何其他组件进行随意组合，更具复用性。\nWebpack是什么\nWebpack提供了一整套前端工程自动化的解决方案\npeewee是什么\n有了高性能的Sanic作为基石，或许还不够，最能成为后端性能瓶颈的更多的是在于数据库，因此挑选一个合适的ORM变的极为重要，目前python比较主流的ORM是Django-ORM、SQLAlchemy等，但为了配合Sanic这种性能卓越的框架，我更倾向于peewee，更轻量级、方便二次封装，更友好的支持异步。\nDemo\n一个简单的“上海人员信息查询系统”作为例子\n项目结构\n |\n |—— tests                            // 单元测试\n |\n |—— sanic_crudvue                    // 主项目\n |      |\n |      |—— config                    // 后端基本配置\n |      |\n |      |—— crud                      // 后端APP \n |      |\n |      |—— frontend          \n |      |       |__ build             // webpack配置文件\n |      |       |__ dist              // 编译后的目标目录\n |      |       |__ src               // 前端源代码\n |      |       |    |   \n |      |       |    |__ components   // 本项目各种各样的核心组件 \n |      |       |    |\n |      |       |    |__ App.vue      // 主页\n |      |       |    |\n |      |       |    |__ eventBus.js  // 中央消息处理器，用于‘非父子组件’通信，下一个版本将会使用vuex\n |      |       |    |\n |      |       |    |__ main.js      // webpack入口\n\n具备的功能(v0.1)\n\n\nSanic (后端)\n\n如何开启一个基于Sanic的工程项目，并通过蓝本来组织基本的MVC模式\n通过在Sanic中建立基于RestFul-API并实现一个基本的CRUD逻辑\n处理CORS(跨域资源共享)以及解决在Sanic中“pre-flight”请求问题\n简单的在peewee上进行二次封装ORM\n演示在Sanic中进行单元测试\n增加api接口文档\n通过peewee和Sanic来实现RestFul-API的分页\n\n\n\nVueJS & webpack (前端)\n\n遵循ECMAScript 6 规范\n如何在vue中使用‘单文件组件’进行开发编码\n演示‘非父子组件’如何进行简单的通信以及‘父子组件’之间如何传递数据\n如何和后端进行数据交互\n如何在vue中优雅的引入第三方JS库\n格式化时间\n分页实现\n\n可复用组件\n\nDbHeader.vue\nDbFooter.vue  (sticky footer)\nDbFilterinput.vue\nDbModal.vue\nDbSidebar.vue\nDbTable.vue\n\n\n\n得益于类似vue、react等MVVM模式，本项目的任何组件，只要您觉得合适，都可以复用在您的任何项目中，避免重复造轮子。\n如何通过webpack2配置来自动化构建前端环境(包括如何配置vue2、处理静态文件,构建不同环境等等)\n\n\n本项目主要技术栈\n\npython 3\nsqlite (not recommend, only convenience example)\nvueJS 2.x\nwebpack 2.x\nelement ui\naxios\n\n准备工作\n\n请必须安装 Python 3.5， 3.6 或以后更高的版本\n安装 nodejs / npm\n\n克隆仓库\ngit clone https://github.com/boylegu/Sa...\ncd SanicCRUD-vue\n\n\n安装\n\n\n构建后端环境\ncd SanicCRUD-vue\nmake install\n\n\n构建前端环境\ncd sanic_crudvue/frontend\nnpm install\n\n\n使用说明\n\n\n运行后端服务\nmake dev\n\n\n运行前端服务\ncd sanic_crudvue/frontend\nnpm run dev\n\n\n运行单元测试\ncd SanicCRUD-vue\nmake test\n\n\n你也可以在生产环境中运行cd sanic_crudvue/frontend;npm run build进行编译并配合Nginx\n未来计划\n本项目可以作为工作参考、学习或者教学演示，之后将陆续以版本的形式，即每个版本都会新增不同的功能演示项，不定期进行发布更新，有以下功能已经在计划之中：\n\n用户认证\n引入更高级的vuex组件通信机制\n演示vue-route的使用\n加入docker部署环境\n新增针对yarn的支持... ...\n\n项目地址：https://github.com/boylegu/Sa...\n\nMy Final Thoughts\n\n                     ▄▄▄▄▄\n            ▀▀▀██████▄▄▄       _______________\n          ▄▄▄▄▄  █████████▄  /                 \\\n         ▀▀▀▀█████▌ ▀▐▄ ▀▐█ | Gotta go fast!   |\n       ▀▀█████▄▄ ▀██████▄██ | _________________/\n       ▀▄▄▄▄▄  ▀▀█▄▀█════█▀ |/\n            ▀▀▀▄  ▀▀███ ▀       ▄▄\n         ▄███▀▀██▄████████▄ ▄▀▀▀▀▀▀█▌   ______________________________ \n       ██▀▄▄▄██▀▄███▀ ▀▀████      ▄██  █                              \\\\ \n    ▄▀▀▀▄██▄▀▀▌████▒▒▒▒▒▒███     ▌▄▄▀▀▀▀█_____________________________ //\n    ▌    ▐▀████▐███▒▒▒▒▒▐██▌\n    ▀▄▄▄▄▀   ▀▀████▒▒▒▒▄██▀\n              ▀▀█████████▀\n            ▄▄██▀██████▀█\n          ▄██▀     ▀▀▀  █\n         ▄█             ▐▌\n     ▄▄▄▄█▌              ▀█▄▄▄▄▀▀▄\n    ▌     ▐                ▀▀▄▄▄▀\n     ▀▀▄▄▀     ██   \n \\  ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀ \n \\- ▌          SanicCRUD-vue              ▀ ▀      \n  - ▌                            (o)          ▀ \n /- ▌            Go Go Go !               ▀ ▀           \n /  ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀ ▀       \n               ██\n\n\n                ", "mainLikeNum": ["10 "], "mainBookmarkNum": "22"}