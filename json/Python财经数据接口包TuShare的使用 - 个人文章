{"title": "Python财经数据接口包TuShare的使用 - 个人文章 ", "index": "python", "content": "安装TuShare\n方式1：pip install tushare\n方式2：访问https://pypi.python.org/pypi/tushare/下载安装\n方式3：将源代码下载到本地python setup.py install\n安装lxml\n详细信息看 百度：https://jingyan.baidu.com/art...更多可以看：http://tushare.org/为防止百度404把百度的说明copy了过来\nimport tushare as ts\ndf = ts.get_hist_data('600848')\nts.get_hist_data('600848'，ktype='W') #获取周k线数据\nts.get_hist_data('600848'，ktype='M') #获取月k线数据\nts.get_hist_data('600848'，ktype='5') #获取5分钟k线数据\nts.get_hist_data('600848'，ktype='15') #获取15分钟k线数据\nts.get_hist_data('600848'，ktype='30') #获取30分钟k线数据\nts.get_hist_data('600848'，ktype='60') #获取60分钟k线数据\nts.get_hist_data('sh'）#获取上证指数k线数据，其它参数与个股一致，下同\nts.get_hist_data('sz'）#获取深圳成指k线数据 ts.get_hist_data('hs300'）#获取沪深300指数k线数据\nts.get_hist_data('sz50'）#获取上证50指数k线数据\nts.get_hist_data('zxb'）#获取中小板指数k线数据\nts.get_hist_data('cyb'）#获取创业板指数k线数据\nPython财经数据接口包TuShare的使用\n获取历史分笔数据\ndf = ts.get_tick_data('000756','2015-03-27')\ndf.head(10)\nPython财经数据接口包TuShare的使用获取实时分笔数据\ndf = ts.get_realtime_quotes('000581') \nprint df[['code','name','price','bid','ask','volume','amount','time']]\n返回值说明：\n0：name，股票名字\n1：open，今日开盘价\n2：pre_close，昨日收盘价\n3：price，当前价格\n4：high，今日最高价\n5：low，今日最低价\n6：bid，竞买价，即“买一”报价\n7：ask，竞卖价，即“卖一”报价\n8：volumn，成交量 maybe you need do volumn/100\n9：amount，成交金额（元 CNY）\n10：b1_v，委买一（笔数 bid volume）\n11：b1_p，委买一（价格 bid price）\n12：b2_v，“买二”\n13：b2_p，“买二”\n14：b3_v，“买三”\n15：b3_p，“买三”\n16：b4_v，“买四”\n17：b4_p，“买四”\n18：b5_v，“买五”\n19：b5_p，“买五”\n20：a1_v，委卖一（笔数 ask volume）\n21：a1_p，委卖一（价格 ask price）\n...\n30：date，日期\n31：time，时间\nEND获取其他数据股票分数数据\n行业分类\nts.get_industry_classified()\n概念分类，所有股票炒作概念，比如苹果、特斯拉等\nts.get_concept_classified()\n地域分类\nts.get_area_classified()\n中小板分类\nts.get_sme_classified()\n创业板分类\nts.get_gem_classified()\n风险警示板分类\nts.get_st_classified()\n沪深300成份股及权重\nts.get_hs300s()\n上证50成份股\nts.get_sz50s()\n基本面数据\n沪深股票列表（基础数据，沪深所有股票情况）\nts.get_stock_basics()\n业绩报告（主表）\n#获取2014年第3季度的业绩报表数据\nts.get_report_data(2014,3)\n盈利能力数据\n#获取2014年第3季度的盈利能力数据\nts.get_profit_data(2014,3)\n营运能力数据\n#获取2014年第3季度的营运能力数据\nts.get_operation_data(2014,3)\n成长能力数据\nts.get_growth_data(2014,3)\n偿债能力数据\nts.get_debtpaying_data(2014,3)\n现金流量数据\nts.get_cashflow_data(2014,3)\n宏观经济数据\n目前宏观经济数据主要包括以下方面：\n金融信息数据\n国民经济数据\n价格指数数据\n景气指数数据\n对外经济贸易数据\nEND数据存储保存为csv格式\nimport tushare as ts\ndf = ts.get_hist_data('000875')#直接保存\ndf.to_csv('c:/day/000875.csv')#选择保存\ndf.to_csv('c:/day/000875.csv',columns=['open','high','low','close'])\n保存为Excel格式\ndf = ts.get_hist_data('000875')#直接保存\ndf.to_excel('c:/day/000875.xlsx')#设定数据位置（从第3行，第6列开始插入数据）\ndf.to_excel('c:/day/000875.xlsx', startrow=2,startcol=5)\n保存为HDF5文件格式\ndf = ts.get_hist_data('000875')\ndf.to_hdf('c:/day/hdf.h5','000875')\n保存为JSON格式\ndf = ts.get_hist_data('000875')\ndf.to_json('c:/day/000875.json',orient='records')\nMySQL数据库\npandas提供了将数据便捷存入关系型数据库的方法，在新版的pandas中，主要是已sqlalchemy方式与数据建立连接，支持MySQL、Postgresql、Oracle、MS SQLServer、SQLite等主流数据库。本例以MySQL数据库为代表，展示将获取到的股票数据存入数据库的方法,其他类型数据库请参考sqlalchemy官网文档的create_engine部分。\nfrom sqlalchemy import create_engine\nimport tushare as ts\ndf = ts.get_tick_data('600848',date='2014-12-22')\nengine = create_engine('mysql://user:passwd@127.0.0.1/db_name?charset=utf8')\n#存入数据库\ndf.to_sql('tick_data',engine)\n#追加数据到现有表\n#df.to_sql('tick_data',engine,if_exists='append')\nPython财经数据接口包TuShare的使用\n存入MongoDB\nimport pymongo\nimport json\nconn = pymongo.Connection('127.0.0.1', port=27017)\ndf = ts.get_tick_data('600848',date='2014-12-22')\nconn.db.tickdata.insert(json.loads(df.to_json(orient='records')))\nPython财经数据接口包TuShare的使用\n\n                ", "mainLikeNum": ["2 "], "mainBookmarkNum": "4"}