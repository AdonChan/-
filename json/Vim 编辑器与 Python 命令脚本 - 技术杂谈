{"title": "Vim 编辑器与 Python 命令脚本 - 技术杂谈 ", "index": "vim,python", "content": "Vim 文本编辑器\nVim 编辑器的三种模式——命令模式、末行模式和编辑模式\n\n命令模式：控制光标移动，可对文本进行复制、粘贴、删除和查找等工作。\n输入模式：正常的文本录入。\n末行模式：保存或退出文档，以及设置编辑环境。\n\n在每次运行 Vim 编辑器时，默认进入命令模式，此时需要先切换（i）到输入模式后再进行文档编写工作，而每次在编写完文档后需要先返回（ESC）命令模式，然后再进入（:）末行模式，执行文档的保存（wq）或退出（q!）操作。\nVim 中常用的命令\n\n\n命令\n作用\n\n\n\ndd\n删除（剪切）光标所在整行\n\n\n5dd\n删除（剪切）从光标处开始的5行\n\n\nyy\n复制光标所在整行\n\n\n5yy\n复制从光标处开始的5行\n\n\nn\n显示搜索命令定位到的下一个字符串\n\n\nN\n显示搜索命令定位到的上一个字符串\n\n\nu\n撤销上一步的操作\n\n\np\n将之前删除（dd）或复制（yy）过的数据粘贴到光标后面\n\n\n\n末行模式中可用的命令\n\n\n命令\n作用\n\n\n\n:w\n保存\n\n\n:q\n退出\n\n\n:q!\n强制退出（放弃对文档的修改内容）\n\n\n:wq!\n强制保存退出\n\n\n:set nu\n显示行号\n\n\n:set nonu\n不显示行号\n\n\n:命令\n执行该命令\n\n\n:整数\n跳转到该行\n\n\n:s/one/two\n将当前光标所在行的第一个one替换成two\n\n\n:s/one/two/g\n将当前光标所在行的所有one替换成two\n\n\n:%s/one/two/g\n将全文中的所有one替换成two\n\n\n?字符串\n在文本中从下至上搜索该字符串\n\n\n/字符串\n在文本中从上至下搜索该字符串\n\n\n\nPython 命令脚本\nshell 的功能 python 均可实现，而且代码量更少、结构更优、可阅读性更好，而 python 可实现的功能 shell 却不一定能。使用 python 作为 shell 脚本的替代，通常有很多优势：\n\npython 在主流的linux发行版本中都被默认安装。\npython 非常容易阅读，语法容易理解。\npython 是一个解释性语言，这意味着，不需要编译。\npython 是一个功能齐全的编程语言。\npython 可以访问优秀的标准库，还有大量的实现多种功能的第三方库。\npython 可以是命令链中的一部分。\n\n脚本声明\n#!/usr/bin/env python3\n在脚本中，第一行以（#!）开头的代码，在计算机行业中叫做\"shebang\"，其作用是\"指定由哪个解释器来执行脚本\"。\n#!/usr/bin/env/ python3表示\"从PATH环境变量\"中查找 python3 解释器的位置，再调用该路径下的解释器来执行脚本。\n接收命令行参数\n在 Python 中，sys 模块是一个非常常用且十分重要的模块，通过模块中的 sys.argv 就可以访问到所有的命令行参数，它的返回值是包含所有命令行参数的列表（list）。\nlen(sys.argv)   # 参数个数\nsys.argv[0]     # 脚本名称\nsys.argv[1]     # 参数1\nsys.argv[2]     # 参数2\n调用Shell命令\n通过os模块system方法会创建子进程运行外部程序，方法只返回外部程序的运行结果。\nimport os\nprint os.system(\"ls -al\")\n通过os模块popen方不仅仅返回结果，还可以调用read()方法读取输出内容。\nimport os\noutput = os.popen('ls -al').read()\nprint(output.split('\\n'))\n不规范的例子\n[root@localhost ~]# vim showfile.py\n\n#!/bin/env python3\nimport os,sys\nif __name__ == '__main__':\n    directory = sys.argv[1]\n    output = os.popen(\"ls -lh \" + directory).read()\n    filelist = output.split('\\n')\n    for fileinfo in filelist:\n        print(fileinfo)\n[root@localhost ~]# chmod +x showfile.py \n[root@localhost ~]# ./showfile.py /usr/local/share/\ntotal 0\ndrwxr-xr-x.  2 root root   6 Apr 11 00:59 applications\ndrwxr-xr-x.  2 root root   6 Apr 11 00:59 info\ndrwxr-xr-x. 21 root root 243 Aug 15 06:42 man\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}