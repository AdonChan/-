{"title": "PhantomJS 安装 - AZmake ", "index": "javascript,node.js,html5,python", "content": "PhantomJS 安装\n\nMac OS X && Windows\n1、PhantomJS下载地址\n按照系统下载对应的版本，\n\nmacOS 下载： phantomjs-2.1.1-macosx.zip\n\nWindows下载：phantomjs-2.1.1-windows.zip\n\n并解压到用户目录下面，\n\nmacOS 解压路径：\n\n/User/xxx/phantomjs-2.1.1-macosx\n\nWindows 解压路径：\n\nD:\\phantomjs-2.1.1-windows ，并重命名为 D:\\phantomjs\n\n2、PhantomJS不需要安装，解压即可使用\nWindows PATH变量\n在“系统变量”选项区域中查看PATH变量，如果不存在，则新建变量 PATH，\n\n否则选中该变量，单击“编辑”按钮，在“变量值”文本框的起始位置添加 \n\nD:\\phantomjs\\bin，开始-运行-输入cmd，输入 phantomjs --version， \n \n如果可以看到版本号，则安装成功。\nmacOS PATH变量\n\n如果用户目录下存在 .bash_profile ，比如我的/User/xxx/.bash_profile，则添加一行 \n\nexport PATH=\"$PATH:/Users/xxx/phantomjs-2.1.1-macosx/bin\"\n\n否则新建 .bash_profile,然后在添加上文\n\n在terminal中输入\n\nphantomjs --version\n\n如果可以看到版本号，则安装成功。\n\n3、使用npm安装的时候如何环境变量中没有phantomjs，就会从github下载安装phantomjs，但是你懂的?，大多数情况下会超时，即使把npm的镜像改成淘宝的还是一样的结果\nPhantomJS not found on PATH\nDownloading https://github.com/Medium/phantomjs/releases/download/v2.1.1/phantomjs-2.1.1-macosx.zip\nSaving to /var/folders/hn/55rkvgy97797tgx6cld83zl80000gn/T/phantomjs/phantomjs-2.1.1-macosx.zip\n然后聪明的你想到可以使用 npm install -g phantomjs , 可是现实告诉你\nnpm WARN deprecated phantomjs@2.1.7: Package renamed to phantomjs-prebuilt. Please update 'phantomjs' package references to 'phantomjs-prebuilt'\nnpm WARN deprecated tough-cookie@2.2.2: ReDoS vulnerability parsing Set-Cookie https://nodesecurity.io/advisories/130\nnpm WARN deprecated node-uuid@1.4.8: Use uuid module instead\n/usr/local/bin/phantomjs -> /usr/local/lib/node_modules/phantomjs/bin/phantomjs\n\n> phantomjs@2.1.7 install /usr/local/lib/node_modules/phantomjs\n> node install.js\n\nConsidering PhantomJS found at /usr/local/bin/phantomjs\nLooks like an `npm install -g`\nError checking path, continuing { Error: Cannot find module '/usr/local/lib/node_modules/phantomjs/lib/location'\n    at Function.Module._resolveFilename (module.js:469:15)\n    at Function.Module._load (module.js:417:25)\n    at Module.require (module.js:497:17)\n    at require (internal/module.js:20:19)\n    at getLocationInLibModuleIfMatching (/usr/local/lib/node_modules/phantomjs/install.js:332:19)\n    at Promise._successFn (/usr/local/lib/node_modules/phantomjs/install.js:389:28)\n    at nextTickCallback (/usr/local/lib/node_modules/phantomjs/node_modules/kew/kew.js:47:28)\n    at _combinedTickCallback (internal/process/next_tick.js:67:7)\n    at process._tickCallback (internal/process/next_tick.js:98:9) code: 'MODULE_NOT_FOUND' }\nDownloading https://github.com/Medium/phantomjs/releases/download/v2.1.1//phantomjs-2.1.1-macosx.zip\nSaving to /usr/local/lib/node_modules/phantomjs/phantomjs/phantomjs-2.1.1-macosx.zip\nReceiving...\n\n又回到了原点，是不是npm的问题？我用cnpm试一下看看\n然后聪明的你想到可以使用 cnpm install -g phantomjs，现实是这样\n\nDownloading phantomjs to /usr/local/lib/node_modules/phantomjs_tmp\nCopying /usr/local/lib/node_modules/phantomjs_tmp/.2.1.7@phantomjs to /usr/local/lib/node_modules/phantomjs\nInstalling phantomjs's dependencies to /usr/local/lib/node_modules/phantomjs/node_modules\n[1/8] progress@~1.1.8 installed at node_modules/.1.1.8@progress\n...\n[8/8] request@~2.67.0 installed at node_modules/.2.67.0@request\nexecute post install 1 scripts...\n[1/1] scripts.install phantomjs@2.1.7+deprecated run \"node install.js\"\nPhantomJS not found on PATH\nPhantom installation failed TypeError: Path must be a string. Received undefined\n    at assertPath (path.js:7:11)\n    at Object.join (path.js:1211:7)\nInstall fail! Error: post install error, please remove node_modules before retry!\nRun \"sh -c node install.js\" error, exit code 1\nError: post install error, please remove node_modules before retry!\nRun \"sh -c node install.js\" error, exit code 1\n    at ChildProcess.proc.on.code (/usr/local/lib/node_modules/cnpm/\n    at Process.ChildProcess._handle.onexit (internal/child_process.js:226:5)\nnpminstall version: 2.26.2\nnpminstall args: /usr/local/bin/node /usr/local/lib/node_modules/cnpm/node_modules/npminstall/bin/install.js --china --userconfig=/Users/azmake/.cnpmrc --disturl=https://npm.taobao.org/mirrors/node --registry=https://registry.npm.taobao.org -g phantomjs\n看到提示\nInstall fail! Error: post install error, please remove node_modules before retry!\n什么鬼？不陪你玩了\nsudo npm uninstall -g phantomjs\n\nsudo cnpm uninstall -g phantomjs\n\nsudo rm -rf /usr/local/lib/node_modules/phantomjs\n然后你又想到可以使用HomeBrew安装\nbrew install phantomjs\nok,安装完成，打开terminal，输入 phantomjs --version，可以看到版本号，一起正常，可以愉快的玩耍了，然后你又愉快的开始 npm install 了，然后你又发现 使用phantomjs的项目里面 could not verify phantomjs,然后\nDownloading https://github.com/Medium/phantomjs/releases/download/v2.1.1//phantomjs-2.1.1-macosx.zip\nSaving to /usr/local/lib/node_modules/phantomjs/phantomjs/phantomjs-2.1.1-macosx.zip\nReceiving...\n总结\n1、可以使用cnpm install 安装使用phantomjs的项目的node_modules，cnpm 会 使用phantomjs-prebuilt代替phantomjs，并且不中途翻车\n2、下载安装phantomjs，并配置环境变量，这样不管是cnpm install还是npm install都可以使用phantomjs，而且在pycharm里面也不会报找不到phantomjs的错误\n\n                ", "mainLikeNum": ["4 "], "mainBookmarkNum": "14"}