{"title": "python中paramiko模块的使用 - python技术的魅力 ", "index": "paramiko,python", "content": "paramiko\nparamiko是一个用于做远程控制的模块，使用该模块可以对远程服务器进行命令或文件操作，值得一说的是，fabric和ansible内部的远程管理就是使用的paramiko来现实。\n1、下载安装\npycrypto，由于 paramiko 模块内部依赖pycrypto，所以先下载安装pycrypto\nyum -y install python-devel\npip3 install pycrypto\npip3 install paramiko\n2、模块使用\n执行命令 - 用户名+密码\nimport paramiko\n\nssh = paramiko.SSHClient()\nssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nssh.connect('172.16.0.10', 22, 'root', '123456')\nstdin, stdout, stderr = ssh.exec_command('df -hT')\nprint(stdout.read().decode('utf-8'))    # 以utf-8编码对结果进行解码\nssh.close()\n上传或下载文件 - 用户名+密码\n# 上传文件\nimport os\nimport sys\nimport paramiko\n\nt = paramiko.Transport(('172.16.0.19', 22))\nt.connect(username='root', password='123456')\nsftp = paramiko.SFTPClient.from_transport(t)\nsftp.put('log.log', '/tmp/log.log')\nt.close()\n\n# 下载文件\nimport os,sys\nimport paramiko\n\nt = paramiko.Transport(('172.16.0.19',22))\nt.connect(username='root', password='123456')\nsftp = paramiko.SFTPClient.from_transport(t)\nsftp.get('/tmp/log.log', 'log2.log')\nt.close()\n执行命令 - 密匙\nimport paramiko\n\nprivate_key_path = '/root/.ssh/id_rsa'\nkey = paramiko.RSAKey.from_private_key_file(private_key_path)\n\nssh = paramiko.SSHClient()\nssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nssh.connect('172.16.0.19', 22, 'root', key)\n\nstdin, stdout, stderr = ssh.exec_command('df -hT')\nprint(stdout.read())\nssh.close()\n上传或下载文件 - 密匙\n# 上传文件\nimport paramiko\n\npravie_key_path = '/root/.ssh/id_rsa'\nkey = paramiko.RSAKey.from_private_key_file(pravie_key_path)\n\nt = paramiko.Transport(('172.16.0.19', 22))\nt.connect(username='root', pkey=key)\n\nsftp = paramiko.SFTPClient.from_transport(t)\nsftp.put('log.log','/tmp/log.log')\n\nt.close()\n\n# 下载文件\nimport paramiko\n\npravie_key_path = '/root/.ssh/id_rsa'\nkey = paramiko.RSAKey.from_private_key_file(pravie_key_path)\n\nt = paramiko.Transport(('172.16.0.19', 22))\nt.connect(username='root', pkey=key)\n\nsftp = paramiko.SFTPClient.from_transport(t)\nsftp.get('/tmp/log.log', 'log3.log')\n\nt.close()\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}