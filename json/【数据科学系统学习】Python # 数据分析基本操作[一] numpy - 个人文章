{"title": "【数据科学系统学习】Python # 数据分析基本操作[一] numpy - 个人文章 ", "index": "numpy,python,数据分析", "content": "本篇内容为整理《利用Python进行数据分析》，博主使用代码为 Python3，部分内容和书本有出入。\n\n利用 Python 进行科学计算的实用指南。本书重点介绍了用于高效解决各种数据分析问题的 Python 语言和库，没有阐述如何利用 Python 实现具体的分析方法。\n重要的Python库\nNumPyNumPy (Numerical Python)是 Python 科学计算的基础包。\n\npandaspandas 提供了使我们能够快速便捷地处理结构化数据的大量数据结构和函数。\n结构化数据 (structured data)，例如：\n\n    · 多维数据（矩阵）\n    · 表格行数据，其中各列可能是不同的类型（字符串、数值、日期等）。\n    · 通过关键列相互联系的多个表（关键列：对于 SQL 用户而言，即主键和外键）。\n    · 间隔平均或不平均的时间序列。\n\n\nmatplotlibmatplotlib 是最流行的用于绘制数据图表的 Python 库。\n\nSciPySciPy 是一组专门解决科学计算中各种标准问题域的包的集合。\nNumpy基础：数组和矢量计算\nNUmPy (Numerical Python)——高性能科学计算和数据分析的基础包。\n\nNumPy 的 ndarray：一种多维数组对象\n你可以用这种数组对整块数据执行一些数学运算，其语法跟标量元素之间的运算一样。创建并操作多维数组：\n\n\nndarray对象中所有元素必须是相同类型的，每个数组都有一个shape和dtype。\n\nshape ：表示各维度大小的元组\ndtype ：说明数组数据类型的对象\n\n\n\n创建 ndarray\n创建数组最简单的办法就是使用 array 函数，它接受一切序列型对象（包括其它数组），然后产生一个新的NumPy数组（含有原来的数据）。\nnp.array会尝试为新建的这个数组推断出一个较为合适的数据类型，这个数据类型保存在一个特殊的dtype对象中。\nzeros 和 ones 也分别可以创建指定大小的全 0 或全 1 数组，empty 可以创建一个没有任何具体值的数组（它返回的都是一些未初始化的垃圾值）：\n\narange是 Python 内置函数range的数组版，np.arange返回间隔均匀的一些值。\nndarray 的数据类型\n\ndtype（数据类型）是一个特殊的对象，它含有 ndarray 将一块内存解释为特定数据类型所需的信息。\n需要知道你所处理的数据的大致类型是浮点数、复数、整数、布尔值、字符串，还是普通的 python 对象。当你需要控制数据在内存和磁盘中的存储方式时，就得了解如何控制存储类型。\n\n可通过ndarray的astype方法显示地转换其dtype：\n\n若将浮点数转换成整数，则小数部分将会被截断。\n若某字符串数组表示的全是数字，可用astype将其转换为数值形式：\n\n这里没写 np.float64 只写了 float，但是NumPy会将 Python 类型映射到等价的dtype上。\n\n数组的dtype的另一个用法：\n\nint_array变成了和calibers一样的浮点型数组\n\n用简洁类型的代码表示dtype：\n\nu4(unit32)：无符号的 32 位（4个字节）整型。\n\n调用astype无论如何都会创建出一个新的数组（原始数据的一份拷贝）。\n浮点数只能表示近似的分数值，在复杂计算中可能会积累一些浮点错误，因此比较操作只在一定小数位以内有效。\n数组和标量之间的运算\n数组：可对数据执行批量运算（不用编写循环即可）。这通常叫做矢量化(vectorization)。\n\n大小相等的数组之间，它们之间任何的算术运算都会应用到元素级（每个元素都做这个运算了），数组与标量的算术运算也是。\n不同大小的数组之间的运算叫做广播(broadcasting)。\n\n基本的索引和切片\n\n数据不会被复制，任何修改都直接改了原数组。\n如果仅是要一份副本，则用 .copy()。\n\n\n对二维数组单个元素的索引：\n\n这两种方式等价。\n若arr2d[2]，则输出的是一维数组[7,8,9]。\n\n2*2*3的数组（2组2行3列）：\n\n切片索引\n\n布尔型索引\n\n需要先引入：\nfrom numpy.random import randn\n\n或将代码改成\ndata = np.random.randn(7, 4)\n\n\n\n\n布尔型数组的长度必须跟被索引的轴长度一致。每个名字对应 data 数组一行。\n\n对条件进行否定的两种方式：\n\n\n\n组合应用多个布尔条件，可使用&、|等布尔算术运算符：\n\n通过布尔型索引选取数组中的数组，将总是创建数据的副本，即使返回一模一样的数组也是一样。\n\n通过布尔型数组设置值：\n\n通过一维布尔数组设置整行或列的值：\n\n花式索引（Fancy indexing）\n指利用整数数组进行索引。\nnp.empty((8,4))\nReturn a new array of given shape and type, without initializing entries.\n\n\n\nfor i in range(8):\n    arr[i] = i \n\nReturn an object that produces a sequence of integers from start (inclusive)\nto stop (exclusive) by step.\n\n\n\n\n为了以特定顺序选取行的子集，只需传入一个用于指定顺序的整数列表或 ndarray，使用负数索引会从末尾开始选取行（最后一行是 -1）。\n\n一次传入多个索引组，返回一个一维数组：\n\n\n取整列的两种方法，相当于给列排了顺序：\n\n花式索引跟切片不一样，总是将数据复制到新数组中。\n数组转置和轴对换\n转置返回的是源数据的视图，不进行任何复制操作。数组有 transpose 方法，还有一个 T 属性来完成转置：\n\n高维数组Transpose 要一个轴编号：\n\narr是 2 组 2 行 4 列的数组，transpose的参数表示shape的形状，对于这个例子来说，即2[0]、2[1]、4[2]，transpose(1,0,2)转置后变为2[1]、2[0]、4[2]，看起来仍是 2 组 2 行 4 列的形状，但数组内的元素经过转换后索引已经改变，也要遵循（1，0，2）的顺序。如转置前的数组arr[0,1,0]索引值为 4，转置后的数组arr'[1,0,0]，索引值才为 4。其它同理。\n\nndarray 的 swapaxes 方法接受一对轴编号且返回源数据的视图：\n\n转置后的数组arr.T为 4[2] 组 2[1] 行 2[0] 列数组，swapaxes(1,2)就是将第二个维度（中括号内数字）和第三个维度交换，即转换为 2 组 4 行 2 列。\n通用函数：快速的元素级数组函数\n通用函数（即 ufunc）是一种对ndarray中的数据执行元素级运算的函数，就是一些简单函数。\n利用数组进行数据处理\n用数组表达式代替循环的做法，通常被称为矢量化。NumPy 数组将多种数据处理任务表述为数组表达式。\n\n\nnp.meshgrid函数接受两个一维数组，并产生两个二维矩阵（对应于两个数组中所有的（x, y）对。\n将条件逻辑表述为数组运算\nnp.wherea函数是三元表达式x if condition else y的矢量化版本。\n\nnp.where的第二个和第三个参数不必是数组，传递给where的数组大小可以不相等，甚至可以是标量值。在数据分析工作中，where通常用于根据另一个数组而产生一个新的数组。\n\n用where表述出更复杂的逻辑：（where的嵌套）\n\n\n用于布尔型数组的方法\n有两个方法any和all。\n\n排序\n多维数组可以在任何一个轴向上进行排序，只需将轴编号传给sort：\n\n顶级方法np.sort返回的数组已排序的副本，就地排序则会修改数组。\n唯一化以及其他的集合逻辑\n\nnp.unique找出数组中的唯一值并返回已排序的结果。\n\nnp.in1d用于测试一个数组的值在另一个数组的情况。\n随机数生成\nnumpy.random模块多了用于高效生产多种概率分布的样本值的函数（用来生成大量样本值）。\n\n不足之处，欢迎指正。\n\n                ", "mainLikeNum": ["4 "], "mainBookmarkNum": "3"}