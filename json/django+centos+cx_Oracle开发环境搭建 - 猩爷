{"title": "django+centos+cx_Oracle开发环境搭建 - 猩爷 ", "index": "centos,linux,oracle,python,django", "content": "Linux设置固定IP\n\nvi /etc/sysconfig/network-scripts/ifcfg-eth0\n\nDEVICE=eth0\nBOOTPROTO=static\nIPADDR=192.168.0.116\nNETMASK=255.255.0.0\nGATEWAY=192.168.0.1\nONBOOT=yes\nTYPE=Ethernet\n\n\n重启配置文件使之生效\n\n/etc/init.d/network restart\n\npip 安装\n\ntar -xzvf pip-1.5.4.tar.gz\npip install xxx -i http://pypi.douban.com/simple\n\ndjango 安装\n\n略\n\nOracle client 安装\n\n./centos_cx_Oracle.sh  文件如下:\n\n#!/bin/bash\n\n# INSTALL ORACLE INSTANT CLIENT #\n#################################\n\n# NOTE: Oracle requires at least 1176 MB of swap (or something around there).\n# If you are using CentOS in a VMWare VM, there's a good chance that you don't have enough by default.\n# If this describes you and you need to add more swap, see the\n# \"Adding a Swap File to a CentOS System\" section, here:\n# http://www.techotopia.com/index.php/Adding_and_Managing_CentOS_Swap_Space\n\n# Install basic dependencies\nsudo yum -y install libaio bc flex\n\necho \"Now go get some the following two RPMs ...\"\necho \"- basic: oracle-instantclient11.2-basic-11.2.0.3.0-1.x86_64.rpm\"\necho \"- SDK/devel: oracle-instantclient11.2-devel-11.2.0.3.0-1.x86_64.rpm\"\necho \"... from this URL: http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html\"\necho \"WARNING: It's pretty annoying, they make you sign up for an Oracle account, etc.\"\necho 'I will assume you have put these two files are into ~/Downloads'\necho \"Press any key once you're ready\" && read -n 1 -s\n\nsudo rpm -ivh ~/Downloads/oracle-instantclient11.2-basic-*\nsudo rpm -ivh ~/Downloads/oracle-instantclient11.2-devel-*\nsudo rpm -ivh ~/Downloads/oracle-instantclient11.2-sqlplus-*\n\n\n# SET ENVIRONMENT VARIABLES #\n#############################\n\n# Source for this section: http://cx-oracle.sourceforge.net/BUILD.txt\n\n# (SIDENOTE: I had to alter it by doing some digging around for where the Oracle RPMs really installed to;\n# if you ever need to do this, do a command like this:\n#     rpm -qlp )\n\necho '# Convoluted undocumented Oracle bullshit.' >> $HOME/.bashrc\necho 'export ORACLE_VERSION=\"11.2\"' >> $HOME/.bashrc\necho 'export ORACLE_HOME=\"/usr/lib/oracle/$ORACLE_VERSION/client64/\"' >> $HOME/.bashrc\necho 'export PATH=$PATH:\"$ORACLE_HOME/bin\"' >> $HOME/.bashrc\necho 'export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:\"$ORACLE_HOME/lib\"' >> $HOME/.bashrc\n. $HOME/.bashrc\n\n# INSTALL cx_Oracle #\n#####################\n\npip install cx_Oracle\n\n\n然后让新环境生效 source ~/.bash_profile\n\ncx_Oracle 安装\n\nerror: command 'gcc' failed with exit status 1\nyum -y install gcc-* libxml2-devel python-devel mysql-devel\n\n如果centos默认源被墙壁\n\n打开文件/etc/resolv.conf在其中添加：\nnameserver 8.8.8.8\n然后重启网卡：使用命令: service network restart\n/usr/lib/oracle/11.2/client64/network/admin/tnsnames.ora\n\n \nx =  \n(DESCRIPTION =   \n(ADDRESS_LIST =  \n(ADDRESS = (PROTOCOL = TCP)(HOST = 数据库IP)(PORT = 1521))  \n)  \n(CONNECT_DATA =  \n(SID = 数据库)  \n)  \n)  \n\n\n添加以下内容到 /etc/profile\n\n \nexport ORACLE_HOME=/usr/lib/oracle/11.2/client64  \nexport TNS_ADMIN=/usr/lib/oracle/11.2/client64/network/  admin\nexport NLS_LANG=AMERICAN_AMERICA.AL32UTF8\nexport PATH=$PATH:$ORACLE_HOME/bin:$ORACLE_HOME/lib\nexport LD_LIBRARY_PATH=$ORACLE_HOME/lib:/usr/lib:/usr/local/lib;\n\n\n然后让新环境生效 source /etc/profile\n\n然后再安装PIL库\n\n用pil产生验证码出现：ImportError: The _imagingft C module is not installed\n这个是由于PIL没有编译freetype导致的\n\n需要先安装jpeg库\n\nwget http://www.ijg.org/files/jpegsrc.v7.tar.gz\ntar -zxvf jpegsrc.v7.tar.gz\ncd jpeg-7\nCC=\"gcc -arch x86_64\"\n./configure --enable-shared --enable-static\nmake\nmake install\n\n\n然后再安装PIL库\n\n让PIL支持freetype的方法1、安装freetype开发库\nyum install freetype-devel\n\n2、下载源代码http://effbot.org/downloads/Imaging-1.1.7.tar.gz\n\n3、修改setup.py文件\n\nJPEG_ROOT = libinclude(\"/usr/local\")\nFREETYPE_ROOT = '/usr/lib64','/usr/include/freetype2/freetype'\n\n\n4、查看支持项\npython setup.py build_ext -i\n--- FREETYPE2 support available  注意这一项\n\n5、编译安装\npython setup.py install若上面的设置都失败，则只能拿出下面的杀手锏：\n\nsudo apt-get build-dep python-imaging\nsudo ln -s /usr/lib/`uname -i`-linux-gnu/libfreetype.so /usr/lib/sudo ln -s /usr/lib/`uname -i`-linux-gnu/libjpeg.so /usr/lib/sudo ln -s /usr/lib/`uname -i`-linux-gnu/libz.so /usr/lib/\npip install -U PIL\n\n\n当现下面的提示时，则说明安装成功了：\n\n--------------------------------------------------------------------PIL 1.1.7 SETUP SUMMARY--------------------------------------------------------------------version       1.1.7platform      linux2 2.7.3 (default, Apr 10 2012, 22:21:37)              [GCC 4.6.3]----------------------------------------------------------------------- TKINTER support available--- JPEG support available--- ZLIB (PNG/ZIP) support available--- FREETYPE2 support available*** LITTLECMS support not available--------------------------------------------------------------------\n\nDjangoCaptcha 安装\n\n用于验证码生成\n\nxlwt 安装\n\npip install xlwt\n\nunipath 安装\n\npip install unipath\n\nORA-21561: OID generation failed\n\n添加 127.0.0.1  主机名称  到 /etc/hosts\n\n关闭防火墙\n\niptables -F\n\ndjango 测试\n\nsettings文件修改:\n\nDEBUG = True\nINTERNAL_IPS = ('127.0.0.1', '192.168.1.100')\n\n\ncron服务\n\n/sbin/service crond start\n/sbin/service crond stop\n/sbin/service crond restart\n/sbin/service crond reload\n\n\nweb服务器时间同步\n\nntpdate time.nist.gov\n\n                ", "mainLikeNum": ["1 "], "mainBookmarkNum": "4"}