{"title": "Linux下安装python-2.7 - 个人文章 ", "index": "python", "content": "安装依赖的库\nyum -y install python-devel openssl openssl-devel gcc sqlite sqlite-devel mysql-devel libxml2-devel libxslt-devel\nPython\n================================================= \n下载python 2.7.13\nwww.python.org\n[root@server2 ~]# mkdir /software\n[root@server2 ~]# cd /software/\n[root@server2 software]# wget https://www.python.org/ftp/python/2.7.13/Python-2.7.13.tgz\n[root@server2 software]# ll\n总用量 36852\n-rw-r--r-- 1 root root 17076672 12月 18 04:21 Python-2.7.13.tgz\n-rw-r--r-- 1 root root 20656090 1月  17 16:07 Python-3.5.3.tgz\n解压文件\n[root@server2 software]# tar -zxf Python-2.7.13.tgz \n进入目录\n[root@server2 software]# cd Python-2.7.13\n编译安装\n[root@server2 Python-2.7.13]# ./configure --prefix=/usr/local/python2.7 --with-threads --enable-shared\n[root@server2 Python-2.7.13]# make && make altinstall\n备份旧python相关命令\n===> 有些版本/usr/bin/目录下不存在pip 忽略下面第一行命令即可\n[root@server2 Python-2.7.13]# mv /usr/bin/pip /usr/bin/pip_old  \n[root@server2 Python-2.7.13]# mv /usr/bin/easy_install /usr/bin/easy_install_old\n[root@server2 Python-2.7.13]# mv /usr/bin/python /usr/bin/python_old\n新版本python命令做软连接，快捷使用\n[root@server2 Python-2.7.13]# ln -s /usr/local/python2.7/lib/libpython2.7.so /usr/lib\n[root@server2 Python-2.7.13]# ln -s /usr/local/python2.7/lib/libpython2.7.so.1.0 /usr/lib\n[root@server2 Python-2.7.13]# ln -s /usr/local/python2.7/bin/python2.7 /usr/bin/python\n[root@server2 Python-2.7.13]# ln -s /usr/local/python2.7/lib/libpython2.7.so /usr/lib64\n[root@server2 Python-2.7.13]# ln -s /usr/local/python2.7/lib/libpython2.7.so.1.0 /usr/lib64\n测试python是否可以正常使用\n[root@server2 ~]# python\nPython 2.7.13 (default, Apr 11 2017, 11:14:36) \n[GCC 4.4.7 20120313 (Red Hat 4.4.7-18)] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> \n安装pip\n下载最新版的pip，然后安装\n[root@server2 Python-2.7.13]# cd /software/\n[root@server2 software]# wget https://bootstrap.pypa.io/get-pip.py\n[root@server2 software]# python get-pip.py \n查找pip的位置\n[root@server2 software]# find / -name pip\n/usr/local/python2.7/bin/pip\n找到pip2.7的路径，为其创建软链作为系统默认的启动版本\n[root@server2 software]# ln -s /usr/local/python2.7/bin/pip /usr/bin/pip\n测试pip是否可用\n[root@server2 software]# pip install Pillow\nCollecting Pillow\n  Downloading Pillow-4.1.0-cp27-cp27m-manylinux1_x86_64.whl (5.7MB)\n    100% |████████████████████████████████| 5.7MB 129kB/s \nCollecting olefile (from Pillow)\n  Downloading olefile-0.44.zip (74kB)\n    100% |████████████████████████████████| 81kB 541kB/s \nBuilding wheels for collected packages: olefile\n  Running setup.py bdist_wheel for olefile ... done\n  Stored in directory: /root/.cache/pip/wheels/20/58/49/cc7bd00345397059149a10b0259ef38b867935ea2ecff99a9b\nSuccessfully built olefile\nInstalling collected packages: olefile, Pillow\nSuccessfully installed Pillow-4.1.0 olefile-0.44\n安装easy_install\n下载最新版的easy_install，然后安装\n[root@server2 software]# wget https://bootstrap.pypa.io/ez_setup.py\n[root@server2 software]# python ez_setup.py \n找到easy_install的路径，为其创建软链作为系统默认的启动版本\n[root@server2 software]# ln -s /usr/local/python2.7/bin/easy_install /usr/bin/easy_install\n测试easy_install是否可用\n[root@server2 software]# easy_install beautifulsoup4\nSearching for beautifulsoup4\nReading https://pypi.python.org/simple/beautifulsoup4/\nDownloading https://pypi.python.org/packages/9b/a5/c6fa2d08e6c671103f9508816588e0fb9cec40444e8e72993f3d4c325936/beautifulsoup4-4.5.3.tar.gz#md5=937e0df0d699a1237646f38fd567f0c6\nBest match: beautifulsoup4 4.5.3\nProcessing beautifulsoup4-4.5.3.tar.gz\nWriting /tmp/easy_install-OSpCW5/beautifulsoup4-4.5.3/setup.cfg\nRunning beautifulsoup4-4.5.3/setup.py -q bdist_egg --dist-dir /tmp/easy_install-OSpCW5/beautifulsoup4-4.5.3/egg-dist-tmp-m3PXo5\nzip_safe flag not set; analyzing archive contents...\nMoving beautifulsoup4-4.5.3-py2.7.egg to /usr/local/python2.7/lib/python2.7/site-packages\nAdding beautifulsoup4 4.5.3 to easy-install.pth file\n\nInstalled /usr/local/python2.7/lib/python2.7/site-packages/beautifulsoup4-4.5.3-py2.7.egg\nProcessing dependencies for beautifulsoup4\nFinished processing dependencies for beautifulsoup4\nyum 安装工具只支持系统自带的python版本， 修改配置文件使其可正常使用\n查看原版本python\n[root@server2 software]# ll /usr/bin/python*\nlrwxrwxrwx 1 root root   34 4月  11 11:20 /usr/bin/python -> /usr/local/python2.7/bin/python2.7\nlrwxrwxrwx 1 root root    6 2月  15 14:33 /usr/bin/python2 -> python\n-rwxr-xr-x 2 root root 9032 8月  18 2016 /usr/bin/python2.6  ==> 这个就是系统自带的python \n-rwxr-xr-x 1 root root 1418 8月  18 2016 /usr/bin/python2.6-config\nlrwxrwxrwx 1 root root   16 4月  11 10:47 /usr/bin/python-config -> python2.6-config\n-rwxr-xr-x 2 root root 9032 8月  18 2016 /usr/bin/python_old\n修改配置文件 /usr/bin/yum\n#!/usr/bin/python  ===>  修改为  #!/usr/bin/python2.6\n测试yum是否可用\n[root@server2 software]# yum -y install python-devel\n已加载插件：fastestmirror, security\n设置安装进程\nLoading mirror speeds from cached hostfile\n * epel: mirrors.aliyun.com\n包 python-devel-2.6.6-66.el6_8.x86_64 已安装并且是最新版本\n无须任何处理\n好了，大功告成。\n优化：编写一键安装python2.7的脚本\n由于Centos 6.x的系统默认都是python2.6 ，如果服务器需要用2.7环境的话每台都得手动操作升级，工作量比较大， 编写脚本提升效率。（Centos 7.x版本的默认的python都是2.7.5版本）\n创建用于存放python脚本的目录\n[root@server2 software]# mkdir /script/python/\n[root@server2 software]# cd /script/python/\n由于国外python网站下载python安装包缓慢，可以提前下载下来，和install_py27.sh放在一起，在脚本中直接解压本地文件进行安装，我已经上传到网盘点击我下载\n开始编写脚本 install_py27.sh\n#!/bin/sh \n# __author__ = 'junxi'\n\n# This script is used by fast installed python2.7 ......\n# write by 2017/04/11\n\necho \"##############start run install for python2.7 script############\"\nyum -y install python-devel openssl openssl-devel gcc sqlite sqlite-devel mysql-devel libxml2-devel libxslt-devel\nmkdir /software\nmv Python-2.7.13.tgz /software\ncd /software\ntar -zxf Python-2.7.13.tgz\ncd Python-2.7.13/\n./configure --prefix=/usr/local/python2.7 --with-threads --enable-shared\nmake\nmake altinstall\nmv /usr/bin/pip /usr/bin/pip_old\nmv /usr/bin/easy_install /usr/bin/easy_install_old\nmv /usr/bin/python /usr/bin/python_old\nln -s /usr/local/python2.7/lib/libpython2.7.so /usr/lib\nln -s /usr/local/python2.7/lib/libpython2.7.so.1.0 /usr/lib\nln -s /usr/local/python2.7/bin/python2.7 /usr/bin/python\nln -s /usr/local/python2.7/lib/libpython2.7.so /usr/lib64\nln -s /usr/local/python2.7/lib/libpython2.7.so.1.0 /usr/lib64\ncd /software\nwget https://bootstrap.pypa.io/get-pip.py\npython get-pip.py\nln -s /usr/local/python2.7/bin/pip /usr/bin/pip\necho \"############更换pip源为国内淘宝源##########\"\nmkdir /root/.pip/\ntouch /root/.pip/pip.conf\ncat >> /root/.pip/pip.conf << EOF\n[global]\nindex-url=http://mirrors.aliyun.com/pypi/simple/ \n\n[install]\ntrusted-host=mirrors.aliyun.com\nEOF\n\npip install Pillow\nsed -i 's#\\/usr/bin/python#\\/usr/bin/python2.6#g' /usr/bin/yum\nyum -y install python-devel\necho 'the install script is the end......'\n把Python-2.7.13.tgz文件和install_py27.sh脚本下载下来，放在同一个目录下：运行下面命令进行安装\n/bin/sh install_py27.sh\n安装完成后执行python查看版本\n\n\n                ", "mainLikeNum": ["1 "], "mainBookmarkNum": "1"}