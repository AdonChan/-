{"title": "使用Django1.7开发熙鱿记官网 - 西镇精魂 ", "index": "python,django", "content": "Django升级1.7了，根据业务的需求，我们也准备开发新版的网站，新加入会员管理，订单查看等新功能，界面也会重新调整。官网: http://www.youyutiao.com\n\n熙鱿记是一个什么样的站点，就是一个搞电商的，卖海鲜的，没啥技术含量，没啥高大上的概念。\n\n我也是个菜鸟，就一边学习一边做罢了，在这里记录平时学到的东西。\n\n对于我来说，Django1.7最大的变化就是加入了数据库迁移~~\n\n1. 新建项目\n\n\n  django-admin.py startproject xyj\n\n\n我会习惯性的吧xyj修改成ahead作为默认的app，这个app里面只进行主站页面的展示例如首页、关于我们等等，静态文件和模板的存放和配置文件。\n\n我会把settings.py改成settings文件夹，然后里面添加__init__.py, development.py, production.py, test.py文件，不同环境下的配置文件分离。\n\n2. 登陆注册\n\n加入会员管理，用户的登陆注册必不可少，然后新建一个用户管理app\n\n\n  python manage.py startapp guys\n\n\n新建一个guys模块，我觉得起个users这个名字太无聊了。\n\n因为Django自带的user model都是一些常用的字段，所以要对表进行扩展，1.7之前的版本官方文档还有AUTH_PROFILE_MODULE方法，新建一个存储用户信息的表，我现在去看官方文档没有找到。我个人也不推荐这种方式，因为查询用户信息的时候还要去多查一次表。\n我在guys/models.py里导入'AbstractBaseUser'\n\nfrom django.contrib.auth.models import AbstractBaseUser\n\n\nclass User(AbstractUser):\n    # 添加所需要的属性\n    points = models.PositiveIntegerField(\"积分\", default=0)\n\n    class Meta(AbstractUser.Meta):\n        swappable = 'AUTH_USER_MODEL'\n\n\n然后要在settings/__init__.py里设置设置 AUTH_USER_MODEL = 'guys.User'\n\n\n  python manage.py makemigrations guys  # 备份表结构\n    python manage.py migrate guys  # 同步数据库\n\n\n呃呃，到点了下班了，十一快乐~~ 回家过节\n\n                ", "mainLikeNum": ["1 "], "mainBookmarkNum": "6"}