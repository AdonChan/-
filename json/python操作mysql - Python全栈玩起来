{"title": "python操作mysql - Python全栈玩起来 ", "index": "python,mysql", "content": "python操作mysql\n安装模块\nwindows:pip install pymysql\nubuntu:sudo pip3 install pymysql\npython操作mysql步骤\nimport pymysql\n(1) 链接mysql数据库\ndb = pymysql.connect(主机名,用户名,密码,数据库名)\n(2) 设置字符编码\ndb.set_charset('utf8')\n(3) 创建游标对象\ncursor = db.cursor()\n(4) 准备sql语句\nsql = '...'\n(5) 执行sql语句\ncursor.execute(sql)\n(6) 获取所有结果集\ncursor.fetchall()\n(7) 获取一条结果集\ncursor.fetchone()\n(8) 获取受影响的行数\ncursor.rowcount\n(9) 关闭数据库链接\ndb.close()\npymysql的事务处理\n默认开启事务处理\n需要提交或者回滚\n完整的操作\nimport pymysql\ndb = pymysql.connect('127.0.0.1','root','123456','hz03')\ndb.set_charset('utf8')\ncursor = db.cursor()\ntry:\n    sql = 'insert into goods values(null,1,\"商品名称\",12.1)'\n    cursor.execute(sql)\n    db.commit()\nexcept:\n    db.rollback()\nprint(cursor.rowcount)\ndb.close()\n\n                ", "mainLikeNum": ["2 "], "mainBookmarkNum": "1"}