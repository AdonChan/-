{"title": "ARM构建耗时定位笔记 - michael翔的IT私房菜 ", "index": "shell,python", "content": "mock环境\n发现创建mock环境，会自动生成state.log的文件；参考文章：\nLinux之Mock使用方法\n发现mock中start yum install至finish yum install的过程比较长，首先怀疑网络延时问题\n打开rpmbuild.log文件，发现下载包的过程也是很快，相差不大：\n耗时长：\nDEBUG: Transaction Summary\nDEBUG: ================================================================================\nDEBUG: Install  19 Packages (+284 Dependent packages)\nDEBUG: Total download size: 189 M\nDEBUG: Installed size: 782 M\nDEBUG: Downloading packages:\nDEBUG: --------------------------------------------------------------------------------\nDEBUG: Total                                               16 MB/s | 189 MB  00:11  \n耗时短：\nDEBUG: ================================================================================\nDEBUG: Install  19 Packages (+284 Dependent packages)\nDEBUG: Total download size: 189 M\nDEBUG: Installed size: 782 M\nDEBUG: Downloading packages:\nDEBUG: --------------------------------------------------------------------------------\nDEBUG: Total                                              8.3 MB/s | 189 MB  00:22     \n所以，下载时长不是决定因素。\n利用tail -f ./xx/data/repos/a8/12/xx/rpmbuild.log，实时查看构建进展，发现下载包确实不是影响因素，在yum installing的过程，速度相差比较大：\nDEBUG: Running transaction\nDEBUG:   Installing : libgcc-4.9.3-154843.1.h1.aarch64                           1/303 \nDEBUG:   Installing : tzdata-2016g-2.h1.noarch                                   2/303 \n到底什么因素导致这个过程变慢的呢？请教聪哥之后，让看一下io_wait。于是，在重新构建的时候，使用top命令，按下数字1之后，看了数据：\n发现wa数据异常高。接着请教ARM机器运维人员，发现，他们最近打开一个叫qos的流量控制选项。⊙﹏⊙b汗\n关闭qos的设置之后，就正常了。\n参考\n理解 %IOWAIT (%WIO)\n\n                ", "mainLikeNum": ["0 "], "mainBookmarkNum": "0"}