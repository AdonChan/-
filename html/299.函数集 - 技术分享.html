

<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><meta name="renderer" content="webkit"/><meta property="qc:admins" content="15317273575564615446375"/><meta property="og:image" content="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon.png"/><meta name="viewport"
              content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/><meta name="alexaVerifyID" content="LkzCRJ7rPEUwt6fVey2vhxiw1vQ"/><meta name="apple-itunes-app" content="app-id=958101793, app-argument="><title>函数集 - 技术分享 - SegmentFault 思否</title><meta name="description" content="统计数组元素个数 {代码...} print_r($result);//Array( {代码...} ) 循环删除目录 {代码...} 3.无限极分类生成树 {代码...} 4.数组排序 a - b 是数字数组写法 遇到字符串的时候就要 {代码...} 5.array_reduce {..."/><meta name="keywords" content="python,javascript,php"/><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="SegmentFault"/><link rel="shortcut icon" href="https://static.segmentfault.com/v-5bebf0aa/global/img/favicon.ico"/><link rel="apple-touch-icon" href="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon.png"><meta name="msapplication-TileColor" content="#009a61"/><meta name="msapplication-square150x150logo" content="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon.png"/><meta name="baidu_union_verify" content="bcf7fd80dca60d53d46d5b46e1b990ca"><link rel="alternate" type="application/atom+xml" title="SegmentFault 最新问题" href="/feeds/questions"><link rel="alternate" type="application/atom+xml" title="SegmentFault 最新文章" href="/feeds/blogs"><link rel="stylesheet" href="https://static.segmentfault.com/v-5bebf0aa/global/css/global.css"/><link rel="stylesheet" href="https://static.segmentfault.com/v-5bebf0aa/blog/css/blog.css"/><link rel="stylesheet" href="https://static.segmentfault.com/v-5bebf0aa/global/css/responsive.css"/><script type='text/javascript' src='https://sponsor.segmentfault.com/spcjs.php?id=1&block=1&repu=0&tag=python,javascript,php'></script></head><!-- 推荐引擎 --><script charset="utf-8" id="ParadigmSDK" src="https://nbrecsys.4paradigm.com/sdk/js/ParadigmSDK_v2.js" data="216" defSI="594"></script><script>
    ParadigmSDK.init("46e957bd9dea4acdaa15b4b64aff728f");
    ParadigmSDK.trackDetailPageShow();
</script><body data-mod="blog"
    class="blog-post "><!--[if lt IE 9]><div class="alert alert-danger topframe" role="alert">你的浏览器实在<strong>太太太太太太旧了</strong>，放学别走，升级完浏览器再说 <a target="_blank" class="alert-link" href="http://browsehappy.com">立即升级</a></div><![endif]--><img id="icon4weChat" style="height: 0;width: 0;" src="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon-512.png"><div id="gridMapHoverBox" style="position:absolute; border: 1px solid #009a61; z-index:99; font-size: 10px; background:#fff"></div><div class="global-nav sf-header sf-header--index"><div class="bottom-nav visible-xs visible-sm "><div class="opts"><a class="opts-group " href="/"><i class="fa fa-home" aria-hidden="true"></i><span>首页</span></a><a class="opts-group " href="/questions"><i class="fa fa-comments" aria-hidden="true"></i><span>问答</span></a><a class="opts-group active" href="/blogs"><i class="fa fa-pencil-square" aria-hidden="true"></i><span>专栏</span></a><a class="opts-group " href="/lives"><i class="fa fa-play-circle" aria-hidden="true"></i><span>讲堂</span></a><div class="opts-group"><div class="btn-group dropup"><i class="fa fa-bars dropdown hoverDropdown" data-toggle="dropdown" aria-hidden="true"><span>更多</span></i><ul class="dropdown-menu"><li><a href="/jobs">职位</a></li><li><a href="/events">活动</a></li><li><a href="/tags">标签</a></li><li><a href="/badges">徽章</a></li></ul></div></div></div></div><nav class="container nav"><div class="visible-xs visible-sm header-response"><a href="/search" style="display:block"><i class="fa fa-search" aria-hidden="true"></i></a><div class="sf-header__logo sf-header__logo--response"><h1><a href="/" style="height:24px; background-size: auto 24px;"></a></h1></div><a href="/user/login" class="pull-right login-btn"><i class="fa fa-user" aria-hidden="true"></i></a></div><script>
mobileScroll(
    function(direction) { 
        try {
            if (direction === 'down') {
                document.querySelector('.bottom-nav').classList.add('hidden')
            } else {
                document.querySelector('.bottom-nav').classList.remove('hidden')
            }
        } catch(err) {}
    }
);    
function mobileScroll( fn ) {
    var beforeScrollTop = document.documentElement.scrollTop || document.body.scrollTop,
        fn = fn || function() {};
    window.addEventListener("scroll", function() {
        var afterScrollTop = document.documentElement.scrollTop || document.body.scrollTop,
            delta = afterScrollTop - beforeScrollTop;
        if( delta === 0 ) return false;
        fn( delta > 0 ? "down" : "up" );
        beforeScrollTop = afterScrollTop;
    }, false);
}
</script><div class="row hidden-xs hidden-sm"><div class="col-sm-8 col-md-9 col-lg-9"><div class="sf-header__logo"><h1><a href="/">SegmentFault</a></h1></div><div><ul class="menu list-inline pull-left hidden-xs"><li class="menu__item"><a href="/" class="">首页</a></li><li class="menu__item"><a href="/questions" class="">问答</a></li><li class="menu__item"><a href="/blogs" class="active-nav">专栏</a></li><li class="menu__item"><a href="/lives" class="">讲堂</a></li><li class="menu__item menu__item--more dropdown"><a href="##" class="dropdown-toggle dropdownBtn" data-toggle="dropdown">
                                        发现<i class="fa fa-caret-down" style="font-size: 14px;margin-left: 5px;" aria-hidden="true"></i></a><div class="dropdown-block hidden"><ul class="dropdown-content-menu"><li><a href="/groups">圈子</a></li><li><a href="/events">活动</a></li><li><a href="/tags">标签</a></li><li><a href="/jobs">找工作</a></li><li><a href="/users">排行榜</a></li><li><a href="/badges">徽章</a></li><li><a href="/notes">笔记</a></li><li><a href="https://docs.segmentfault.com" target="_blank">开发手册<i style="line-height: 20px;font-size: 12px;color: #F5A623;" class="ml10 fa fa-external-link-square"></i></a></li><li><a href="https://business.segmentfault.com/ads?utm_source=sf-header" target="_blank">广告投放<i style="line-height: 20px;font-size: 12px;color: #F5A623;" class="ml10 fa fa-external-link-square"></i></a></li></ul></div></li><li class="menu__item visible-sm-inline-block"><a href="/search"><span class="glyphicon glyphicon-search" style="vertical-align: middle;"></span></a></li></ul><form action="/search" class="header-search  hidden-sm hidden-xs pull-right" ><button class="btn btn-link"><span class="sr-only">搜索</span><span class="glyphicon glyphicon-search"></span></button><input id="searchBox" name="q" type="text"  placeholder="搜索问题或关键字" class="form-control" value="" /></form></div></div><div class="col-sm-4 col-md-3 col-lg-3 text-right"><ul class="opts list-inline hidden-xs"><li class="opts__item"><a href="/user/login" class="SFRegister btn-signin" style="margin-bottom:2px;">立即登录</a><a href="/user/register" class="SFLogin ml10 btn-signup"
                                       onClick="_gaq.push(['_trackEvent', 'Button', 'Click', 'Login']);">免费注册</a></li></ul></div></div></nav></div>
    
<input id="articleId" value="1190000002961545" class="hidden" />

<div class="wrap" data-blogid="1200000000490097">
    <div class="container mt15" style="position:relative">
        <div class="row">
            <div class="col-xs-12 col-md-9 main ">
                                <ol class="breadcrumb mb15">
                    <li><a href="/blogs">专栏</a></li>
                                        <li><a href="/blog/susheng">技术分享</a></li>
                                        <li class="active">文章详情</li>
                </ol>
                                <div class="post-topheader custom- pt0">
                    <div class="mb20">
                        <div class="block-for-right-border">
                            <div class="row">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                

                                    <div class="post-topheader__info" data-username="苏生不惑"
                                         data-userslug="sushengbuhuo"
                                         data-useravatar="https://avatar-static.segmentfault.com/175/934/175934663-572d654c6f521_big64">


                                        <div class="article__author clearfix">
                                            <div class="article__authorleft">
                                                <a href="/u/sushengbuhuo">
                                                    <img class="avatar-40" src="https://avatar-static.segmentfault.com/175/934/175934663-572d654c6f521_big64" alt="苏生不惑">
                                                </a>
                                            </div>
                                            <div class="article__authorright">
                                                <div class="article__authormeta">
                                                <a href="/u/sushengbuhuo" class="mr5 "><strong>苏生不惑</strong></a>

                                                                                                <img src="https://static.segmentfault.com/v-5bebf0aa/global/img/rp.svg" class="mr5"><span style="color:#BF7158" class="mr10">17.3k</span>

                                                                                                发布于
                                                <a href="/blog/susheng">技术分享</a>
                                                
                                                
                                                <span class="hidden-xs">
                                                                                                                                                          <button type="button"
                                                               class="btn btn-xs btn-success follow-article ml10"
                                                               data-do="follow"
                                                               data-type="blog"
                                                               data-id="1200000000490097">关注专栏
                                                       </button>
                                                                                                                                                   </span>
                                                </div>
                                                
                                                <span style="display: block">
                                                    2015-07-05 发布
                                                </span>
                                            </div>
                                        </div>

                                        <h1 class="h1 post-topheader__info--title" id="articleTitle" data-id="1190000002961545">
                                            <a href="/a/1190000002961545"> 函数集</a>
                                        </h1>

                                        <div class="content__tech hidden-xs">
                                            <a href="" class="blog-type-common blog-type-0-before" target="_blank" data-content="
                                                                                        翻译自 
                                                                                        "></a>
                                            
                                            <ul class="taglist--inline inline-block article__title--tag mr10">
                                                                                                    <li class="tagPopup mb5">
                                                        <a class="tag" href="/t/python/blogs" data-toggle="popover"
                                                                                data-img="https://avatar-static.segmentfault.com/378/252/3782524817-1040000000089534_big64" data-placement="top"
                                                                                data-original-title="python"
                                                                                data-id="1040000000089534">
                                                                                                                    <img src="https://avatar-static.segmentfault.com/252/177/2521771040-54cb53b372821_small">
                                                                                                                      python
                                                        </a>
                                                    </li>
                                                                                                    <li class="tagPopup mb5">
                                                        <a class="tag" href="/t/javascript/blogs" data-toggle="popover"
                                                                                data-img="https://avatar-static.segmentfault.com/195/823/1958237468-1040000000089436_big64" data-placement="top"
                                                                                data-original-title="javascript"
                                                                                data-id="1040000000089436">
                                                                                                                      javascript
                                                        </a>
                                                    </li>
                                                                                                    <li class="tagPopup mb5">
                                                        <a class="tag" href="/t/php/blogs" data-toggle="popover"
                                                                                data-img="https://avatar-static.segmentfault.com/188/805/188805810-1040000000089387_big64" data-placement="top"
                                                                                data-original-title="php"
                                                                                data-id="1040000000089387">
                                                                                                                      php
                                                        </a>
                                                    </li>
                                                                                            </ul>

                                            <span>
                                                2.1k 次阅读
                                                &nbsp;&middot;&nbsp;
                                                读完需要 150 分钟 
                                                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!-- end .post-topheader -->

                <div class="visible-lg">
                    <div class="side-widget">
                        <div class="stream__item-zan btn btn-default mt0 mb15 ml0 mr0 pt0 pb0 pl0 pr0 " id="side-widget-votes-btn">
                            <span class="stream__item-zan-icon"></span>
                            <span class="stream__item-zan-number" id="side-widget-votes-num">3</span>
                        </div>

                        <i class="fa fa-bookmark item " id="side-widget-bookmarks-btn"></i>
                        <i class="fa fa-weibo item"></i>
                        <i class="fa fa-weixin item" data-toggle="popover" data-placement="right"></i>
                        <i class="fa fa-twitter item"></i>
                        <i class="fa fa-facebook item"></i>
                        <i class="fa fa-arrow-up item hidden"></i>
                    </div>
                </div>

                
                <div class="article fmt article__content" data-id="1190000002961545" data-license="cc">
                    
<ol><li><p>统计数组元素个数</p></li></ol>
<pre><code class="php">$arr = array(
      '1011,1003,1008,1001,1000,1004,1012',
      '1009',
      '1011,1003,1111'
    );
$result = array();
foreach ($arr as $str) {
  $str_arr = explode(',', $str);
  foreach ($str_arr as $v) {
    // $result[$v] = isset($result[$v]) ? $result[$v] : 0;
    // $result[$v] = $result[$v] + 1;
    $result[$v] = isset($result[$v]) ? $result[$v]+1 : 1;
  }
}</code></pre>
<p>print_r($result);<br>//Array<br>(</p>
<pre><code>[1011] =&gt; 2
[1003] =&gt; 2
[1008] =&gt; 1
[1001] =&gt; 1
[1000] =&gt; 1
[1004] =&gt; 1
[1012] =&gt; 1
[1009] =&gt; 1
[1111] =&gt; 1</code></pre>
<p>)</p>
<ol><li><p>循环删除目录</p></li></ol>
<pre><code class="php">function cleanup_directory($dir) {
  foreach (new DirectoryIterator($dir) as $file) {
    if ($file-&gt;isDir()) {
      if (! $file-&gt;isDot()) {
        cleanup_directory($file-&gt;getPathname());
      }
    } else {
       unlink($file-&gt;getPathname());
    }
  }
   rmdir($dir);
}</code></pre>
<p>3.无限极分类生成树</p>
<pre><code class="php">
function generateTree($items){

    $tree = array();

    foreach($items as $item){

        if(isset($items[$item['pid']])){

            $items[$item['pid']]['son'][] = &amp;$items[$item['id']];

        }else{

            $tree[] = &amp;$items[$item['id']];

        }

    }

    return $tree;

}
function generateTree2($items){

    foreach($items as $item)

        $items[$item['pid']]['son'][$item['id']] = &amp;$items[$item['id']];

    return isset($items[0]['son']) ? $items[0]['son'] : array();

}


$items = array(

    1 =&gt; array('id' =&gt; 1, 'pid' =&gt; 0, 'name' =&gt; '安徽省'),

    2 =&gt; array('id' =&gt; 2, 'pid' =&gt; 0, 'name' =&gt; '浙江省'),

    3 =&gt; array('id' =&gt; 3, 'pid' =&gt; 1, 'name' =&gt; '合肥市'),

    4 =&gt; array('id' =&gt; 4, 'pid' =&gt; 3, 'name' =&gt; '长丰县'),

    5 =&gt; array('id' =&gt; 5, 'pid' =&gt; 1, 'name' =&gt; '安庆市'),

);

print_r(generateTree($items));
/**

 * 如何取数据格式化的树形数据

 */

$tree = generateTree($items);

function getTreeData($tree){

    foreach($tree as $t){

        echo $t['name'].'&lt;br&gt;';

        if(isset($t['son'])){

            getTreeData($t['son']);

        }

    }

}</code></pre>
<p>4.数组排序 a - b 是数字数组写法 遇到字符串的时候就要</p>
<pre><code class="php">var test = ['ab', 'ac', 'bd', 'bc'];
test.sort(function(a, b) {
    if(a &lt; b) {
        return -1;
    }

    if(a &gt; b) {
        return 1;
    }

    return 0;
});</code></pre>
<p>5.array_reduce</p>
<pre><code class="php">$raw = [1,2,3,4,5,];
// array_reduce 的第三个参数是 $result 的初始值
array_reduce($raw, function($result, $value) {
    $result[$value] = $value;

    return $result;
}, []);
// [1 =&gt; 1, 2 =&gt; 2, ... 5 =&gt; 5]
</code></pre>
<p>6.array<em>map 闭包中只接受一个或者多个参数，闭包的参数数量和 array</em>map 本身的参数数量必须一致</p>
<pre><code class="php">$input = ['key' =&gt; 'value'];
array_map(function($key, $value) {

    echo $key . $value;
}, array_keys($input), $input)
// 'keyvalue'
$double = function($item) {
  return 2 * $item;
}

$result = array_map($double, [1,2,3]);

// 2 4 6</code></pre>
<p>7.繁殖兔子</p>
<pre><code class="php">$month = 12;
   $fab = array();
 
   $fab[0] = 1;
   $fab[1] = 1;
 
     for ($i = 2; $i &lt; $month; $i++)
     {
         $fab[$i] = $fab[$i - 1] + $fab[$i - 2];
     }
 
     for ($i = 0; $i &lt; $month; $i++)
     {
         echo sprintf("第{%d}个月兔子为：{%d}",$i, $fab[$i])."&lt;br/&gt;";
     }</code></pre>
<p>8 .datetime</p>
<pre><code class="php">function getCurMonthFirstDay($date)
{
    return date('Y-m-01', strtotime($date));
}
 getCurMonthLastDay('2015-07-23')
function getCurMonthLastDay($date)
{
    return date('Y-m-d', strtotime(date('Y-m-01', strtotime($date)) . ' +1 month -1 day'));
}</code></pre>
<p>9.加密解密</p>
<pre><code class="php">function encrypt($data, $key)

{

    $key    =   md5($key);

    $x      =   0;

    $len    =   strlen($data);

    $l      =   strlen($key);

    $char   =   '';

    for ($i = 0; $i &lt; $len; $i++)

    {

        if ($x == $l)

        {

            $x = 0;

        }

        $char .= $key{$x};

        $x++;

    }

    $str    =   '';

    for ($i = 0; $i &lt; $len; $i++)

    {

        $str .= chr(ord($data{$i}) + (ord($char{$i})) % 256);

    }

    return base64_encode($str);

}

 

function decrypt($data, $key)

{

    $key = md5($key);

    $x = 0;

    $data = base64_decode($data);

    $len = strlen($data);

    $l = strlen($key);

    $char = '';

    for ($i = 0; $i &lt; $len; $i++)

    {

        if ($x == $l)

        {

            $x = 0;

        }

        $char .= substr($key, $x, 1);

        $x++;

    }

    $str = '';

    for ($i = 0; $i &lt; $len; $i++)

    {

        if (ord(substr($data, $i, 1)) &lt; ord(substr($char, $i, 1)))

        {

            $str .= chr((ord(substr($data, $i, 1)) + 256) - ord(substr($char, $i, 1)));

        }

        else

        {

            $str .= chr(ord(substr($data, $i, 1)) - ord(substr($char, $i, 1)));

        }

    }

    return $str;

}</code></pre>
<p>10 . <a href="http://hans-lizihan.com/javascript/2015/04/23/javascript-concat.html" rel="nofollow noreferrer">多维数组降级</a></p>
<pre><code class="php">function array_flatten($arr) {
    $result = [];

    array_walk_recursive($arr, function($value) use (&amp;$result) {
        $result[] = $value;
    });

    return $result;
}
print_r(array_flatten([1,[2,3],[4,5]]));// [1,[2,3],[4,5]] =&gt; [1,2,3,4,5]
//  var new_array = old_array.concat(value1[, value2[, ...[, valueN]]])
var test = [1,2,3,[4,5,6],[7,8]];
[].concat.apply([], test); // [1,2,3,4,5,6,7,8] 对于 test 数组中的每一个 value， 将它 concat 到空数组 [] 中去，而因为 concat 是 Array 的 prototype，所以我们用一个空 array 作载体
var test1 = [1,2,[3,[4,[5]]]];

function flatten(arr) {
   return arr.reduce(function(pre, cur) {
        if(Array.isArray(cur)) {
            return flatten(pre.concat(cur));
        }

        return pre.concat(cur);
   }, []);
}

// [1,2,3,4,5]</code></pre>
<p>11.json_encode中文</p>
<pre><code class="php">
function json_encode_wrapper ($result)
{
    if(defined('JSON_UNESCAPED_UNICODE')){
        return json_encode($result,JSON_UNESCAPED_UNICODE|JSON_NUMERIC_CHECK);
    }else {
        return preg_replace(
            array("#\\\u([0-9a-f][0-9a-f][0-9a-f][0-9a-f])#ie", "/\"(\d+)\"/",),
            array("iconv('UCS-2', 'UTF-8', pack('H4', '\\1'))", "\\1"),
            json_encode($result)
        );
    }
}</code></pre>
<p>12.二维数组去重</p>
<pre><code class="php">$arr = array(

    array('id'=&gt;'2','title'=&gt;'...','ding'=&gt;'1','jing'=&gt;'1','time'=&gt;'...','url'=&gt;'...','dj'=&gt;'...'),

    array('id'=&gt;'2','title'=&gt;'...','ding'=&gt;'1','jing'=&gt;'1','time'=&gt;'...','url'=&gt;'...','dj'=&gt;'...')

);
function about_unique($arr=array()){  
   /*将该种二维数组看成一维数组，则      该一维数组的value值有相同的则干掉只留一个，并将该一维      数组用重排后的索引数组返回，而返回的一维数组中的每个元素都是      原始key值形成的关联数组    */    
$keys =array();
   $temp = array();
   foreach($arr[0] as $k=&gt;$arrays) {
    /*数组记录下关联数组的key值*/     
    $keys[] = $k;
   }
   //return $keys;    /*降维*/    
foreach($arr as $k=&gt;$v) {
    $v = join(",",$v);  //降维     
    $temp[] = $v;
   }
   $temp = array_unique($temp); //去掉重复的内容    
foreach ($temp as $k =&gt; $v){
    /*再将拆开的数组按索引数组重新组装*/     
    $temp[$k] = explode(",",$v);  
   } 
   //return $temp;    /*再将拆开的数组按关联数组key值重新组装*/    
foreach($temp as $k=&gt;$v) {
    foreach($v as $kkk=&gt;$ck) {
     $data[$k][$keys[$kkk]] = $temp[$k][$kkk];
    }
   }
   return $data;
  }</code></pre>
<p>13.格式化字节大小</p>
<pre><code class="php">/**
* 格式化字节大小
* @param  number $size      字节数
* @param  string $delimiter 数字和单位分隔符
* @return string            格式化后的带单位的大小
* @author 
*/
function format_bytes($size, $delimiter = '') {
  $units = array('B', 'KB', 'MB', 'GB', 'TB', 'PB');
  for ($i = 0; $size &gt;= 1024 &amp;&amp; $i &lt; 6; $i++) $size /= 1024;
  return round($size, 2) . $delimiter . $units[$i];
}</code></pre>
<p>14.3分钟前</p>
<pre><code class="php">/**
* 将指定时间戳转换为截止当前的xx时间前的格式  例如 return '3分钟前''
* @param string|int $timestamp unix时间戳
* @return string
*/
function time_ago($timestamp) {
    $etime = time() - $timestamp;
    if ($etime &lt; 1) return '刚刚';     
    $interval = array (         
      12 * 30 * 24 * 60 * 60  =&gt;  '年前 ('.date('Y-m-d', $timestamp).')',
      30 * 24 * 60 * 60       =&gt;  '个月前 ('.date('m-d', $timestamp).')',
      7 * 24 * 60 * 60        =&gt;  '周前 ('.date('m-d', $timestamp).')',
      24 * 60 * 60            =&gt;  '天前',
      60 * 60                 =&gt;  '小时前',
      60                      =&gt;  '分钟前',
      1                       =&gt;  '秒前'
    );
    foreach ($interval as $secs =&gt; $str) {
        $d = $etime / $secs;
        if ($d &gt;= 1) {
            $r = round($d);
            return $r . $str;
        }
    };
}</code></pre>
<p>15.身份证号</p>
<pre><code class="php">/**
* 判断参数字符串是否为天朝身份证号
* @param $id 需要被判断的字符串或数字
* @return mixed false 或 array[有内容的array boolean为真]
*/
function is_citizen_id($id) {
    //长度效验  18位身份证中的X为大写
    $id  = strtoupper($id);
    if(!(preg_match('/^\d{17}(\d|X)$/',$id) || preg_match('/^\d{15}$/',$id))) {
      return false;
    }
    //15位老号码转换为18位 并转换成字符串
    $Wi          = array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2, 1); 
    $Ai          = array('1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'); 
    $cardNoSum   = 0;
    if(strlen($id)==16) {
        $id        = substr(0, 6).'19'.substr(6, 9); 
        for($i = 0; $i &lt; 17; $i++) {
          $cardNoSum += substr($id,$i,1) * $Wi[$i];
        }  
        $seq       = $cardNoSum % 11; 
        $id        = $id.$Ai[$seq];
    }
    //效验18位身份证最后一位字符的合法性
    $cardNoSum   = 0;
    $id17        = substr($id,0,17);
    $lastString  = substr($id,17,1);
    for($i = 0; $i &lt; 17; $i++) {
        $cardNoSum += substr($id,$i,1) * $Wi[$i];
    }  
    $seq         = $cardNoSum % 11;
    $realString  = $Ai[$seq];
    if($lastString!=$realString) {return false;}
    //地域效验
    $oCity       =  array(11=&gt;"北京",12=&gt;"天津",13=&gt;"河北",14=&gt;"山西",15=&gt;"内蒙古",21=&gt;"辽宁",22=&gt;"吉林",23=&gt;"黑龙江",31=&gt;"上海",32=&gt;"江苏",33=&gt;"浙江",34=&gt;"安徽",35=&gt;"福建",36=&gt;"江西",37=&gt;"山东",41=&gt;"河南",42=&gt;"湖北",43=&gt;"湖南",44=&gt;"广东",45=&gt;"广西",46=&gt;"海南",50=&gt;"重庆",51=&gt;"四川",52=&gt;"贵州",53=&gt;"云南",54=&gt;"西藏",61=&gt;"陕西",62=&gt;"甘肃",63=&gt;"青海",64=&gt;"宁夏",65=&gt;"新疆",71=&gt;"台湾",81=&gt;"香港",82=&gt;"澳门",91=&gt;"国外");
    $City        = substr($id, 0, 2);
    $BirthYear   = substr($id, 6, 4);
    $BirthMonth  = substr($id, 10, 2);
    $BirthDay    = substr($id, 12, 2);
    $Sex         = substr($id, 16,1) % 2 ;//男1 女0
    //$Sexcn       = $Sex?'男':'女';
    //地域验证
    if(is_null($oCity[$City])) {return false;}
    //出生日期效验
    if($BirthYear&gt;2078 || $BirthYear&lt;1900) {return false;}
    $RealDate    = strtotime($BirthYear.'-'.$BirthMonth.'-'.$BirthDay);
    if(date('Y',$RealDate)!=$BirthYear || date('m',$RealDate)!=$BirthMonth || date('d',$RealDate)!=$BirthDay) {
        return false;
    }
    return array('id'=&gt;$id,'location'=&gt;$oCity[$City],'Y'=&gt;$BirthYear,'m'=&gt;$BirthMonth,'d'=&gt;$BirthDay,'sex'=&gt;$Sex);
}</code></pre>
<p>16.获取二维数组中某个key的集合</p>
<pre><code class="php">$user = array( 0 =&gt; array( 'id' =&gt; 1, 'name' =&gt; '张三', 'email' =&gt; 'zhangsan@sina.com', ), 1 =&gt; array( 'id' =&gt; 2, 'name' =&gt; '李四', 'email' =&gt; 'lisi@163.com', ), 2 =&gt; array( 'id' =&gt; 5, 'name' =&gt; '王五', 'email' =&gt; '10000@qq.com', ), ...... );
$ids = array(); $ids = array_map('array_shift', $user);
$ids = array_column($user, 'id');//php5.5
$names = array(); $names = array_reduce($user, create_function('$v,$w', '$v[$w["id"]]=$w["name"];return $v;'));</code></pre>
<p>17.判断一个数是否为素数</p>
<pre><code class="php">function isPrime(number) {

   // If your browser doesn't support the method Number.isInteger of ECMAScript 6,
   // you can implement your own pretty easily
   if (typeof number !== 'number' || !Number.isInteger(number)) {
      // Alternatively you can throw an error.
      return false;
   }
 
   if (number &lt; 2) {
      return false;
   }
    
   if (number === 2) {
      return true;
   } else if (number % 2 === 0) {
      return false;
   }
 
   var squareRoot = Math.sqrt(number);
   for(var i = 3; i &lt;= squareRoot; i += 2) {
      if (number % i === 0) {
         return false;
      }
   }
 
   return true;
}
function isPrime($n) {//TurkHackTeam AVP production
    if ($n &lt;= 3) {
        return $n &gt; 1;
    } else if ($n % 2 === 0 || $n % 3 === 0) {
        return false;
    } else {
        for ($i = 5; $i * $i &lt;= $n; $i += 6) {
            if ($n % $i === 0 || $n % ($i + 2) === 0) {
                return false;
            }
        }
        return true;
    }
}</code></pre>
<p>18.闭包</p>
<pre><code class="php">var nodes = document.getElementsByTagName('button');
for (var i = 0; i &lt; nodes.length; i++) {
   nodes[i].addEventListener('click', (function(i) {
      return function() {
         console.log('You clicked element #' + i);
      }
   })(i));
}
//将函数移动到循环外部即可（创建了一个新的闭包对象）
function handlerWrapper(i) {
   return function() {
      console.log('You clicked element #' + i);
   }
}
 
var nodes = document.getElementsByTagName('button');
for (var i = 0; i &lt; nodes.length; i++) {
   nodes[i].addEventListener('click', handlerWrapper(i));
}</code></pre>
<p>19.事件循环 Event Loop</p>
<pre><code class="php">function printing() {
   console.log(1); 
   setTimeout(function() { console.log(2); }, 1000); 
   setTimeout(function() { console.log(3); }, 0); 
   console.log(4);
}
 //即使setTimeout的延迟为0，其回调也会被加入到那些没有延迟的函数队列之后。
printing();//1432</code></pre>
<p>20.字典排序</p>
<pre><code class="php">def mysort():
    dic = {'a':31, 'bc':5, 'c':3, 'asd':4, 'aa':74, 'd':0}
    dict= sorted(dic.iteritems(), key=lambda d:d[1], reverse = True)
    print dict//[('aa', 74), ('a', 31), ('bc', 5), ('asd', 4), ('c', 3), ('d', 0)]

</code></pre>
<p>21.数值缩写</p>
<pre><code class="php">var abbr = function (number) {
    var abbrList = ['', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'];
    var step = 1000;
    var i = 0;
    var j = abbrList.length;

    while (number &gt;= step &amp;&amp; ++i &lt; j) {
        number = number / step;
    }

    if (i === j) {
        i = j - 1;
    }
    

    return number + abbrList[i];
};</code></pre>
<p>22.数字千位分隔符</p>
<pre><code class="php">var format = function (number) {
    return String(number).replace(/(\d)(?=(\d{3})+$)/g, '$1,');
};
</code></pre>
<p>23.实现随机颜色值</p>
<pre><code class="php">var randomColor = function () {
    var letters = '0123456789ABCDEF';
    var ret = '#';

    for (var i = 0; i &lt; 6; i++) {
        ret += letters[Math.round(Math.random() * 15)];
    }

    return ret;
};
var randomColor = function () {
    return '#' + Math.random().toString(16).substr(2, 6);
};</code></pre>
<p>24.时间格式化输出</p>
<pre><code class="php">//formatDate(new Date(1409894060000), 'yyyy-MM-dd HH:mm:ss 星期w') 2014-09-05 13:14:20 星期五
function formatDate(oDate, sFormation) {
    var obj = {
        yyyy:oDate.getFullYear(),
        yy:(""+ oDate.getFullYear()).slice(-2),//非常精辟的方法
        M:oDate.getMonth()+1,
        MM:("0"+ (oDate.getMonth()+1)).slice(-2),
        d:oDate.getDate(),
        dd:("0" + oDate.getDate()).slice(-2),
        H:oDate.getHours(),
        HH:("0" + oDate.getHours()).slice(-2),
        h:oDate.getHours() % 12,
        hh:("0"+oDate.getHours() % 12).slice(-2),
        m:oDate.getMinutes(),
        mm:("0" + oDate.getMinutes()).slice(-2),
        s:oDate.getSeconds(),
        ss:("0" + oDate.getSeconds()).slice(-2),
        w:['日', '一', '二', '三', '四', '五', '六'][oDate.getDay()]
    };
    return sFormation.replace(/([a-z]+)/ig,function($1){return obj[$1]});
}</code></pre>
<p>25.斐波那契数列</p>
<pre><code class="php">function fibonacci(n) {
    if(n ==1 || n == 2){
        return 1
    }
    return fibonacci(n - 1) + fibonacci(n - 2);
}</code></pre>
<p>26.数组去重</p>
<pre><code class="php">
Array.prototype.distinct=function(){
    var arr=[];
    var obj={};
    for(var i=0;i&lt;this.length;i++){
        if(obj[this[i]]==undefined)
            obj[this[i]]=this[i];
        else if(obj[this[i]])
            arr.push(this[i]);
    }
    return arr;
 }</code></pre>
<p>27.删除元素</p>
<pre><code class="php">function array_delete($array, $element) {
    return array_diff($array, [$element]);
   // if(($key = array_search($array, $element)) !== false) {
      //  unset($array[$key]);
   // }
//$array = array_filter($array, function($e) use ($del_val) {
 //   return ($e !== $del_val);
//});
//$array = array(14,22,37,42,58,61,73,82,96,10);
//array_splice($array, array_search(58, $array ), 1);
}

array_delete( [312, 401, 1599, 3], 401 ) // returns [312, 1599, 3]
</code></pre>
<p>28.RandomString</p>
<pre><code class="php">def random_string(length):
    return ''.join(random.choice(string.letters + string.digits) for i in xrange(length))


function generateRandomString($length = 10) {
    $characters = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    $charactersLength = strlen($characters);
    $randomString = '';
    for ($i = 0; $i &lt; $length; $i++) {
        $randomString .= $characters[rand(0, $charactersLength - 1)];
    }
    return $randomString;
}
//$randomString = substr(str_shuffle("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"), 0, $length);
//$string = bin2hex(openssl_random_pseudo_bytes(10));20 char long hexdec string</code></pre>
<p>29.保存文件</p>
<pre><code class="php">$ch = curl_init('http://example.com/image.php');
$fp = fopen('/my/folder/flower.gif', 'wb');
curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_exec($ch);
curl_close($ch);
fclose($fp);
</code></pre>
<p>30.插入数组元素</p>
<pre><code class="php">function array_insert(&amp;$array, $position, $insert)
{
    if (is_int($position)) {
        array_splice($array, $position, 0, $insert);
    } else {
        $pos   = array_search($position, array_keys($array));
        $array = array_merge(
            array_slice($array, 0, $pos),
            $insert,
            array_slice($array, $pos)
        );
    }
}
$arr = [
    "name"  =&gt; [
        "type"      =&gt; "string",
        "maxlength" =&gt; "30",
    ],
    "email" =&gt; [
        "type"      =&gt; "email",
        "maxlength" =&gt; "150",
    ],
];

array_insert(
    $arr,
    "email",
    [
        "phone" =&gt; [
            "type"   =&gt; "string",
            "format" =&gt; "phone",
        ],
    ]
);
// -&gt;
array (
  'name' =&gt;
  array (
    'type' =&gt; 'string',
    'maxlength' =&gt; '30',
  ),
  'phone' =&gt;
  array (
    'type' =&gt; 'string',
    'format' =&gt; 'phone',
  ),
  'email' =&gt;
  array (
    'type' =&gt; 'email',
    'maxlength' =&gt; '150',
  ),
)</code></pre>
<p>31.验证ip</p>
<pre><code class="php">
function validate_ip($ip)
    {
        if (filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_NO_PRIV_RANGE) === false)
            return false;
        if (filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_NO_RES_RANGE) === false)
            return false;
        if (filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_IPV4) === false &amp;&amp; filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_IPV6) === false)
            return false;

        return true;
    }
    function validate_ip($ip)
{
    if (filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE) === false)
    {
        return false;
    }

    self::$ip = sprintf('%u', ip2long($ip)); // you seem to want this

    return true;
}</code></pre>
<p>32.get ip</p>
<pre><code class="php">function get_ip_address(){
    foreach (array('HTTP_CLIENT_IP', 'HTTP_X_FORWARDED_FOR', 'HTTP_X_FORWARDED', 'HTTP_X_CLUSTER_CLIENT_IP', 'HTTP_FORWARDED_FOR', 'HTTP_FORWARDED', 'REMOTE_ADDR') as $key){
        if (array_key_exists($key, $_SERVER) === true){
            foreach (explode(',', $_SERVER[$key]) as $ip){
                $ip = trim($ip); // just to be safe

                if (filter_var($ip, FILTER_VALIDATE_IP, FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE) !== false){
                    return $ip;
                }
            }
        }
    }
}</code></pre>
<p>33.选出最长的单词</p>
<pre><code class="php">function LongestWord(sen) {
    var words = sen.match(/\w+/g);
    if (words !== null) {
        var maxWords = {
            index: 0,
            length: 0
        };
        for (var i = 0, length = words.length; i &lt; length; i++) {
            if (words[i].length &gt; maxWords.length) {
                maxWords = {
                    index: i,
                    length: words[i].length
                }
            }
        }
        return words[maxWords.index];
    }
    return words;
}</code></pre>
<p>34.map</p>
<pre><code class="php">var oldArr = [{first_name:"Colin",last_name:"Toh"},{first_name:"Addy",last_name:"Osmani"},{first_name:"Yehuda",last_name:"Katz"}];

function getNewArr(){
        
    return oldArr.map(function(item,index){
        item.full_name = [item.first_name,item.last_name].join(" ");
        return item;
    });
    
}
</code></pre>
<p>35.统计一个数组中有多少个不重复的单词</p>
<pre><code class="php">var arr = ["apple","orange","apple","orange","pear","orange"];
//https://github.com/es-shims/es5-shim
function getWordCnt(){
    var obj = {};
    
    for(var i= 0, l = arr.length; i&lt; l; i++){
        var item = arr[i];
        obj[item] = (obj[item] +1 ) || 1;//obj[item]为undefined则返回1
    }
    
    return obj;
}
function getWordCnt(){
    return arr.reduce(function(prev,next){
        prev[next] = (prev[next] + 1) || 1;
        return prev;
    },{});
}</code></pre>
<p>36.约瑟夫环</p>
<pre><code class="php">function yuesefu($n,$m) {  
    $r=0;  
    for($i=2; $i&lt;=$n; $i++) {
        $r=($r+$m)%$i;  
    }
    return $r+1;  
}  
echo yuesefu(10,3)."是猴王";</code></pre>
<p>37.判断一个字符串中的字符是否都在另一个中出现</p>
<pre><code class="php">function charsissubset($h, $n) {
    return preg_match('/[^' . preg_quote($h) . ']/u', $n) ? 0 : 1;
}

echo charsissubset('abcddcba', 'abcde'); // false
echo charsissubset('abcddcba', 'abcd'); // true
echo charsissubset('abcddcba', 'badc'); // true
echo charsissubset('汉字', '字'); // true
echo charsissubset('汉字', '漢字'); // false</code></pre>
<p>38.add(2)(3)(4)</p>
<pre><code class="php">function add(a) {
  var temp = function(b) {
    return add(a + b);
  }
  temp.valueOf = temp.toString = function() {
    return a;
  };
  return temp;
}
var ans = add(2)(3)(4);//9
function add(num){
  num += ~~add;
  add.num = num;
  return add;
}
add.valueOf = add.toString = function(){return add.num};
var ans = add(3)(4)(5)(6);  // 18</code></pre>
<p>39.打印出Fibonacci数</p>
<pre><code class="php">function fn(n) {
  var a = [];
  a[0] = 0, a[1] = 1;
  for(var i = 2; i &lt; n; i++)
    a[i] = a[i - 1] + a[i - 2];
  for(var i = 0; i &lt; n; i++)
    console.log(a[i]);
}</code></pre>
<p>40.把URL参数解析为一个对象</p>
<pre><code class="php">function parseQueryString(url) {
  var obj = {};
  var a = url.split('?');
  if(a.length === 1) return obj;
  var b = a[1].split('&amp;');
  for(var i = 0, length = b.length; i &lt; length; i++) {
    var c = b[i].split('=');
    obj[c[0]] = c[1];
  }
  return obj;
}
var url = 'http://witmax.cn/index.php?key0=0&amp;key1=1&amp;key2=2';
var obj = parseQueryString(url);
console.log(obj.key0, obj.key1, obj.key2);  // 0 1 2 
</code></pre>
<p>41.判断数据类型</p>
<pre><code class="php">function isNumber(obj) {
    return Object.prototype.toString.call(obj) === '[object Number]'
}//对于NaN也返回true
function isNumber(obj) {
    return obj === +obj
}
// 判断字符串
function isString(obj) {
    return obj === obj+''
}
// 判断布尔类型
function isBoolean(obj) {
    return obj === !!obj
}</code></pre>
<p>42.javascript sleep</p>
<pre><code class="php">function sleep(numberMillis) {
    var now = new Date();
    var exitTime = now.getTime() + numberMillis;
    while (true) {
        now = new Date();
        if (now.getTime() &gt; exitTime)
        return;
    }
}</code></pre>
<p>43.爬虫</p>
<pre><code class="php">def splider():
    # -*- coding:utf-8 -*-
    #发送data表单数据
    import urllib2
    import urllib
    url = "http://www.someserver.com/register.cgi"
    values = {
        'name' : 'Andrew',
        'location' : 'NJU',
        'language' : 'Python'
    }
    user_agent = 'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)' 
    header = {'User-Agent' : user_agent}
    data = urllib.urlencode(values) #data数据需要编码成标准形式
    #print data
    http_handler = urllib2.HTTPHandler(debuglevel = 1)#Debug log
    https_handler = urllib2.HTTPSHandler(debuglevel = 1)
    opener = urllib2.build_opener(http_handler, https_handler)
    urllib2.install_opener(opener)
    req = urllib2.Request(url, data) #发送请求同时传送data表单
    #req = urllib2.Request(url, data, header) #url 表单数据 伪装头部
    reponse = urllib2.urlopen(req, timeout=10) #接受反馈数据
    html = reponse.read() #读取反馈数据
    print response.info()
    print response.getcode()
    redirected = response.geturl() == url
    """
    full_url = url + '?' + data
    data = urllib2.open(full_url)
    """
    #返回错误码, 200不是错误, 不会引起异常
    headers = {
    'Referer': 'http://www.cnbeta.com/articles'
    }
    proxy_handler = urllib2.ProxyHandler({"http" : 'http://some-proxy.com:8080'})
    opener = urllib2.build_opener(proxy_handler)
    urllib2.install_opener(opener)  #urllib2.install_opener() 会设置 urllib2 的全局 opener
    req = urllib2.Request(
    url = 'http://secure.verycd.com/signin/*/http://www.verycd.com/',
    data = post_data, 
    headers = headers
    )
    try:
        urllib2.urlopen(req)
    except urllib2.HTTPError, e:
        print e.code
        #print e.read()</code></pre>
<p>44.判断数据类型</p>
<pre><code class="php">function type(o) {
    var t, c, n;
    if (o === null) 
        return "null";
    if (o !== o)
        return "nan";
    if ((t = typeof o) !== "object") 
        return t;  // 识别原始值的类型和函数
    if ((c = classof(o)) !== "Object")
        return c;  // 识别出大多数内置类型
    if (o.constructor &amp;&amp; typeof o.constructor === "function" &amp;&amp;
        (n = o.constructor.getName()))
        return n;  //如果对象构造函数名字存在, 则返回
    return "Object";  // 无法识别类型返回"Object"
}
function classof(o) {
    return Object.prototype.toString.call(o).slice(8, -1);
}
Function.prototype.getName = function() {
    if ("name" in this)
        return this.name;
    return this.name = this.toString().match(/function\s*([^(]*)\(/)[1];
}</code></pre>
<p>45.实现千分位分隔</p>
<pre><code class="php">function mysplit(s){
        if(/[^0-9\.]/.test(s)) return "invalid value";
        s=s.replace(/^(\d*)$/,"$1.");
        s=(s+"00").replace(/(\d*\.\d\d)\d*/,"$1");
        s=s.replace(".",",");
        var re=/(\d)(\d{3},)/;
        while(re.test(s))
            s=s.replace(re,"$1,$2");
        s=s.replace(/,(\d\d)$/,".$1");
        return "￥" + s.replace(/^\./,"0.")
    }</code></pre>
<p>46.随机产生颜色</p>
<pre><code class="php">function randomVal(val){
        return Math.floor(Math.random()*(val + 1));
    }

    function randomColor(){
        return 'rgb(' + randomVal(255) + ',' + randomVal(255) + ',' + randomVal(255) + ')';
    }</code></pre>
<p>47.生成随机的IP地址，规则类似于192.168.11.0/24</p>
<pre><code class="php">RANDOM_IP_POOL=['192.168.10.222/0']
def __get_random_ip():
    str_ip = RANDOM_IP_POOL[random.randint(0,len(RANDOM_IP_POOL) - 1)]
    str_ip_addr = str_ip.split('/')[0]
    str_ip_mask = str_ip.split('/')[1]
    ip_addr = struct.unpack('&gt;I',socket.inet_aton(str_ip_addr))[0]
    mask = 0x0
    for i in range(31, 31 - int(str_ip_mask), -1):
        mask = mask | ( 1 &lt;&lt; i)
    ip_addr_min = ip_addr &amp; (mask &amp; 0xffffffff)
    ip_addr_max = ip_addr | (~mask &amp; 0xffffffff)
    return socket.inet_ntoa(struct.pack('&gt;I', random.randint(ip_addr_min, ip_addr_max)))</code></pre>
<p>48.倒计时</p>
<pre><code class="php">var total = 500;
var timer = null;

var tiktock = document.getElementById('tiktock');
var btn = document.getElementById('btn');

function countdown(){
    timer = setInterval(function(){
        total--;
        if (total&lt;=0) {
            clearInterval(timer);
            tiktock.innerHTML= "0:00";
        }else{
            var ss = Math.floor(total/100);
            var ms = total-Math.floor(total/100)*100;
            tiktock.innerHTML=ss + ":" + ms;
        }
    },10);
};
btn.addEventListener('click', countdown, false);
</code></pre>
<p>49.[1,2,3] -&gt;'{1,2,3}'</p>
<pre><code class="php">class intSet(object):

def __init__(self):
    # creat an empty set of integers
    self.vals = []

def insert(self, e):
    # assume e is an interger, and insert it 
    if not(e in self.vals):
        self.vals.append(e)

def member(self, e):
    return e in self.vals

def remove(self, e):
    try:
        self.vals.remove(e)
    except:
        raise ValueError(str(e) + 'not found')


def __str__(self):
    # return a string representation of self
    self.vals.sort()
    return "{" + ','.join([str(e) for e in self.vals]) + "}"</code></pre>
<p>50.转义过滤</p>
<pre><code class="php">//纯数字的参数intval强制取整
//其他参数值进行过滤或者转义
//filter_input() 函数来过滤一个 POST 变量
if (!filter_input(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL))
 {
 echo "E-Mail is not valid";
 }
else
 {
 echo "E-Mail is valid";
 }
    protected function zaddslashes($string, $force = 0, $strip = FALSE)
    {   
        if (!defined('MAGIC_QUOTES_GPC'))
        {   
         define('MAGIC_QUOTES_GPC', '');
        }   
        if (!MAGIC_QUOTES_GPC || $force)
        {   
         if (is_array($string)) {
             foreach ($string as $key =&gt; $val)
             {   
                 $string[$key] = $this-&gt;zaddslashes($val, $force, $strip);
             }   
         }   
         else
         {   
             $string = ($strip ? stripslashes($string) : $string);
             $string = htmlspecialchars($string);
         }   
        }   
        return $string;
     }</code></pre>
<p>51.构造IP</p>
<pre><code class="php">function getIPaddress()
{
    $IPaddress = '';
    if (isset($_SERVER)) {
        if (isset($_SERVER["HTTP_X_FORWARDED_FOR"])) {
            $IPaddress = $_SERVER["HTTP_X_FORWARDED_FOR"];
        } else if (isset($_SERVER["HTTP_CLIENT_IP"])) {
            $IPaddress = $_SERVER["HTTP_CLIENT_IP"];
        } else {
            $IPaddress = $_SERVER["REMOTE_ADDR"];
        }
    } else {
        if (getenv("HTTP_X_FORWARDED_FOR")) {
            $IPaddress = getenv("HTTP_X_FORWARDED_FOR");
        } else if (getenv("HTTP_CLIENT_IP")) {
            $IPaddress = getenv("HTTP_CLIENT_IP");
        } else {
            $IPaddress = getenv("REMOTE_ADDR");
        }
    }
    return $IPaddress;
}
function curlPost($url, $post='', $autoFollow=0){
        $ch = curl_init();
        $user_agent = 'Safari Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_1) AppleWebKit/537.73.11 (KHTML, like Gecko) Version/7.0.1 Safari/5
        curl_setopt($ch, CURLOPT_USERAGENT, $user_agent);
        
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
        curl_setopt($ch, CURLOPT_HEADER, 0); 
        curl_setopt($ch, CURLOPT_HTTPHEADER, array('X-FORWARDED-FOR:61.135.169.125', 'CLIENT-IP:'.getIPaddress()));  //构造IP
        curl_setopt($ch, CURLOPT_REFERER, "http://www.baidu.com/");   //构造来路
        curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'GET');
        if($autoFollow){
            curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);  //启动跳转链接
            curl_setopt($ch, CURLOPT_AUTOREFERER, true);  //多级自动跳转
        }   
        //  
        if($post!=''){
            curl_setopt($ch, CURLOPT_POST, 1);//post提交方式
            curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
        }   
        
        $output = curl_exec($ch);
        curl_close($ch);
        return $output;
    }</code></pre>
<p>52.文件名生成唯一</p>
<pre><code class="php">function unique_filename() {
    $time = !empty($_SERVER['REQUEST_TIME_FLOAT']) ? $_SERVER['REQUEST_TIME_FLOAT'] : mt_rand();
    $addr = !empty($_SERVER['REMOTE_ADDR'])        ? $_SERVER['REMOTE_ADDR']        : mt_rand();
    $port = !empty($_SERVER['REMOTE_PORT'])        ? $_SERVER['REMOTE_PORT']        : mt_rand();
    $ua   = !empty($_SERVER['HTTP_USER_AGENT'])    ? $_SERVER['HTTP_USER_AGENT']    : mt_rand();
    return md5(uniqid(mt_rand(), true).$time.$addr.$port.$ua.mt_rand());
}
</code></pre>
<p>53.<a href="http://stackoverflow.com/questions/8336308/how-to-do-a-php-hook-system" rel="nofollow noreferrer">PHP实现钩子和插件系统</a></p>
<pre><code class="php">/**
 * Attach (or remove) multiple callbacks to an event and trigger those callbacks when that event is called.
 * 绑定或移除多个回调函数到事件,当事件被调用时触发回调函数.
 *
 * @param string $event name
 * @param mixed  $value the optional value to pass to each callback
 * @param mixed  $callback the method or function to call - FALSE to remove all callbacks for event
 */
function event($event, $value = NULL, $callback = NULL) {
    static $events;
    if($callback !== NULL) {
        if($callback) {
            $events[$event][] = $callback; // 添加事件
        } else {
            unset($events[$event]); // 移除事件里所有的回调函数
        }
    } else if(isset($events[$event])) {
        foreach($events[$event] as $function) {
            $value = call_user_func($function, $value); // 调用事件
        }
        return $value;
    }
}
// 添加事件
event('filter_text', NULL, function($text) { return htmlspecialchars($text); });
event('filter_text', NULL, function($text) { return nl2br($text); });
// 移除事件里所有的回调函数
// event('filter_text', NULL, FALSE);
// 调用事件
$text = event('filter_text', $_POST['text']);</code></pre>
<p>54.字符串首字母大写的实现方式</p>
<pre><code class="php">String.prototype.firstUpperCase = function(){
    return this.replace(/\b(\w)(\w*)/g, function($0, $1, $2) {
        return $1.toUpperCase() + $2.toLowerCase();
    });
}
//这只能改变字符串首字母
String.prototype.firstUpperCase=function(){
    return this.replace(/^\S/,function(s){return s.toUpperCase();});
}</code></pre>
<p>55.获取url参数</p>
<pre><code class="php"> function getQueryString(key){
        var reg = new RegExp("(^|&amp;)"+key+"=([^&amp;]*)(&amp;|$)");
        var result = window.location.search.substr(1).match(reg);
        return result?decodeURIComponent(result[2]):null;
      }
function getRequest() {   
       var url = window.location.search; //获取url中"?"符后的字串   
       var theRequest = new Object();   
       if (url.indexOf("?") != -1) {   
          var str = url.substr(1);   
          strs = str.split("&amp;");   
          for(var i = 0; i &lt; strs.length; i ++) {   
             theRequest[strs[i].split("=")[0]]=decodeURI(strs[i].split("=")[1]); 

          }   
       }   
       return theRequest;   
    }</code></pre>
<p>56.过滤</p>
<pre><code class="php">var array = [
    {
        "title": 123,
        "num": 1,
        "type": [{"name": 'A', "num": 1}, {"name": 'B', "num": 1}, {"name": 'C', "num": 0}]
    }, {
        "title": 321,
        "num": 1,
        "type": [{"name": 'D', "num": 0}, {"name": 'E', "num": 1}, {"name": 'F', "num": 0}]
    }];

array.forEach(function (x) {
    x.type = x.type.filter(function (y) {
        return y.num != 0;
    });
});
</code></pre>
<p>57.随机生成-50到50之间的不包括0的整数</p>
<pre><code class="php">function my_rand(){
    $num = mt_rand(1, 50); 
    $rand = mt_rand(1, 10);

    return $rand &gt; 4 ? $num : -$num;//控制生成正负数的比例为4：6
}</code></pre>
<p>58.时间对比</p>
<pre><code class="php">function compareDate(date1, date2){
      var  difArr, unitArr;

      date1 = new Date(date1);
      date2 = new Date(date2);
      difArr = [date1.getFullYear() - date2.getFullYear(), date1.getMonth() -date2.getMonth(),date1.getDate() - date2.getDate(),date1.getHours() - date2.getHours(), date1.getMinutes() - date2.getMinutes(),date1.getSeconds() - date2.getSeconds()];
      unitArr = ['年','月','日','时','分','秒']
      for(var i = 0; i &lt; 6;i++){
        if(difArr[i] !== 0){
          return Math.abs(difArr[i]) + unitArr[i];
        }
      }
    }</code></pre>
<p>59.数组去重</p>
<pre><code class="php">//传入数组
  function unique(arr){
    var tmpArr = [];
    for(var i=0; i&lt;arr.length; i++){
      //如果当前数组的第i已经保存进了临时数组，那么跳过，
      //否则把当前项push到临时数组里面
      if(tmpArr.indexOf(arr[i]) == -1){
        tmpArr.push(arr[i]);
      }
    }
    return tmpArr;
  }
</code></pre>
<p>60.继承</p>
<pre><code class="php">/*
 * 基类，定义属性
 */
function Person(name, age) {
    this.name = name;
    this.age = age;
}

/*
 * 基类，定义方法
 */
Person.prototype.selfIntroduce = function () {
    console.log("name: " + this.name);
    console.log("age: " + this.age);
}

/*
 * 子类，定义子类的属性
 */
function Student(name, age, school) {
  // 调用基类的构造函数
    Person.call(this, name, age);
    this.school = school;
}

// 使子类继承基类
Student.prototype = new Person();

/*
 * 定义子类的方法
 */
Student.prototype.goToSchool = function() {
  // some code..
}

/*
 * 扩展并调用了超类的方法
 */
Student.prototype.selfIntroduce = function () {
    Student.prototype.__proto__.selfIntroduce.call(this);
    console.log("school: " + this.school);
}

var student = new Student("John", 22, "My School");
student.selfIntroduce();
</code></pre>
<p>61.<a href="http://segmentfault.com/a/1190000003020776">Unicode和Utf-8编码的互相转换</a></p>
<pre><code class="php">/**
 * utf8字符转换成Unicode字符
 * @param  [type] $utf8_str Utf-8字符
 * @return [type]           Unicode字符
 */
function utf8_str_to_unicode($utf8_str) {
    $unicode = 0;
    $unicode = (ord($utf8_str[0]) &amp; 0x1F) &lt;&lt; 12;
    $unicode |= (ord($utf8_str[1]) &amp; 0x3F) &lt;&lt; 6;
    $unicode |= (ord($utf8_str[2]) &amp; 0x3F);
    return dechex($unicode);
}

/**
 * Unicode字符转换成utf8字符
 * @param  [type] $unicode_str Unicode字符
 * @return [type]              Utf-8字符
 */
function unicode_to_utf8($unicode_str) {
    $utf8_str = '';
    $code = intval(hexdec($unicode_str));
    //这里注意转换出来的code一定得是整形，这样才会正确的按位操作
    $ord_1 = decbin(0xe0 | ($code &gt;&gt; 12));
    $ord_2 = decbin(0x80 | (($code &gt;&gt; 6) &amp; 0x3f));
    $ord_3 = decbin(0x80 | ($code &amp; 0x3f));
    $utf8_str = chr(bindec($ord_1)) . chr(bindec($ord_2)) . chr(bindec($ord_3));
    return $utf8_str;
}
</code></pre>
<p>62.gzip编码</p>
<pre><code class="php">function curl_get($url, $gzip=false){
 $curl = curl_init($url);
 curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
 curl_setopt($curl, CURLOPT_CONNECTTIMEOUT, 10);
 if($gzip) curl_setopt($curl, CURLOPT_ENCODING, "gzip"); // 关键在这里
 $content = curl_exec($curl);
 curl_close($curl);
 return $content;
}
$url = 'http://api.stackexchange.com/2.2/tags?order=asc&amp;sort=popular&amp;site=stackoverflow&amp;tag=qt';
//$data = file_get_contents("compress.zlib://".$url);</code></pre>
<p>63.<a href="http://in355hz.iteye.com/blog/1860787" rel="nofollow noreferrer">Python中文时间</a></p>
<pre><code class="php">#!/usr/bin/env 
# -*- coding: utf-8 -*-

from datetime import datetime
nt=datetime.now()
print(nt.strftime('%Y年%m月%d日 %H时%M分%S秒').decode('utf-8'))#2015年08月10日 11时25分04秒
print(nt.strftime('%Y{y}%m{m}%d{d}').format(y='年', m='月', d='日'))</code></pre>
<p>64.list分组,按照下标顺序分成3组：[3, 8, 9] [4, 1, 10] [6, 7, 2, 5]</p>
<pre><code class="php">a=[1,2,3,4,5,6,7,8,9,10]
[a[i:i+3] for i in xrange(0,len(a),3)]</code></pre>
<p>64.<a href="http://segmentfault.com/a/1190000000725185">curl上传文件</a></p>
<pre><code class="php">$ch = curl_init();

$data = array('name' =&gt; 'Foo', 'file' =&gt; '@/home/vagrant/test.png');

curl_setopt($ch, CURLOPT_URL, 'http://localhost/test/curl/load_file.php');
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_SAFE_UPLOAD, false);    // 5.6 给改成 true了, 弄回去 
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

curl_exec($ch);
</code></pre>
<p>65.<a href="http://www.powerxing.com/ip-convert-to-int-in-php/" rel="nofollow noreferrer">IP地址转换为整数型</a></p>
<pre><code class="php">$ipArr  = explode('.',$_SERVER['REMOTE_ADDR']);
$ip     = $ipArr[0] * 0x1000000
        + $ipArr[1] * 0x10000
        + $ipArr[2] * 0x100
        + $ipArr[3];
        //数字型的IP转为字符型:
$ipVal = $row['client_IP'];
$ipArr = array(
        0 =&gt; floor(  $ipVal / 0x1000000) );
$ipVint   = $ipVal-($ipArr[0]*0x1000000); // for clarity
$ipArr[1] = ($ipVint &amp; 0xFF0000)  &gt;&gt; 16;
$ipArr[2] = ($ipVint &amp; 0xFF00  )  &gt;&gt; 8;
$ipArr[3] =  $ipVint &amp; 0xFF;
$ipDotted = implode('.', $ipArr);</code></pre>
<p>66.保存base64图片</p>
<pre><code class="php">$base64_url = 'data:image/jpeg;base64,xxxxxxxxxxxxxxxxxxxxxx';
$base64_body = substr(strstr($base64_url,','),1);
$data= base64_decode($base64_body );

//存储or创建图片：

file_put_contents($file_path,$data);

或$image = imagecreatefromstring($data);
 $size  =  getimagesizefromstring ( $data);var_dump($size);

//读取图片文件，转换成base64编码格式
$image_file = 'test.jpg';
$image_info = getimagesize($image_file);
$base64_image_content = "data:{$image_info['mime']};base64," . chunk_split(base64_encode(file_get_contents($image_file)));
 
//保存base64字符串为图片
//匹配出图片的格式
if (preg_match('/^(data:\s*image\/(\w+);base64,)/', $base64_image_content, $result)){
  $type = $result[2];
  $new_file = "./test.{$type}";
  if (file_put_contents($new_file, base64_decode(str_replace($result[1], '', $base64_image_content)))){
    echo '新文件保存成功：', $new_file;
  }
 
}
?&gt;
 
&lt;img src="&lt;?php echo $base64_image_content;?&gt;" /&gt;</code></pre>
<p>67.日志记录print_r( $value, true )</p>
<pre><code class="php">/**

错误日志类
*/
class C_Log
{
/**

日志保存目录

@var string
*/
private $path = '';
/**

只能运行一个实例

@var [type]
*/
private static $instance;
/**

构造函数

初始化日志文件地址
*/
function __construct($path)
{
$this-&gt;path = $path;
}

public function logPrint($name,$value)
{

   //获取时间
   $_o = date('Y-m-d H:m:s',time())."\r\n";
   $_o .= "==".  $name . "==";
   //打印内容
   if( is_array( $value ) || is_object( $value ) ){
       $_o .= print_r( $value, true ). "\r\n";
     } else {
         $_o .= $value. "\r\n";
     }
     //输出到文件
     $this-&gt;_log($_o);
}
/**fdf

打印日志

@return [type] [description]
*/
private function _log($log){
error_log($log,3,$this-&gt;path);
}
/**

输出日志

@return [type] [description]
*/
public static function log($name, $value)
{
if (empty(self::$instance)) {

   self::$instance = new C_Log(__DIR__."/error_log.log");
}
self::$instance-&gt;logPrint($name, $value);
}
}
</code></pre>
<p>68.过滤子类</p>
<pre><code class="php">function getByClass(parent, classname) {
    var tags = parent.getElementsByTagName('*');
    return [].filter.call(tags, function(t) {
        return t.classList.contains(classname);
    });
}
//

function getByClass(parent, classname) {
    return parent.querySelectorAll("." + classname);
}</code></pre>
<p>69.JSON.stringify</p>
<pre><code class="php">function setProp(obj) {
    for (var p in obj) {
        switch (typeof (obj[p])) {
            case 'object':
                setProp(obj[p]);
                break;
            case 'undefined':
                obj[p] = '';
                break;
        }
    }
    return obj;
}

JSON.stringify(setProp({ a: 1, b: 2, c: undefined }));//{"a":1,"b":2,"c":""}
</code></pre>
<p>70.判断用户的IP是否局域网IP</p>
<pre><code class="php">function is_local_ip($ip_addr = null) {
    if (is_null($ip_addr)) {
        $ip_addr = $_SERVER['REMOTE_ADDR'];
    }
    $ip = ip2long($ip_addr);
    return $ip &amp; 0xffff0000 == 0xc0a80000 // 192.168.0.0/16
        || $ip &amp; 0xfff00000 == 0xac100000 // 172.16.0.0/12
        || $ip &amp; 0xff000000 == 0xa0000000 // 10.0.0.0/8
        || $ip &amp; 0xff000000 == 0x7f000000 // 127.0.0.0/8
    ;
}</code></pre>
<p>71.遍历出当月的所有日子和星期</p>
<pre><code class="php">var d = new Date();         // 这是当天
d.setDate(1);               // 这就是1号
var weekday = d.getDay();   // 1号星期几，从星期天为0开始

d.setMonth(d.getMonth() + 1);
d.setDate(0);               // 这两句得到最当月最后一天
var end = d.getDate();      // 最后一天的日，比如8月就是31

var days = [];
for (var i = 0; i &lt; end; i++) {
    days[i] = {
        day: i + 1,
        week: (weekday + i) % 7
    }
}


console.log(days);</code></pre>
<p>72.<a href="http://dtsn.me/2013/03/12/downloading-data-from-localstorage/" rel="nofollow noreferrer">Downloading Data From localStorage</a></p>
<pre><code class="php">var myData = {
    'a': 'a',
    'b': 'b',
    'c': 'c'
};
// add it to our localstorage
localStorage.setItem('data', JSON.stringify(myData));

// encode the data into base64
base64 = window.btoa(localStorage.getItem('data'));

// create an a tag
var a = document.createElement('a');
a.href = 'data:application/octet-stream;base64,' + base64;
a.innerHTML = 'Download';

// add to the body
document.body.appendChild(a);
</code></pre>
<p>73."数据类型"判断函数</p>
<pre><code class="php">function datatypeof(arg){
    return Object.prototype.toString.call(arg).match(/\[object\s(\w+)\]/)[1];
}</code></pre>
<p>74.二维数组去除重复，重复值相加</p>
<pre><code class="php">$arr = array(
    array('id' =&gt; 123, 'name' =&gt; '张三', 'amount'=&gt;'1'),
    array('id' =&gt; 123, 'name' =&gt; '李四', 'amount' =&gt; '1'),
    array('id' =&gt; 124, 'name' =&gt; '王五', 'amount' =&gt; '1'),
    array('id' =&gt; 125, 'name' =&gt; '赵六', 'amount' =&gt; '1'),
    array('id' =&gt; 126, 'name' =&gt; '赵六', 'amount' =&gt; '2'),
    array('id' =&gt; 126, 'name' =&gt; '赵六', 'amount' =&gt; '2')
);

$new = array();

foreach($arr as $row){
    if(isset($new[$row['name']])){
        $new[$row['name']]['amount'] += $row['amount'];
    }else{
        $new[$row['name']] = $row;
    }
}
</code></pre>
<p>75.含有从属关系的元素重新排列</p>
<pre><code class="php">$arr = array(
    array('id'=&gt;21, 'pid'=&gt;0, 'name'=&gt;'aaa'),
    array('id'=&gt;22, 'pid'=&gt;0, 'name'=&gt;'bbb'),
    array('id'=&gt;23, 'pid'=&gt;0, 'name'=&gt;'ccc'),
    array('id'=&gt;24, 'pid'=&gt;23, 'name'=&gt;'ddd'),
    array('id'=&gt;25, 'pid'=&gt;23, 'name'=&gt;'eee'),
    array('id'=&gt;26, 'pid'=&gt;22, 'name'=&gt;'fff'),
    );

$temp=[];
foreach ($arr as $item)
{
    list($id,$pid,$name) = array_values($item); // 取出数组的值并分别生成变量

    if(array_key_exists($pid, $temp)) 
    // 检查临时数组$temp中是否存在键名与$pid的值相同的键
    {
        $temp[$pid]['child'][]=array('id'=&gt;$id,'pid'=&gt;$pid,'name'=&gt;$name);
        // 如果存在则新增数组至临时数组中键名为 $pid 的子元素 child 内
    }else
        $temp[$id]=array('id'=&gt;$id,'pid'=&gt;$pid,'name'=&gt;$name);
        // 如果不存在则新增数组至临时数组中并设定键名为 $id
}

$array = array_values($temp);
// 将临时数组中以 $id 为键名的键修改为数字索引

echo "&lt;pre&gt;";
print_r($array);
//or 
foreach ($arr as $item)
{
    if (array_key_exists($item['pid'], $temp))
    {       
        $temp[$item['pid']]['child'][]=$item;
    }else
        $temp[$item['id']]=$item;
}</code></pre>
<p>76.随机中文字符</p>
<pre><code class="php">//正则表达式匹配中文[\u4e00-\u9fa5]
//parseInt("4E00",16) 19968 parseInt("9FA5",16);20901
var randomHz=function(){
    eval( "var word=" +  '"\\u' + (Math.round(Math.random() * 20901) + 19968).toString(16)+'"');
    return word;
}
for(i=0;i&lt;100;i++){
    console.log(randomHz());
}</code></pre>
<p>77.jQuery解析url</p>
<pre><code class="php">$(document).ready(function () {
    var url = 'http://iwjw.com/codes/code-repository?id=12#top';
    var a = $('&lt;a&gt;', { href: url});
    var sResult = '&lt;b&gt;Protocol:&lt;/b&gt; ' + a.prop('protocol') + '&lt;br&gt;'     + '&lt;b&gt;Host name: &lt;/b&gt;' + a.prop('hostname') + '&lt;br&gt;'
    + '&lt;b&gt;Path: &lt;/b&gt;' + a.prop('pathname') + '&lt;br&gt;'
    + '&lt;b&gt;Query: &lt;/b&gt;' + a.prop('search') + '&lt;br&gt;'
    + '&lt;b&gt;Hash: &lt;/b&gt;' + a.prop('hash');
    $('span').html(sResult);
});</code></pre>
<p>78.<a href="http://segmentfault.com/q/1010000000141170AB">用JS实现一个数组合并的方法（要求去重）</a></p>
<pre><code class="php">var arr1 = ['a'];
var arr2 = ['b', 'c'];
var arr3 = ['c', ['d'], 'e', undefined, null];

var concat = (function(){
  // concat arr1 and arr2 without duplication.
  var concat_ = function(arr1, arr2) {
    for (var i=arr2.length-1;i&gt;=0;i--) {
      arr1.indexOf(arr2[i]) === -1 ? arr1.push(arr2[i]) : 0;
    }
  };
  // concat arbitrary arrays.
  // Instead of alter supplied arrays, return a new one.
  return function(arr) {
    var result = arr.slice();
    for (var i=arguments.length-1;i&gt;=1;i--) {
      concat_(result, arguments[i]);
    }
    return result;
  };
}());
执行：concat(arr1, arr2, arr3)
返回：[ 'a', null, undefined, 'e', [ 'd' ], 'c', 'b' ]
var merge = function() {
    return Array.prototype.concat.apply([], arguments)
  }

merge([1,2,4],[3,4],[5,6]);
//[1, 2, 4, 3, 4, 5, 6]</code></pre>
<p>79.字节转化</p>
<pre><code class="php">function convert($size)
{
    $unit = array('b', 'kb', 'mb', 'gb', 'tb', 'pb');

    return @round($size / pow(1024, ($i = floor(log($size, 1024)))), 2) . ' ' . $unit[$i];
}
echo convert(memory_get_usage());
function cacheMem($key)
{
    static $mem = null;
    if ($mem === null) {
        $mem = new Memcache();
        $mem-&gt;connect('127.0.0.1', 11211);
    }

    $data = $mem-&gt;get($key);
    if (empty($data)) {
        $data = date('Y-m-d H:i:s');
        $mem-&gt;set($key, $data);
    }

    return $data;
}</code></pre>

                </div>
                                                
                <div class="clearfix mt10">
                    <ul class="article-operation list-inline pull-left mt15"><li><a target="_blank"href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><img class="mb5" src="https://static.segmentfault.com/v-5bebf0aa/global/img/creativecommons-cc.svg" height="20"/></a></li><li class="dropdown js__content-ops hidden-xs" data-module="article"
                                data-id="1190000002961545"
                                data-typetext="文章"><a href="javascript:void(0);" class="dropdown-toggle text-muted" data-toggle="dropdown"><i class="fa fa-ellipsis-h" aria-hidden="true"></i></a><ul class="dropdown-menu dropdown-menu-left"><li><a href="#911"
                                           data-toggle="modal"
                                           data-target="#911"
                                           data-action="report"
                                        >举报</a></li></ul></li></ul>
                    <div class="pull-right mt-10 hidden-xs">
                        <div class="widget-share__full" data-text="函数集"
 data-url="https://segmentfault.com/a/1190000002961545" data-shorturl="http://sfau.lt/b5mAA1"></div>


                    </div>
                </div>
                <div class="mt10 text-center mb30"><button type="button" id="mainLike" data-id="1190000002961545"
                                    class="btn btn-success btn-lg mr15 "><span id="mainLikeText">赞</span>&nbsp;&nbsp;<span class="seprator">|</span>&nbsp;&nbsp;
                                <span id="mainLikeNum">3 </span></button><button type="button" id="mainBookmark" data-type="article" data-id="1190000002961545"
                                    class="btn btn-default btn-lg "><span id="mainBookmarkText">收藏</span>&nbsp;&nbsp;<span class="seprator">|</span>&nbsp;&nbsp;<span id="mainBookmarkNum">15</span></button><br><button type="button" data-id="1190000002961545"
                                        class="btn btn-danger btn-lg mt15 article__reward-btn">
                                    赞赏支持
                                </button></div><div class="mt30 mb30 text-center article__reward-info"><span class="mr10">如果觉得我的文章对你有用，请随意赞赏</span></div>                
                                <script type='text/javascript'>
                    OA_show(3);
                </script>

                <h4 class="pt20 mb15 mt0 border-top">你可能感兴趣的</h4>

                
                <div class="mb15 block">
                    <script type='text/javascript'>
                        OA_show(4);
                    </script>
                </div>

                                <div id="paradigm-article-related"></div>

                
        <div class="comments--news comments--default comments--article 
    " 
    data-id="1190000002961545" data-user-id="" data-author-id="1030000000229278 "
         data-is-admin="null" id="goToReplyArea">
                    <div class="mb10 clearfix">
                <strong class="comments-stat pull-left mr10">3 条评论</strong>

                                                    <div class="btn-group btn-group-xs pull-right comments-sort btn-group-menu" role="menu">
                        <a href="javascript:;" 
                           class="btn btn-default active" data-sort="default">默认排序</a>
                        <a href="javascript:;" 
                           class="btn btn-default" data-sort="desc">时间排序</a>
                    </div>
                            </div>
                <div class="comments-container">
                                <div class="comments-list">
                <div class="comments-item" data-id="1050000003850073">
            <div class="pull-left">
                <a href="/u/quietin" target="_blank"><img class="avatar-32 " src="https://avatar-static.segmentfault.com/299/912/2999122515-55050efcc98f6_big64" alt=""></a>
            </div>
            <div class="comments-content">
                <div class="comment-trigger">
                    <div class="pull-right comment-option">
                                                <a href="#911" class="ml10" data-toggle="modal" data-target="#911" data-action="report" data-action-text="举报" data-module="comment" data-id="1050000003850073" data-typetext="评论" data-placement="top" title="举报"><span class="glyphicon glyphicon-flag" aria-hidden="true"></span></a>
                                            </div>
                    <strong><a target="_blank" href="/u/quietin">quietin</a></strong>
                    <span class="comments-isAuthor hide"></span>
                    <span class="comments-date">  ·  2015年10月13日</span>
                </div>

                <div class="fmt mb10"><p>不错的总结</p></div>

                <form action="/api/comment/1050000003850073/edit">
                    <div class="form-group">
                        <textarea class="editTextarea mono form-control mb10 hidden" rows="1" name="text" style="height: 28px; overflow: hidden; word-wrap: break-word;" >不错的总结</textarea>
                    </div>
                </form>

                <p class="comment-ops not-reply">
                    <span class="comments-zan ">
                        <i class="fa fa-thumbs-up mr4" aria-hidden="true"></i>
                        <span class="comments-zan-text">赞</span>
                        <span class="comments-zan-value"></span>
                    </span>
                    
                    <span class="ml15 comments-reply-btn">回复</span>

                    <span class="pull-right editBtns hidden">
                      <button class="btn btn-link btn-xs cancel" type="button">取消</button>
                      <button class="btn btn-primary btn-xs edit ml10" type="button">保存</button>
                    </span>
                </p>

                <div class="reply-list reply-list--empty">

                    
                    <div class="reply-item reply-item--ops" data-obj="obj">
                        <a class="reply-inner-btn" href="javascript:;">添加回复</a>
                        
                    </div>
                </div>


            </div>
        </div>
                <div class="comments-item" data-id="1050000003978533">
            <div class="pull-left">
                <a href="/u/tongbo" target="_blank"><img class="avatar-32 " src="https://avatar-static.segmentfault.com/907/591/907591587-56976d2fe8b08_big64" alt=""></a>
            </div>
            <div class="comments-content">
                <div class="comment-trigger">
                    <div class="pull-right comment-option">
                                                <a href="#911" class="ml10" data-toggle="modal" data-target="#911" data-action="report" data-action-text="举报" data-module="comment" data-id="1050000003978533" data-typetext="评论" data-placement="top" title="举报"><span class="glyphicon glyphicon-flag" aria-hidden="true"></span></a>
                                            </div>
                    <strong><a target="_blank" href="/u/tongbo">牙小木木</a></strong>
                    <span class="comments-isAuthor hide"></span>
                    <span class="comments-date">  ·  2015年11月11日</span>
                </div>

                <div class="fmt mb10"><p>知识都学杂啦，从萨达姆到母猪产后护理</p></div>

                <form action="/api/comment/1050000003978533/edit">
                    <div class="form-group">
                        <textarea class="editTextarea mono form-control mb10 hidden" rows="1" name="text" style="height: 28px; overflow: hidden; word-wrap: break-word;" >知识都学杂啦，从萨达姆到母猪产后护理</textarea>
                    </div>
                </form>

                <p class="comment-ops not-reply">
                    <span class="comments-zan ">
                        <i class="fa fa-thumbs-up mr4" aria-hidden="true"></i>
                        <span class="comments-zan-text">赞</span>
                        <span class="comments-zan-value"></span>
                    </span>
                    
                    <span class="ml15 comments-reply-btn">回复</span>

                    <span class="pull-right editBtns hidden">
                      <button class="btn btn-link btn-xs cancel" type="button">取消</button>
                      <button class="btn btn-primary btn-xs edit ml10" type="button">保存</button>
                    </span>
                </p>

                <div class="reply-list reply-list--empty">

                    
                    <div class="reply-item reply-item--ops" data-obj="obj">
                        <a class="reply-inner-btn" href="javascript:;">添加回复</a>
                        
                    </div>
                </div>


            </div>
        </div>
                <div class="comments-item" data-id="1050000005870940">
            <div class="pull-left">
                <a href="/u/wujunze" target="_blank"><img class="avatar-32 " src="https://avatar-static.segmentfault.com/338/111/3381119629-5a3f9b16f0b1c_big64" alt=""></a>
            </div>
            <div class="comments-content">
                <div class="comment-trigger">
                    <div class="pull-right comment-option">
                                                <a href="#911" class="ml10" data-toggle="modal" data-target="#911" data-action="report" data-action-text="举报" data-module="comment" data-id="1050000005870940" data-typetext="评论" data-placement="top" title="举报"><span class="glyphicon glyphicon-flag" aria-hidden="true"></span></a>
                                            </div>
                    <strong><a target="_blank" href="/u/wujunze">Panda</a></strong>
                    <span class="comments-isAuthor hide"></span>
                    <span class="comments-date">  ·  2016年07月04日</span>
                </div>

                <div class="fmt mb10"><p>收集整理的很详细   收藏了  mark</p></div>

                <form action="/api/comment/1050000005870940/edit">
                    <div class="form-group">
                        <textarea class="editTextarea mono form-control mb10 hidden" rows="1" name="text" style="height: 28px; overflow: hidden; word-wrap: break-word;" >收集整理的很详细   收藏了  mark</textarea>
                    </div>
                </form>

                <p class="comment-ops not-reply">
                    <span class="comments-zan ">
                        <i class="fa fa-thumbs-up mr4" aria-hidden="true"></i>
                        <span class="comments-zan-text">赞</span>
                        <span class="comments-zan-value"></span>
                    </span>
                    
                    <span class="ml15 comments-reply-btn">回复</span>

                    <span class="pull-right editBtns hidden">
                      <button class="btn btn-link btn-xs cancel" type="button">取消</button>
                      <button class="btn btn-primary btn-xs edit ml10" type="button">保存</button>
                    </span>
                </p>

                <div class="reply-list reply-list--empty">

                    
                    <div class="reply-item reply-item--ops" data-obj="obj">
                        <a class="reply-inner-btn" href="javascript:;">添加回复</a>
                        
                    </div>
                </div>


            </div>
        </div>
            </div>
    <div class="comments-loading hide">载入中...</div>
        <div class="comments-more hide"><a href="javascript:;">显示更多评论</a></div>
    

                                    <div class="comments-box" id="goToReplyEditor">
                <div class="pull-left">
                    <img class="avatar-32 "
                         src="https://static.segmentfault.com/v-5bebf0aa/global/img/user-128.png"
                         alt=""/>
                </div>
                <div class="comments-box-content">
                    <form action="/api/article/1190000002961545/comments/add">
                        <div class="form-group mb0">
                            <textarea name="text" rows="3" class="form-control"placeholder="文明社会，理性评论"></textarea>
                            <div class="mt15 text-right">
                                <button type="button" class="hide"></button>
                                <button class=" btn btn-primary" type="button">发布评论</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
                                                        </div>
    </div>


                                    
                
                

            </div><!-- /.main -->


            <div class="col-md-3 side hidden-sm hidden-xs mt30">
                                                
                <div class="mb25 hidden-md hidden-sm hidden-xs">
    <img src="https://static.segmentfault.com/sponsor/20181120.png" alt="Planets" usemap ="#gridsMap" width=255 height=136>
    <map name="gridsMap" id="gridsMap"></map>
    <div style="text-align: center;"><a style="text-align:center; color:#9E9E9E; font-size:12px" href="/sponsor">想在上方展示你的广告？</a></div>
            <script async src="https://static.segmentfault.com/sponsor/20181120.js"></script>
    </div>

                                <style>
                    .job-recommend-area a:not(:last-of-type) {margin-bottom:10px; display: block}
                    .job-recommend-area a:hover {text-decoration: none;}
                </style>
                <div class="hidden-md">
                    <div class="job-recommend">
                      <h3 class="job-title">推广链接</h3>
                      <div class="job-recommend-area">
                                                <script type='text/javascript'>
                            OA_show(7);
                            OA_show(9);
                            OA_show(10);
                            OA_show(15);
                            OA_show(16);
                        </script>
                      </div>
                    </div>
                    <style>
                    .job-recommend {margin-bottom: 30px;}
                    .job-title {
                        font-size: 14px;
                        color: #017E66;
                        font-weight: 500;
                        background: #BFE6D7;
                        margin: 0;
                        padding-top: 6px;
                        padding-bottom: 6px;
                        text-align: center;
                    }
                    .job-recommend-area {
                      padding: 13px;
                      border: 3px solid #EBF7F3;
                      border-top: none;
                    }
                    </style>
                    
                                    </div>

                                
                <div class="hidden-md ad-should-be-fixed">
                    <div class="mb25 block">
                        <script type='text/javascript'>
                            OA_show(1);
                        </script>
                    </div>
                </div>
                <div class="post-nav hidden-xs">
                    <div class="panel panel-default widget-outline">
                        <div class="panel-heading">目录</div>
                        <div class="panel-body">
                            <div class="nav-body" style="overflow:scroll">
                                <div class="highlight-title"></div>
                                <ul class="articleIndex"></ul>
                            </div>
                        </div>
                    </div>
                </div>

                
            </div><!-- /.side -->
        </div>
    </div>
</div>

<div id="shareToWeiboModal" class="modal" tabindex='-1'>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">×</span><span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title">分享</h4>
            </div>
            <div class="modal-body">
                <p class="sfModal-content">
                    分享到微博？
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default dont-likeweibo" data-dismiss="modal">取消</button>
                <a href="" id="shareLink" class="btn btn-primary done-btn" target="_blank"
                   onclick="$('#shareToWeiboModal').modal('hide')">分享</a>
            </div>
        </div>
    </div>
</div>


<div class="modal widget-911" id="911" tabindex='-1'>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal" type="button">
          <span aria-hidden="true">&times;</span>
          <span class="sr-only">Close</span>
        </button>
        <h4 class="modal-title"><span data-model="action"></span><span data-model="type"></span></h4>
      </div>
      <div class="modal-body">
        <form id="reportForm">
          <!-- 后台返回信息 -->
          <p class="alert alert-warning" data-model="returnMsg"></p>
          <div data-role="base">
            <p>
              <strong class="required">我要<span data-model="action"></span>该<span data-model="type"></span>，理由是：</strong>
            </p>
            <ul class="list-unstyled" data-model="list"></ul>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-default pull-left" type="button" data-role="back" style="display:none">返回重选</button>
                <button class="btn btn-default" data-dismiss="modal" type="button">取消</button>
        <button class="btn btn-primary" data-role="submit" type="button">提交</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div class="modal widget-seo" id="seo" tabindex='-1'>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" data-dismiss="modal" type="button">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title"><span data-model="action"></span><span data-model="type"></span></h4>
            </div>
            <div class="modal-body">
                <form id="seoForm">
                    <!-- 后台返回信息 -->
                    <p class="alert alert-warning" data-model="returnMsg"></p>
                    <div data-role="base">
                        <div class="form-group">
                            <label>SEO标题：</label><textarea style="min-height: 35px; width: 100%; max-height: 132px; overflow: hidden; overflow-wrap: break-word; height: 32px;" name="title" class="form-control" rows="1" placeholder="请输入SEO标题"></textarea>
                        </div>
                        <div class="form-group">
                            <label>SEO描述：</label><textarea style="min-height: 35px; max-height: 132px; overflow: hidden; overflow-wrap: break-word; height: 32px;" name="desc" class="form-control" rows="1" placeholder="请输入SEO描述"></textarea>
                        </div>
                        <div class="form-group">
                            <label>SEO keywords：</label><textarea style="min-height: 35px; max-height: 132px; overflow: hidden; overflow-wrap: break-word; height: 32px;" name="keywords" class="form-control" rows="1" placeholder="请输入SEO keywords"></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal" type="button">取消</button>
                <button class="btn btn-primary" data-role="submit" type="button">提交</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

    <div id="loginBanner"  class="hidden-sm hidden-xs loginBanner">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-7">
                <h1 class="title">在 SegmentFault，学习技能、解决问题</h1>
                <p class="desc">每个月，我们帮助 1000 万的开发者解决各种各样的技术问题。并助力他们在技术能力、职业生涯、影响力上获得提升。</p>
            </div>
            <div class="col-lg-3 col-lg-offset-3 col-md-4 col-md-offset-1">
                <form class="register-form clearfix" action="/api/user/phone/register">

                    
                    <a href="/user/register" class="SFLogin btn btn-lg btn-primary mr15">免费注册</a>
                    <a href="/user/login" class="SFRegister btn btn-lg btn-primary">立即登录</a>
                </form>
            </div>
        </div>
    </div>
    </div>






<footer id="footer">
    <div class="container">
        <div class="row hidden-xs">
            <dl class="col-sm-2 site-link">
                <dt>产品</dt>
                
                <dd><a href="/questions/hottest?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=热门问答">热门问答</a></dd>
                <dd><a href="/blogs/hottest?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=热门专栏">热门专栏</a></dd>
                <dd><a href="/lives?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=热门讲堂">热门讲堂</a></dd>
                <dd><a href="/events?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=最新活动">最新活动</a></dd>
                <dd><a href="/groups?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=圈子">圈子</a></dd>
                <dd><a href="/jobs?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=找工作">找工作</a></dd>
                <dd><a href="/app?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=app">移动客户端</a></dd>
                
            </dl>
            
            <dl class="col-sm-2 site-link">
                <dt>资源</dt>
                <dd><a href="/weekly?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-weekly&utm_term=每周精选">每周精选</a></dd>
                <dd><a href="/users?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-users&utm_term=用户排行榜">用户排行榜</a></dd>
                <dd><a href="/badges?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-badges&utm_term=徽章">徽章</a></dd>
                <dd><a href="/faq?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-faq&utm_term=帮助中心">帮助中心</a></dd>
                <dd><a href="/repu?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-repu&utm_term=声望与权限">声望与权限</a></dd>
                <dd><a href="/community?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-community&utm_term=社区服务中心">社区服务中心</a></dd>
                <dd><a href="https://docs.segmentfault.com?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-docs&utm_term=开发手册">开发手册</a></dd>

   
            </dl>

            <dl class="col-sm-2 site-link">
                <dt>商务</dt>
                <dd><a href="https://business.segmentfault.com/services?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-services-rencai&utm_term=人才服务" target="_blank">人才服务</a></dd>
                <dd><a href="https://business.segmentfault.com/services?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-services-qiyeneixun&utm_term=企业服务" target="_blank">企业培训</a></dd>
                <dd><a href="https://business.segmentfault.com/services?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-services-huodongcehua&utm_term=活动策划" target="_blank">活动策划</a></dd>
                <dd><a href="https://business.segmentfault.com/ads?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-ads&utm_term=广告投放" target="_blank">广告投放</a></dd>
                <dd><a href="https://business.segmentfault.com/bc?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-bc&utm_term=区块链解决方案" target="_blank">区块链解决方案</a></dd>
                <dd><a href="https://business.segmentfault.com/contact?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-contact&utm_term=合作联系" target="_blank">合作联系</a></dd>
            </dl>
            
            <dl class="col-sm-2 site-link">
                <dt>关于</dt>
                <dd><a href="https://about.segmentfault.com/?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=about&utm_content=about-index&utm_term=关于我们">关于我们</a></dd>
                <dd><a href="https://about.segmentfault.com/careers.html?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=about&utm_content=about-careers&utm_term=加入我们">加入我们</a></dd>
                <dd><a href="https://about.segmentfault.com/contact.html?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=about&utm_content=about-contact&utm_term=联系我们">联系我们</a></dd>
            </dl>

            <dl class="col-sm-2 site-link">
                <dt>关注</dt>
                                <dd><a href="//segmentfault.com/blog/segmentfault" target="_blank">产品技术日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/community_admin" target="_blank">社区运营日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/segmentfault_news" target="_blank">市场运营日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/segmentfault_team" target="_blank">团队日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/interview" target="_blank">社区访谈</a></dd>
                                <dd>
                    <ul class="sn-inline">
                        <li>
                            <a class="entypo-wechart icon-sn-weixin weixin-popover-qrcode" data-toggle="popover" data-placement="top"  data-content="">微信</a>
                        </li>
                        <li>
                            <a href="http://weibo.com/segmentfault" target="_blank" class="entypo-weibo icon-sn-weibo" >新浪微博</a>
                        </li>
                        <li>
                            <a href="https://github.com/SegmentFault" target="_blank" class="entypo-facebook icon-sn-github">Github</a>
                        </li>
                        <li>
                            <a href="https://twitter.com/segment_fault" target="_blank" class="entypo-twitter icon-sn-twitter">Twitter</a>
                        </li>
                    </ul>
                </dd>
            </dl>

            <dl class="col-sm-2 site-link" id="license">
                <dt>条款</dt>
                <dd><a href="/tos">服务条款</a></dd>
                <dd><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">内容许可</a></dd>
                <dd>
                    <a href="/app" class="clearfix mt10 block"><img src="https://static.segmentfault.com/v-5bebf0aa/page/img/app/appQrcode.png" class="app-qrcode"></a>
                    <div class="app-download-desc">
                        <p>扫一扫下载 App</p>
                    </div>
                    
                </dd>
            </dl>
        </div>
        <div class="copyright">
            Copyright &copy; 2011-2018 SegmentFault. 当前呈现版本 17.06.16<br>
            <a href="http://www.miibeian.gov.cn/" rel="nofollow">浙ICP备 15005796号-2</a> &nbsp;
            <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602002000" rel="nofollow">浙公网安备 33010602002000号</a>
            <span class="ml5">杭州堆栈科技有限公司版权所有</span>
            <P class="mt30">CDN 存储服务由 <a target="_blank" href="https://www.upyun.com/?utm_source=segmentfault&utm_medium=link&utm_campaign=upyun&md=segmentfault">又拍云</a> 赞助提供 </p>
        </div>
        <p class="text-center">
            <a class="js__view--selector hidden-sm hidden-md hidden-lg" data-action="mobile" href="javascript:;">移动版</a>
            <a class="js__view--selector hidden-sm hidden-md hidden-lg" data-action="desktop" href="javascript:;">桌面版</a>
        </p>
    </div>
</footer>

<div id="fixedTools" class="hidden-xs hidden-sm">
    <a id="backtop" class="hidden border-bottom" href="#">回顶部</a>
</div>

    <script id="loginModal" type="text/template">
    <div class="row bg-white login-modal">
        <div class="col-md-12 login-wrap">
            <form action="/api/user/login" method="POST" role="form" class="mt15">
                <div class="form-group hidden">
                                        <input type="text" class="form-control" name="remember" value="1"
                           autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="username" class="control-label">手机号 或 Email</label>
                    <input type="text" class="form-control" name="username" tabindex="1" required placeholder="11 位手机号 或 Email"
                           autocomplete="off">
                </div>
                <div class="form-group">
                    <label class="control-label">密码</label><span class="pull-right"><a
                                href="/user/forgot" tabindex="4">忘记密码</a></span>
                    <input type="password" class="form-control" name="password" tabindex="2" required placeholder="请输入密码">
                </div>
                <div class="form-group">
                    <a
                            
                                                    href="/user/phoneLogin"
                            class="phoneLogin"
                                            >手机验证码登录</a>
                </div>
                <div class="form-group clearfix">
                    <button type="submit" class="btn-block btn btn-primary pull-right pl20 pr20" tabindex="3"
                            onclick='ga("send", "event", "email login button", "clicked", "login modal");'>登录
                    </button>
                </div>
            </form>
            <div class="text-muted text-center more-login-area">
    <span class="more-login-words">更多登录方式</span>
</div>
<div class="widget-login mb15 text-center">
    <a href="/user/oauth/google" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "google"});'><span
                class="icon-sn-google"></span></a>
    <a href="/user/oauth/github" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "github"});");'><span
                class="icon-sn-github"></span></a>
    <a href="/user/oauth/weibo" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "weibo"});'><span
                class="icon-sn-weibo"></span></a>
    <a href="/user/oauth/qq" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-qq"></span></a>
    <a href="/user/oauth/weixin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-weixin"></span></a>
    <a href="/user/oauth/linkedin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "linkedin"});'><span
                class="icon-sn-linkedin"></span></a>
    <span id="loginShowMore" style="cursor: pointer" class="mb5"><span class="icon-sn-dotted"></span></span>
    <a href="/user/oauth/twitter" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "twitter"});'><span
                class="icon-sn-twitter"></span></a>
    <a href="/user/oauth/facebook" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "facebook"});'><span
                class="icon-sn-facebook"></span></a>
    <a href="/user/oauth/douban" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "douban"});'><span
                class="icon-sn-douban"></span></a>
</div>
<div class="form-group clearfix">
    <a class="btn-block btn btn-default pull-right pl20 pr20 
                        SFLogin
             "

            
        onclick='ga("send", "event", "email login button", "clicked", "login modal");'>
                    注册新账号
            </a>
</div>
<p class="text-muted text-center mb15">登录即表示你同意网站的<a href="/tos" target="_blank">《服务条款》</a></p>        </div>
    </div>
</script>
    <script id="registerModal" type="text/template">
    <div class="row bg-white login-modal">
        <div class="col-md-12 login-wrap">
            
            <form action="/api/user/register" method="POST" role="form" class="mt15">
                <div class="form-group">
                    <label for="name" class="control-label">你的名字</label>
                    <input type="text" class="form-control" name="name" required placeholder="真实姓名或常用昵称">
                </div>
                
                <div class="form-group">
                    <label for="mail" class="control-label">手机号 或 Email</label>
                    <input type="text" class="form-control" id="login-name" name="mail" required placeholder="11 位手机号 或 Email">
                </div>
                
                <input type="text" class="hidden" name="register_type" value="mail">

                <div class="form-group">
                    <div class="phone-register-only hidden">
                        <div class="captchaInput mb10">
                            <input type="text" class="form-control" name="cap" placeholder="右侧的验证码" style="width:50%; display: inline; margin-right: 15px;">
                            <span class="mt10">
                                <a id="loginReloadCaptcha" href="javascript:void(0)">
                                <img src="/user/captcha?w=135&h=34" class="cap" width="135" height="34"/></a>
                            </span>
                        </div>
                        <div class="input-group">
                            <input name="code" type="text" class="form-control js-user-login__phone-code-value" placeholder="短信验证码">
                            <span class="input-group-btn">
                                <button class="btn btn-default js-user-login__phone-vaild-btn" style="width:96px;" type="button">
                                获取验证码</button>
                            </span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="password" class="control-label">密码</label>
                    <input type="password" class="form-control" name="password" required placeholder="不少于 6 位的密码">
                </div>
                <div class="form-group clearfix">
                    <button type="submit" class="btn-block btn btn-primary pl20 pr20 pull-right"
                            onclick='ga("send", "event", "email register button", "clicked", "login modal");'>注册
                    </button>
                </div>
                                <div class="text-muted text-center more-login-area">
    <span class="more-login-words">更多登录方式</span>
</div>
<div class="widget-login mb15 text-center">
    <a href="/user/oauth/google" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "google"});'><span
                class="icon-sn-google"></span></a>
    <a href="/user/oauth/github" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "github"});");'><span
                class="icon-sn-github"></span></a>
    <a href="/user/oauth/weibo" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "weibo"});'><span
                class="icon-sn-weibo"></span></a>
    <a href="/user/oauth/qq" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-qq"></span></a>
    <a href="/user/oauth/weixin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-weixin"></span></a>
    <a href="/user/oauth/linkedin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "linkedin"});'><span
                class="icon-sn-linkedin"></span></a>
    <span id="loginShowMore" style="cursor: pointer" class="mb5"><span class="icon-sn-dotted"></span></span>
    <a href="/user/oauth/twitter" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "twitter"});'><span
                class="icon-sn-twitter"></span></a>
    <a href="/user/oauth/facebook" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "facebook"});'><span
                class="icon-sn-facebook"></span></a>
    <a href="/user/oauth/douban" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "douban"});'><span
                class="icon-sn-douban"></span></a>
</div>
<div class="form-group clearfix">
    <a class="btn-block btn btn-default pull-right pl20 pr20 
                        SFRegister
             "

            
        onclick='ga("send", "event", "email login button", "clicked", "login modal");'>
                    已有账号登录
            </a>
</div>
<p class="text-muted text-center mb15">登录即表示你同意网站的<a href="/tos" target="_blank">《服务条款》</a></p>            </form>
        </div>
    </div>
</script>
    <script id="phoneLoginModal" type="text/template">

    <div class="row bg-white login-modal phonelogin-modal">
        <div class="col-md-12 login-wrap">
            <form action="/api/user/phonelogin" method="POST" role="form" class="mt15">
                <div class="form-group">
                    <label for="phone" class="control-label required">手机号</label>
                    <input type="text" class="form-control phonelogin--phone" name="phone" tabindex="1" required placeholder="11 位手机号"
                           autocomplete="off">
                    <span class="help-block"></span>
                </div>

                <div class="form-group">
                    <label for="authCode" class="control-label required">验证码</label>
                    <div class="input-group">
                        <input type="text" class="form-control bindphone--code" name="authCode" placeholder="短信验证码">
                        <span class="input-group-btn">
                            <button class="btn btn-default user-bind__phone-vaild-btn" type="button">获取验证码</button>
                        </span>
                    </div>
                    <div class="col-sm-3"></div>
                </div>

                <div class="form-group">
                    <a 
                                                            href="/user/login"
                                class="SFRegister"
                                                >密码登录（手机号或 Email）</a>
                </div>
                <div class="form-group clearfix">
                    <button type="submit" class="btn-block btn btn-primary pull-right pl20 pr20" tabindex="3"
                            onclick='ga("send", "event", "email login button", "clicked", "login modal");'>登录
                    </button>
                </div>
            </form>
            <div class="text-muted text-center more-login-area">
    <span class="more-login-words">更多登录方式</span>
</div>
<div class="widget-login mb15 text-center">
    <a href="/user/oauth/google" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "google"});'><span
                class="icon-sn-google"></span></a>
    <a href="/user/oauth/github" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "github"});");'><span
                class="icon-sn-github"></span></a>
    <a href="/user/oauth/weibo" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "weibo"});'><span
                class="icon-sn-weibo"></span></a>
    <a href="/user/oauth/qq" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-qq"></span></a>
    <a href="/user/oauth/weixin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-weixin"></span></a>
    <a href="/user/oauth/linkedin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "linkedin"});'><span
                class="icon-sn-linkedin"></span></a>
    <span id="loginShowMore" style="cursor: pointer" class="mb5"><span class="icon-sn-dotted"></span></span>
    <a href="/user/oauth/twitter" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "twitter"});'><span
                class="icon-sn-twitter"></span></a>
    <a href="/user/oauth/facebook" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "facebook"});'><span
                class="icon-sn-facebook"></span></a>
    <a href="/user/oauth/douban" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "douban"});'><span
                class="icon-sn-douban"></span></a>
</div>
<div class="form-group clearfix">
    <a class="btn-block btn btn-default pull-right pl20 pr20 
                        SFLogin
             "

            
        onclick='ga("send", "event", "email login button", "clicked", "login modal");'>
                    注册新账号
            </a>
</div>
<p class="text-muted text-center mb15">登录即表示你同意网站的<a href="/tos" target="_blank">《服务条款》</a></p>        </div>
    </div>
</script>
<script id="bindPhoneModal" type="text/template">
    <div class="bg-white bindphone-model">
        <div class="alert alert-warning" role="alert">
            为了保证账号安全，请先绑定手机
        </div>
        <div>
            <form class="form-horizontal form__bindphone-apply" style="background-color:#fff;padding:0;">
                <div class="form-group ">
                    <label for="phoneNumber" class="col-sm-3 control-label required" >手机号码</label>
                    <div class="col-sm-6">
                        <input type="text" class="form-control bindphone--phone" id="phoneNumber" name="phone" placeholder="仅只支持大陆手机号">
                    </div>
                    <div class="col-sm-3"></div>
                </div>
                <div class="form-group">
                    <label for="authCode" class="col-sm-3 control-label required">验证码</label>
                    <div class="col-sm-6">
                        <div class="input-group">
                            <input type="text" class="form-control bindphone--code" name="code" placeholder="短信验证码">
                            <span class="input-group-btn">
                                <button class="btn btn-default user-bind__phone-vaild-btn" type="button">获取验证码</button>
                            </span>
                        </div>
                    </div>
                    <div class="col-sm-3"></div>
                </div>
            </form>
        </div>

    </div>
</script>


<script>
    window.serverTime = 1542691021000;
</script>

<script>
    (function (w) {
        w.SF = {
            staticUrl: "https://static.segmentfault.com/v-5bebf0aa"
        };
        w.SF.token = (function () {
    var _WbG = //'4hN'
'6f'+'7d'//'a'
+//'B'
'764'+'92'//'IDH'
+//'Y'
'8b7'+'d7f'//'2e'
+//'9'
'32'+//'Wd'
'6b'+/* 'TI'//'TI' */''+''///*'He'*/'He'
+//'b7'
'f8'+//'Yr'
'9'+'3'//'0iQ'
+//'R4'
'284'+'c05'//'vbt'
+'9'//'J'
+''///*'xSt'*/'xSt'
+''///*'eUz'*/'eUz'
+//'o9q'
'0'+'GqM'//'GqM'
+//'Jx'
'Jx'+//'0'
'1', _qVasmAi = [[31,34],[31,33]];

    for (var i = 0; i < _qVasmAi.length; i ++) {
        _WbG = _WbG.substring(0, _qVasmAi[i][0]) + _WbG.substring(_qVasmAi[i][1]);
    }

    return _WbG;
})();;
    })(window);

                var lock = {
        type: "",
        text: '',
        table: {"ban_post":[1,"\u4f60\u5df2\u7ecf\u88ab\u7981\u8a00, \u65e0\u6cd5\u8fdb\u884c\u6b64\u64cd\u4f5c, \u5982\u6709\u7591\u4e49\u8bf7\u63d0\u4ea4\u7533\u8bc9, \u6216\u8005\u53d1\u90ae\u4ef6\u5230pr@segmentfault.com"]}
    };

        var ddosMode = false;
    
        (function (currentUrl) {
        if (typeof URL != 'undefined') {
            var baseUrl = new URL('https://segmentfault.com');

            if (baseUrl.protocol != currentUrl.protocol
                || baseUrl.host != currentUrl.host) {
                window.location.href = baseUrl.protocol + '//' + baseUrl.host
                    + currentUrl.pathname + currentUrl.search + currentUrl.hash;
            }
        }
    })(window.location);
    </script>

             <script crossorigin src="https://static.segmentfault.com/v-5bebf0aa/3rd/assets.js"></script>
                 
        <script crossorigin src="https://static.segmentfault.com/v-5bebf0aa/blog/script/post.min.js"></script>
            

<script>
if (!!navigator.userAgent.match(/MicroMessenger/i)) {
    require.config({
        paths: { weixin_jsapi: '//res.wx.qq.com/open/js/jweixin-1.2.0' }
    });

    require(['weixin_jsapi'], function (wx) {
        var share = {"title":"\u51fd\u6570\u96c6","desc":"\u7edf\u8ba1\u6570\u7ec4\u5143\u7d20\u4e2a\u6570 {\u4ee3\u7801...} print_r($result);\/\/Array( {\u4ee3\u7801...} ) \u5faa\u73af\u5220\u9664\u76ee\u5f55 {\u4ee3\u7801...} 3.\u65e0\u9650\u6781\u5206\u7c7b\u751f\u6210\u6811 {\u4ee3\u7801...} 4.\u6570\u7ec4\u6392\u5e8f a - b \u662f\u6570\u5b57\u6570\u7ec4\u5199\u6cd5 \u9047\u5230\u5b57\u7b26\u4e32\u7684\u65f6\u5019\u5c31\u8981 {\u4ee3\u7801...} 5.array_reduce {...","link":"https:\/\/segmentfault.com\/a\/1190000002961545","imgUrl":"https:\/\/avatar-static.segmentfault.com\/175\/934\/175934663-572d654c6f521_huge256"};
        share.title += ' - SegmentFault 思否';

        $.getJSON('/api/util/weixin/jsapi', function (o) {
            methods = o.data.jsApiList.slice();

            wx.config(o.data);
            wx.error(console.error);
            wx.ready(function () {
                methods.forEach(function (method) {
                    wx[method](share);
                });
            });
        });
    });
}
</script>

<script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-918487-8']);
    _gaq.push(['_trackPageview']);
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
        a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

                
        

            

    ga('create', 'UA-918487-8', 'auto', {
        'userID'
    : 0,
        'createdTime'
    : 0,
        'now'
    : 1542691022,
        'allowLinker'
    : true });
    ga('require', 'linker');
    ga('linker:autoLink', ['docs.segmentfault.com'] );
    ga('set', 'dimension1', 'guest');
    ga('send', 'pageview');

</script>

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?e23800c454aa573c0ccb16b52665ac26";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>



</body>
</html>

