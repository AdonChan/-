

<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><meta name="renderer" content="webkit"/><meta property="qc:admins" content="15317273575564615446375"/><meta property="og:image" content="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon.png"/><meta name="viewport"
              content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/><meta name="alexaVerifyID" content="LkzCRJ7rPEUwt6fVey2vhxiw1vQ"/><meta name="apple-itunes-app" content="app-id=958101793, app-argument="><title>Python_爬虫基础 - MAY - SegmentFault 思否</title><meta name="description" content="企业生产的用户数据：大型互联网公司有海量用户，所以他们积累数据有天然优势。有数据意识的中小型企业，也开始积累的数据。"/><meta name="keywords" content="python,python爬虫"/><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="SegmentFault"/><link rel="shortcut icon" href="https://static.segmentfault.com/v-5bebf0aa/global/img/favicon.ico"/><link rel="apple-touch-icon" href="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon.png"><meta name="msapplication-TileColor" content="#009a61"/><meta name="msapplication-square150x150logo" content="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon.png"/><meta name="baidu_union_verify" content="bcf7fd80dca60d53d46d5b46e1b990ca"><link rel="alternate" type="application/atom+xml" title="SegmentFault 最新问题" href="/feeds/questions"><link rel="alternate" type="application/atom+xml" title="SegmentFault 最新文章" href="/feeds/blogs"><link rel="stylesheet" href="https://static.segmentfault.com/v-5bebf0aa/global/css/global.css"/><link rel="stylesheet" href="https://static.segmentfault.com/v-5bebf0aa/blog/css/blog.css"/><link rel="stylesheet" href="https://static.segmentfault.com/v-5bebf0aa/global/css/responsive.css"/><script type='text/javascript' src='https://sponsor.segmentfault.com/spcjs.php?id=1&block=1&repu=0&tag=python,python爬虫'></script></head><!-- 推荐引擎 --><script charset="utf-8" id="ParadigmSDK" src="https://nbrecsys.4paradigm.com/sdk/js/ParadigmSDK_v2.js" data="216" defSI="594"></script><script>
    ParadigmSDK.init("46e957bd9dea4acdaa15b4b64aff728f");
    ParadigmSDK.trackDetailPageShow();
</script><body data-mod="blog"
    class="blog-post "><!--[if lt IE 9]><div class="alert alert-danger topframe" role="alert">你的浏览器实在<strong>太太太太太太旧了</strong>，放学别走，升级完浏览器再说 <a target="_blank" class="alert-link" href="http://browsehappy.com">立即升级</a></div><![endif]--><img id="icon4weChat" style="height: 0;width: 0;" src="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon-512.png"><div id="gridMapHoverBox" style="position:absolute; border: 1px solid #009a61; z-index:99; font-size: 10px; background:#fff"></div><div class="global-nav sf-header sf-header--index"><div class="bottom-nav visible-xs visible-sm "><div class="opts"><a class="opts-group " href="/"><i class="fa fa-home" aria-hidden="true"></i><span>首页</span></a><a class="opts-group " href="/questions"><i class="fa fa-comments" aria-hidden="true"></i><span>问答</span></a><a class="opts-group active" href="/blogs"><i class="fa fa-pencil-square" aria-hidden="true"></i><span>专栏</span></a><a class="opts-group " href="/lives"><i class="fa fa-play-circle" aria-hidden="true"></i><span>讲堂</span></a><div class="opts-group"><div class="btn-group dropup"><i class="fa fa-bars dropdown hoverDropdown" data-toggle="dropdown" aria-hidden="true"><span>更多</span></i><ul class="dropdown-menu"><li><a href="/jobs">职位</a></li><li><a href="/events">活动</a></li><li><a href="/tags">标签</a></li><li><a href="/badges">徽章</a></li></ul></div></div></div></div><nav class="container nav"><div class="visible-xs visible-sm header-response"><a href="/search" style="display:block"><i class="fa fa-search" aria-hidden="true"></i></a><div class="sf-header__logo sf-header__logo--response"><h1><a href="/" style="height:24px; background-size: auto 24px;"></a></h1></div><a href="/user/login" class="pull-right login-btn"><i class="fa fa-user" aria-hidden="true"></i></a></div><script>
mobileScroll(
    function(direction) { 
        try {
            if (direction === 'down') {
                document.querySelector('.bottom-nav').classList.add('hidden')
            } else {
                document.querySelector('.bottom-nav').classList.remove('hidden')
            }
        } catch(err) {}
    }
);    
function mobileScroll( fn ) {
    var beforeScrollTop = document.documentElement.scrollTop || document.body.scrollTop,
        fn = fn || function() {};
    window.addEventListener("scroll", function() {
        var afterScrollTop = document.documentElement.scrollTop || document.body.scrollTop,
            delta = afterScrollTop - beforeScrollTop;
        if( delta === 0 ) return false;
        fn( delta > 0 ? "down" : "up" );
        beforeScrollTop = afterScrollTop;
    }, false);
}
</script><div class="row hidden-xs hidden-sm"><div class="col-sm-8 col-md-9 col-lg-9"><div class="sf-header__logo"><h1><a href="/">SegmentFault</a></h1></div><div><ul class="menu list-inline pull-left hidden-xs"><li class="menu__item"><a href="/" class="">首页</a></li><li class="menu__item"><a href="/questions" class="">问答</a></li><li class="menu__item"><a href="/blogs" class="active-nav">专栏</a></li><li class="menu__item"><a href="/lives" class="">讲堂</a></li><li class="menu__item menu__item--more dropdown"><a href="##" class="dropdown-toggle dropdownBtn" data-toggle="dropdown">
                                        发现<i class="fa fa-caret-down" style="font-size: 14px;margin-left: 5px;" aria-hidden="true"></i></a><div class="dropdown-block hidden"><ul class="dropdown-content-menu"><li><a href="/groups">圈子</a></li><li><a href="/events">活动</a></li><li><a href="/tags">标签</a></li><li><a href="/jobs">找工作</a></li><li><a href="/users">排行榜</a></li><li><a href="/badges">徽章</a></li><li><a href="/notes">笔记</a></li><li><a href="https://docs.segmentfault.com" target="_blank">开发手册<i style="line-height: 20px;font-size: 12px;color: #F5A623;" class="ml10 fa fa-external-link-square"></i></a></li><li><a href="https://business.segmentfault.com/ads?utm_source=sf-header" target="_blank">广告投放<i style="line-height: 20px;font-size: 12px;color: #F5A623;" class="ml10 fa fa-external-link-square"></i></a></li></ul></div></li><li class="menu__item visible-sm-inline-block"><a href="/search"><span class="glyphicon glyphicon-search" style="vertical-align: middle;"></span></a></li></ul><form action="/search" class="header-search  hidden-sm hidden-xs pull-right" ><button class="btn btn-link"><span class="sr-only">搜索</span><span class="glyphicon glyphicon-search"></span></button><input id="searchBox" name="q" type="text"  placeholder="搜索问题或关键字" class="form-control" value="" /></form></div></div><div class="col-sm-4 col-md-3 col-lg-3 text-right"><ul class="opts list-inline hidden-xs"><li class="opts__item"><a href="/user/login" class="SFRegister btn-signin" style="margin-bottom:2px;">立即登录</a><a href="/user/register" class="SFLogin ml10 btn-signup"
                                       onClick="_gaq.push(['_trackEvent', 'Button', 'Click', 'Login']);">免费注册</a></li></ul></div></div></nav></div>
    
<input id="articleId" value="1190000014981939" class="hidden" />

<div class="wrap" data-blogid="1200000004474366">
    <div class="container mt15" style="position:relative">
        <div class="row">
            <div class="col-xs-12 col-md-9 main ">
                                <ol class="breadcrumb mb15">
                    <li><a href="/blogs">专栏</a></li>
                                        <li><a href="/blog/mbc">MAY</a></li>
                                        <li class="active">文章详情</li>
                </ol>
                                <div class="post-topheader custom- pt0">
                    <div class="mb20">
                        <div class="block-for-right-border">
                            <div class="row">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                

                                    <div class="post-topheader__info" data-username="alogy"
                                         data-userslug="alogy"
                                         data-useravatar="https://avatar-static.segmentfault.com/509/437/509437996-577ccfee4d288_big64">


                                        <div class="article__author clearfix">
                                            <div class="article__authorleft">
                                                <a href="/u/alogy">
                                                    <img class="avatar-40" src="https://avatar-static.segmentfault.com/509/437/509437996-577ccfee4d288_big64" alt="alogy">
                                                </a>
                                            </div>
                                            <div class="article__authorright">
                                                <div class="article__authormeta">
                                                <a href="/u/alogy" class="mr5 "><strong>alogy</strong></a>

                                                                                                <img src="https://static.segmentfault.com/v-5bebf0aa/global/img/rp.svg" class="mr5"><span style="color:#BF7158" class="mr10">889</span>

                                                                                                发布于
                                                <a href="/blog/mbc">MAY</a>
                                                
                                                
                                                <span class="hidden-xs">
                                                                                                                                                          <button type="button"
                                                               class="btn btn-xs btn-success follow-article ml10"
                                                               data-do="follow"
                                                               data-type="blog"
                                                               data-id="1200000004474366">关注专栏
                                                       </button>
                                                                                                                                                   </span>
                                                </div>
                                                
                                                <span style="display: block">
                                                    2018-05-23 发布
                                                </span>
                                            </div>
                                        </div>

                                        <h1 class="h1 post-topheader__info--title" id="articleTitle" data-id="1190000014981939">
                                            <a href="/a/1190000014981939"> Python_爬虫基础</a>
                                        </h1>

                                        <div class="content__tech hidden-xs">
                                            <a href="" class="blog-type-common blog-type-1-before" target="_blank" data-content="
                                                                                        原创
                                                                                        "></a>
                                            
                                            <ul class="taglist--inline inline-block article__title--tag mr10">
                                                                                                    <li class="tagPopup mb5">
                                                        <a class="tag" href="/t/python/blogs" data-toggle="popover"
                                                                                data-img="https://avatar-static.segmentfault.com/378/252/3782524817-1040000000089534_big64" data-placement="top"
                                                                                data-original-title="python"
                                                                                data-id="1040000000089534">
                                                                                                                    <img src="https://avatar-static.segmentfault.com/252/177/2521771040-54cb53b372821_small">
                                                                                                                      python
                                                        </a>
                                                    </li>
                                                                                                    <li class="tagPopup mb5">
                                                        <a class="tag" href="/t/python%E7%88%AC%E8%99%AB/blogs" data-toggle="popover"
                                                                                data-img="" data-placement="top"
                                                                                data-original-title="python爬虫"
                                                                                data-id="1040000000511459">
                                                                                                                      python爬虫
                                                        </a>
                                                    </li>
                                                                                            </ul>

                                            <span>
                                                760 次阅读
                                                &nbsp;&middot;&nbsp;
                                                读完需要 116 分钟 
                                                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!-- end .post-topheader -->

                <div class="visible-lg">
                    <div class="side-widget">
                        <div class="stream__item-zan btn btn-default mt0 mb15 ml0 mr0 pt0 pb0 pl0 pr0 " id="side-widget-votes-btn">
                            <span class="stream__item-zan-icon"></span>
                            <span class="stream__item-zan-number" id="side-widget-votes-num">0</span>
                        </div>

                        <i class="fa fa-bookmark item " id="side-widget-bookmarks-btn"></i>
                        <i class="fa fa-weibo item"></i>
                        <i class="fa fa-weixin item" data-toggle="popover" data-placement="right"></i>
                        <i class="fa fa-twitter item"></i>
                        <i class="fa fa-facebook item"></i>
                        <i class="fa fa-arrow-up item hidden"></i>
                    </div>
                </div>

                
                <div class="article fmt article__content" data-id="1190000014981939" data-license="cc">
                    
<h2>爬虫概念</h2>
<p>数据获取的方式：</p>
<ul>
<li>企业生产的用户数据：大型互联网公司有海量用户，所以他们积累数据有天然优势。有数据意识的中小型企业，也开始积累的数据。</li>
<li>数据管理咨询公司</li>
<li>政府/机构提供的公开数据</li>
<li>第三方数据平台购买数据</li>
<li>爬虫爬取数据</li>
</ul>
<blockquote>什么是爬虫</blockquote>
<p>抓去网页数据的程序</p>
<p>网页三大特征：</p>
<ul>
<li>每个网页都有自己的<code>URL</code>
</li>
<li>网页都使用<code>HTML</code>标记语言来描述页面信息</li>
<li>网页都使用<code>HTTP/HTTPS</code>协议来传输<code>HTML</code>数据</li>
</ul>
<blockquote>爬虫的设计思路</blockquote>
<ol>
<li>确定需要爬取的网页<code>URL</code>地址</li>
<li>通过<code>HTTP/HTTPS</code>协议来获取对应的<code>HTML</code>页面</li>
<li>提取<code>HTML</code>页面中的数据<br>如果是需要的数据，就保存起来<br>如果页面是其它<code>URL</code>，那就继续爬取</li>
</ol>
<p><strong>如何抓取HTML页面</strong><br>HTTP协议请求的处理，<code>urllib</code>, <code>urllib2</code>, <code>requests</code>，处理后的请求可以模拟浏览器发送请求，获取服务器响应的文件</p>
<p><strong>解析服务器响应的内容</strong><br><code>re</code>, <code>xpath</code>(常用), <code>BeautifulSoup4(bs4)</code>, <code>jsonpath</code>, <code>pyquery</code>等使用某种描述性一样来给需要提取的数据定义一个匹配规则，符合这个规则的数据就会被匹配。</p>
<p><strong>如何采集动态HTML，验证码的处理</strong><br><code>Selenium</code>(自动化测试工具) + <code>PhantomJS</code>(无界面浏览器)<br>验证码处理通过<code>Tesseract</code>: 机器图像识别系统(图片中的文本识别)</p>
<p><strong>Scrapy框架</strong><br>(<code>Scrapy</code>, <code>Pyspider</code>)</p>
<ul>
<li>高性能高定制型（异步网络框架<code>twisted</code>）,所以数据下载速度快</li>
<li>提供了数据存储，数据下载，提取规则等组件</li>
</ul>
<p><strong>分布式策略</strong></p>
<ol>
<li>是否有那么多的机器去做分布式?</li>
<li>获取的数据是否值得搭建分布式系统?</li>
</ol>
<p>使用<code>scrapy-redis</code>来搭建,在<code>Scrapy</code>的基础上添加了一套 <code>Redis</code>数据库为核心的一套组件，让<code>Scrapy</code>框架支持分布式的功能。主要在<code>Redis</code>中做<strong>请求指纹去重</strong>，<strong>请求分配</strong>，<strong>数据临时存储</strong></p>
<p><strong>爬虫 - 反爬虫 - 反反爬虫</strong></p>
<p>反爬虫： <code>User-Agent</code>, <code>IP</code>, <code>代理</code>, <code>验证码</code>, <code>动态数据加载</code>, <code>加密数据</code><br>数据的价值，是否值得去费劲去做反爬虫，一般做到代理阶段或封<code>IP</code>。<br>机器成本 + 人力成本 &gt; 数据价值</p>
<p>爬虫和反爬虫之间的斗争，最后一定是爬虫获胜。<br>只要是真实用户可以浏览的网页数据，爬虫就一定能爬下来。（爬虫模拟浏览器获取数据）</p>
<p><a href="https://github.com/facert/awesome-spider" rel="nofollow noreferrer">爬虫集合awesome-spider</a></p>
<blockquote>通用爬虫</blockquote>
<p>搜索引擎使用的爬虫系统</p>
<p>目标：尽可能把互联网上所有的网页下载下来，放到本地服务器里形成备份，再对这些网页做相关处理（提取关键字，去掉广告），最后提供一个用户检索接口</p>
<p>抓取流程：</p>
<ul>
<li>首先选取一部分已有的<code>URL</code>，把这些<code>URL</code>放到待爬取队列。</li>
<li>从队列里去取出这些<code>URL</code>，然后解析<code>DNS</code>得到主机<code>IP</code>,然后去这个<code>IP</code>对应的服务器下载<code>HTML</code>页面，保存到搜索引擎的本地服务器里，之后把这个已经爬过的<code>URL</code>放入到已经爬取队列中</li>
<li>分析网页内容，找出网页中的其它<code>URL</code>内容，继续爬取。</li>
</ul>
<p>搜索引擎如何获取一个新网站的<code>URL</code>:</p>
<ul>
<li>主动向搜索引擎提交网址： <a href="https://ziyuan.baidu.com/linksubmit/index" rel="nofollow noreferrer">百度搜索资源平台</a>
</li>
<li>在其它网站设置外链</li>
<li>搜索引擎会和<code>DNS</code>服务商进行合作,可以快速收录新的网站</li>
</ul>
<p>通用爬虫并不是万物皆可爬，它也需要遵守规则：<br><code>Robots</code>协议，协议会指明通用爬虫可以爬取网页的权限。<br><code>Robots.txt</code>并不是所有爬虫都遵守，一般只有大型搜索引擎爬虫才会遵守。</p>
<p>通用爬虫工作流程：<br>爬取网页 -&gt; 存储数据 -&gt; 内容处理 -&gt; 提供检索/排名服务</p>
<p>搜索引擎排名：</p>
<ul>
<li>
<code>PageRank</code>值：根据网站的流量（<code>pv</code>），流量越高，排名约靠前</li>
<li>竞价排名</li>
</ul>
<p>通用爬虫的缺点：</p>
<ol>
<li>只能提供和文本相关的内容（HTML，Word，PDF）等，但是不能提供多媒体（音乐，视频，图片）和二进制文件。</li>
<li>提供的结果千篇一律，不能针对不同领域的人提供不同的搜索结果。</li>
<li>不能理解人类语义上的检索。</li>
</ol>
<p><code>DNS</code>: 把域名解析成<code>IP</code></p>
<blockquote>聚焦爬虫</blockquote>
<p>爬虫程序员写的针对某种内容爬虫。（针对通用爬虫的缺点）</p>
<p>面向主题爬虫，面向需求爬虫，会针对某种特定的内容去爬取信息，而且会保证内容信息和需求尽可能相关。</p>
<h2>HTTP&amp;HTTPS</h2>
<p><code>HTTP协议（HyperText Transfer Protocol，超文本传输协议）</code>：是一种发布和接收<code>HTML</code>页面的方法。</p>
<p><code>HTTPS（Hypertext Transfer Protocol over Secure Socket Layer）</code>简单讲是<code>HTTP</code>的安全版，在<code>HTTP</code>下加入<strong><code>SSL</code>层</strong>。 </p>
<p><code>SSL（Secure Sockets Layer 安全套接层）</code>主要用于<code>Web</code>的安全传输协议，在传输层对网络连接进行加密，保障在<code>Internet</code>上数据传输的安全。</p>
<ul>
<li>HTTP的端口号为80</li>
<li>HTTPS的端口号为443</li>
</ul>
<p>HTTP工作原理</p>
<p>网络爬虫抓取过程可以理解为<strong>模拟浏览器操作的过程</strong>。</p>
<p>浏览器的主要功能是向服务器发出请求，在浏览器窗口中展示您选择的网络资源，<code>HTTP</code>是一套计算机通过网络进行通信的规则。</p>
<p>常用的请求报头:</p>
<ul>
<li>
<strong>Host (主机和端口号)</strong>: 对应网址URL中的Web名称和端口号，用于指定被请求资源的Internet主机和端口号，通常属于URL的一部分。</li>
<li>
<p><strong>Connection (链接类型)</strong>: 表示客户端与服务连接类型</p>
<ol>
<li>Client 发起一个包含 <code>Connection:keep-alive</code> 的请求，HTTP/1.1使用 <code>keep-alive</code> 为默认值。</li>
<li>Server收到请求后：如果 Server 支持 keep-alive，回复一个包含 <code>Connection:keep-alive</code> 的响应，不关闭连接； 如果 Server 不支持<code>keep-alive</code>，回复一个包含 <code>Connection:close</code> 的响应，关闭连接。</li>
<li>如果client收到包含 <code>Connection:keep-alive</code> 的响应，向同一个连接发送下一个请求，直到一方主动关闭连接。</li>
<li>
<code>keep-alive</code>在很多情况下能够重用连接，减少资源消耗，缩短响应时间，比如当浏览器需要多个文件时(比如一个HTML文件和相关的图形文件)，不需要每次都去请求建立连接。</li>
</ol>
</li>
<li>
<strong>Upgrade-Insecure-Requests (升级为HTTPS请求)</strong>: 升级不安全的请求，意思是会在加载 http 资源时自动替换成 https 请求，让浏览器不再显示https页面中的http请求警报。(HTTPS 是以安全为目标的 HTTP 通道，所以在 HTTPS 承载的页面上不允许出现 HTTP 请求，一旦出现就是提示或报错。)</li>
<li>
<strong>User-Agent (浏览器名称)</strong>: 是客户浏览器的名称</li>
<li>
<p><strong>Accept (传输文件类型)</strong>: 指浏览器或其他客户端可以接受的MIME（Multipurpose Internet Mail Extensions（多用途互联网邮件扩展））文件类型，服务器可以根据它判断并返回适当的文件格式。</p>
<ol>
<li>
<code>Accept: */*</code>：表示什么都可以接收。</li>
<li>
<code>Accept：image/gif</code>：表明客户端希望接受GIF图像格式的资源；</li>
<li>
<code>Accept：text/html</code>：表明客户端希望接受html文本。</li>
<li>
<code>Accept: text/html, application/xhtml+xml;q=0.9, image/*;q=0.8</code>：表示浏览器支持的 MIME 类型分别是 html文本、xhtml和xml文档、所有的图像格式资源。<a href="http://blog.sina.com.cn/s/blog_866e403f010179f1.html" rel="nofollow noreferrer">html中文件类型的accept属性有哪些</a>
</li>
</ol>
</li>
<li>
<strong>Referer (页面跳转处)</strong>: 表明产生请求的网页来自于哪个URL，用户是从该 Referer页面访问到当前请求的页面。这个属性可以用来跟踪Web请求来自哪个页面，是从什么网站来的等。有时候遇到下载某网站图片，需要对应的referer，否则无法下载图片，那是因为人家做了防盗链，原理就是根据referer去判断是否是本网站的地址，如果不是，则拒绝，如果是，就可以下载；</li>
<li>
<strong>Accept-Encoding（文件编解码格式）</strong>: 指出浏览器可以接受的编码方式。编码方式不同于文件格式，它是为了压缩文件并加速文件传递速度。浏览器在接收到Web响应之后先解码，然后再检查文件格式，许多情形下这可以减少大量的下载时间。例如：<code>Accept-Encoding:gzip;q=1.0, identity; q=0.5, *;q=0</code>
</li>
<li>
<strong>Accept-Language（语言种类）</strong>: 指出浏览器可以接受的语言种类，如en或en-us指英语，zh或者zh-cn指中文，当服务器能够提供一种以上的语言版本时要用到。</li>
<li>
<strong>Accept-Charset（字符编码）</strong>： 指出浏览器可以接受的字符编码。例如：<code>Accept-Charset:iso-8859-1,gb2312,utf-8</code>
</li>
<li>
<strong> Cookie （Cookie）</strong>： 浏览器用这个属性向服务器发送Cookie。Cookie是在浏览器中寄存的小型数据体，它可以记载和服务器相关的用户信息，也可以用来实现会话功能</li>
<li>
<strong>Content-Type (POST数据类型)</strong>： POST请求里用来表示的内容类型。例如：<code>Content-Type = Text/XML; charset=gb2312：</code>
</li>
</ul>
<p>常用的响应报头（了解）：</p>
<ul>
<li>
<strong> Cache-Control：must-revalidate, no-cache, private</strong>： 告诉客户端，服务端不希望客户端缓存资源，在下次请求资源时，必须要从新请求服务器，不能从缓存副本中获取资源。</li>
<li>
<strong>Connection：keep-alive</strong>: 客户端服务器的tcp连接也是一个长连接，客户端可以继续使用这个tcp连接发送http请求</li>
<li>
<strong>Content-Encoding:gzip</strong>： 告诉客户端，服务端发送的资源是采用gzip编码的，客户端看到这个信息后，应该采用gzip对资源进行解码。</li>
<li>
<strong>Content-Type：text/html;charset=UTF-8</strong>： 告诉客户端，资源文件的类型，还有字符编码，客户端通过utf-8对资源进行解码，然后对资源进行html解析。</li>
<li>
<strong>Date：Sun, 21 Sep 2016 06:18:21 GMT</strong>： 服务端发送资源时的服务器时间，GMT是格林尼治所在地的标准时间。http协议中发送的时间都是GMT的，这主要是解决在互联网上，不同时区在相互请求资源的时候，时间混乱问题。</li>
<li>
<strong> Expires:Sun, 1 Jan 2000 01:00:00 GMT</strong>: 这个响应头也是跟缓存有关的，告诉客户端在这个时间前，可以直接访问缓存副本，很显然这个值会存在问题，因为客户端和服务器的时间不一定会都是相同的，如果时间不同就会导致问题。所以这个响应头是没有Cache-Control：max-age=*这个响应头准确的，因为max-age=date中的date是个相对时间.</li>
<li>
<strong>Pragma:no-cache</strong>: 这个含义与Cache-Control等同。</li>
<li>
<strong>Server：Tengine/1.4.6</strong>： 这个是服务器和相对应的版本，只是告诉客户端服务器的信息。</li>
<li>
<strong>Transfer-Encoding：chunked</strong>： 这个响应头告诉客户端，服务器发送的资源的方式是分块发送的。</li>
</ul>
<p>响应状态码：</p>
<ul>
<li>
<code>100~199</code>：表示服务器成功接收部分请求，要求客户端继续提交其余请求才能完成整个处理过程。</li>
<li>
<code>200~299</code>：表示服务器成功接收请求并已完成整个处理过程。常用200（OK 请求成功）。</li>
<li>
<code>300~399</code>：为完成请求，客户需进一步细化请求。例如：请求的资源已经移动一个新地址、常用302（所请求的页面已经临时转移至新的url）、307和304（使用缓存资源）。</li>
<li>
<code>400~499</code>：客户端的请求有错误，常用404（服务器无法找到被请求的页面）、403（服务器拒绝访问，权限不够）。</li>
<li>
<code>500~599</code>：服务器端出现错误，常用500（请求未完成。服务器遇到不可预知的情况）。</li>
</ul>
<p>Cookie 和 Session:<br>因为服务器和客户端的交互仅限于请求/响应过程，结束之后便断开，在下一次请求时，服务器会认为新的客户端。为了维护他们之间的链接，让服务器知道这是前一个用户发送的请求，必须在一个地方保存客户端的信息</p>
<p>Cookie：通过在客户端 记录的信息确定用户的身份。<br>Session：通过在服务器端 记录的信息确定用户的身份。</p>
<h2>urllib</h2>
<p><code>urllib.request</code></p>
<p>linux中的py源码文件位置：<br>python自带：<code>vim /usr/lib/python2.7/urllib2.py</code><br>pip安装：<code>vim /usr/local/lib/python3.6/site-packages/django/http/cookie.py</code></p>
<blockquote>urllib2.urlopen</blockquote>
<pre><code># -*- coding:utf-8 -*-

import urllib.request as urllib2

# 返回类文件对象
response = urllib2.urlopen('http://www.baidu.com/')
# urlopen不支持构造

# 服务器返回类文件对象支持python文件对象的操作方法
# read()方法就是读取文件里面的全部内容，返回字符串
html = response.read()

print(html)</code></pre>
<blockquote>Request</blockquote>
<pre><code># -*- coding:utf-8 -*-

import urllib.request as urllib2


ua_headres = {
    'User_Agent': 'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Mobile Safari/537.36'
}

# urllib2.Request(url, data, headres)
# 通过urllib2.Request()方法构造一个请求对象
requset = urllib2.Request('http://www.baidu.com', headers=ua_headres)


# 返回类文件对象, urlopen不支持构造
response = urllib2.urlopen(requset)

# 服务器返回类文件对象支持python文件对象的操作方法
# read()方法就是读取文件里面的全部内容，返回字符串
html = response.read()

print(html)</code></pre>
<p><code>User_Agent</code>,是发送请求必须带的请求头</p>
<blockquote>Response响应</blockquote>
<p><code>response</code>是服务器响应的类文件，除了支持文件操作的方法外，常用的方法也有：<br><code>respnse.getcode()</code>, <code>response.geturl()</code>, <code>response.info()</code></p>
<pre><code>#condig=utf-8

import urllib.request as urllib2

# print(dir(urllib2))

ua_headres = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.104 Safari/537.36 Core/1.53.4620.400 QQBrowser/9.7.13014.400'        
}

request = urllib2.Request('http://www.baidu.com/', headers=ua_headres)

response = urllib2.urlopen(request)

html = response.read()

# 返回HTTP的响应码，成功返回200
# 4 服务器页面出错， 5 服务器问题
print(response.getcode())

# 返回实际数据的url，防止重定向问题
print(response.geturl())

# 返回服务器响应报头信息
print(response.info())

# print(dir(response))</code></pre>
<blockquote>User-Agent历史</blockquote>
<p>如果用一个合法的身份去请求别人网站，就是欢迎的，所以就应该给这个代码加上一个身份，就是所谓的<code>User-Agent</code>头。</p>
<p><code>urllib2</code>默认的<code>User-Agent</code>头为：<code>Python-urllib/x.y</code>（<code>x</code>和<code>y</code>是<code>Python</code>主版本和次版本号,例如 <code>Python-urllib/2.7</code></p>
<p><code>Mosaic</code>世界上第一个浏览器：美国国家计算机应用中心<br><code>Netscape</code>，网景：<code>Netscape</code>（支持框架）<br><code>Microsoft</code>微软：<code>Internet Explorer</code></p>
<p>第一次浏览器大战：网景公司失败</p>
<p><code>Mozilla</code> 基金组织：<code>Firefox</code> 火狐 内核（Gecko内核）(浏览器支持内核开始，<code>User-Agent</code>开始逐渐使用)</p>
<p><code>User-Agent</code> 决定用户的浏览器，为了获取更好的HTML页面效果</p>
<p>IE就给自己披着了个<code>Mozilla</code>的外皮</p>
<p>内核：</p>
<ul>
<li>Mozilla: Firefox (Gecko)</li>
<li>IE： Trident</li>
<li>Opera: Presto</li>
<li>Linux: KHTML (like Gecko)</li>
<li>Apple: Webkit (like KTML)</li>
<li>Google: Chrome (like webkit)</li>
</ul>
<blockquote>add_header() &amp; get_header()</blockquote>
<p><code>add_header()</code>: 添加/修改 一个<code>HTTP</code>报头 <br><code>get_header()</code>: 获取一个已有的<code>HTTP</code>报头值，只能第一个字母大写，其它的必须小写</p>
<pre><code># -*- coding:utf-8 -*-

import urllib.request as urllib2
import random

url = 'http://www.baidu.com/'

# 可以是User-Agent列表，也可以是代理列表。 作用：反反爬虫
ua_list = [
    'Mozilla/5.0 (Windows NT 6.1; WOW64; rv:34.0) Gecko/20100101 Firefox/34.0',
    'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/534.57.2 (KHTML, like Gecko) Version/5.1.7 Safari/534.57.2',
    'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36',
    'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; en) Opera 9.50'
]

# 在User-Agent列表里随机选择一个User-Agent
user_agent = random.choice(ua_list)

# 构造一个请求
request = urllib2.Request(url)

# add_header()方法，添加/修改 一个HTTP报头
request.add_header('User-Agent', user_agent)

# get_header() 获取一个已有的HTTP报头值，只能第一个字母大写，其它的必须小写
request.get_header('User-agent')

response = urllib2.urlopen(request)

html = response.read()
print(html)</code></pre>
<blockquote>urllib.urlencode</blockquote>
<p>编码：<br><code>urlencode</code>位置：<code>urllib.parse.urlencode(values)</code>。 其中<code>values</code>所需要编码的数据，参数只能为字典<br>解码：<br><code>unquote</code>: <code>urllib.parse.unquote(values)</code></p>
<pre><code>#conding=utf-8

import urllib.parse

test = {
    'test': '我的'
}

# 通过urllib.urlencode()方法，将字典键值对按URL编码转换，从而能被web服务器接受。
enCodeTest = urllib.parse.urlencode(test)

# 冒号解析为等号
print(enCodeTest) # test=%E6%88%91%E7%9A%84

# 通过urllib.unquote()方法，把 URL编码字符串，转换回原先字符串。
print(urllib.parse.unquote(enCodeTest)) # test=我的</code></pre>
<blockquote>爬取百度贴吧起始页到结束页的案例</blockquote>
<pre><code>#conding=utf-8

import urllib.request
import urllib.parse

def loadPage(url, filename):
    '''
        作用: 根据url发送请求，获取服务器响应文件
        url: 需要爬取的url地址
        filename: 处理的文件名
    '''
    print('正在下载' + filename)
    headers = {
        'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36'
    }
    request = urllib.request.Request(url, headers=headers)
    return urllib.request.urlopen(request).read()
    

def writePage(html, filenmae):
    '''
        作用：将html内容写入到本地
        html: 服务器响应文件内容
    '''
    print('正在保存' + filenmae)
    # 文件写入
    with open(filenmae, 'w') as f: #  with 之后，不需要做文件关闭还有其它上下文处理的操作 等同于 open(), write(), close()
        f.write(html.decode('utf-8'))
    print('-' * 30)    
    print('thanks')


def tiebaSpider(url, beginPage, endPage):
    '''
        作用: 贴吧爬虫调度器，负责组合处理
        url: 贴吧url的前部分
        beginPage: 起始页
        endPage: 结束页
    '''
    for page in range(beginPage, endPage+1):
        pn = (page - 1) * 50
        filename = '第' + str(page) + '页.html'
        fullurl = url + '&amp;pn=' + str(pn)
        # print(fullurl)
        html = loadPage(fullurl, filename)
        writePage(html, filename)
        # print(html)

if __name__ == '__main__':
    kw = input('请输入需要爬取的贴吧名：')
    beginPage = int(input('请输入起始页：'))
    endPage = int(input('请输入结束页：'))
    
    # https://tieba.baidu.com/f?ie=utf-8&amp;kw=javascirpt&amp;fr=search
    url = 'https://tieba.baidu.com/f?'
    key = urllib.parse.urlencode({'kw': kw})
    fullurl = url + key

    tiebaSpider(fullurl, beginPage, endPage)
</code></pre>
<blockquote>POST请求的模拟</blockquote>
<p><code>Get</code>和<code>Post</code>请求的区别：</p>
<ul>
<li>
<code>Get</code>请求：查询参数在<code>QueryString</code>里保存</li>
<li>
<code>Post</code>请求：查询参数在<code>FormData</code>中保存</li>
</ul>
<p><code>Post</code>请求：</p>
<pre><code># -*- coding:utf-8 -*-

import urllib.request
import urllib.parse

url = 'http://fanyi.youdao.com/translate_o?smartresult=dict&amp;smartresult=rule'

key = input('请输入查询翻译的文字：')

# 发送到服务器的表单数据，如果是中文需要转码
fromdata = {
    'i': key,
    'from': 'AUTO',
    'to': 'AUTO',
    'smartresult': 'dict',
    'client': 'fanyideskweb',
    'salt': '1528127663128',
    'sign': 'c060b56b628f82259225f751c12da59a',
    'doctype': 'json',
    'version': '2.1',
    'keyfrom': 'fanyi.web',
    'action': 'FY_BY_REALTIME',
    'typoResult': 'false'
}

data = urllib.parse.urlencode(fromdata).encode('utf-8')

headers = {
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36'
}

request = urllib.request.Request(url, data=data, headers=headers)

html = urllib.request.urlopen(request).read().decode()

print(html)</code></pre>
<blockquote>获取AJAX加载的内容</blockquote>
<p><code>AJAX</code>一般返回的是<code>JSON</code>,直接对<code>AJAX</code>地址进行<code>post</code>或<code>get</code>,就返回<code>JSON</code>数据了。</p>
<p>“作为一名爬虫工程师，最需要关注的是数据的来源”</p>
<pre><code># -*- coding:utf-8 -*-

import urllib.request
import urllib.parse


url = 'https://movie.douban.com/j/search_subjects?'
headers = {
    'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36'
}
formdata = {
    'type': 'movie',
    'tag': '热门',
    'sort': 'recommend',
    'page_limit': 20,
    'page_start': 40
}

data = urllib.parse.urlencode(formdata).encode('utf-8')
request = urllib.request.Request(url, data=data, headers=headers)
html = urllib.request.urlopen(request).read().decode()

print(html)</code></pre>
<blockquote>处理HTTPS请求 SSL证书验证</blockquote>
<p>网站的<code>SSL证书</code>是经过<code>CA认证</code>的，则能够正常访问<br>单独处理SSL证书，让程序忽略SSL证书验证错误</p>
<pre><code># -*- coding:utf-8 -*-

import urllib.request
import ssl

# 表示忽略未经核实的SSL证书认证
context = ssl._create_unverified_context()

url = "https://www.12306.cn/mormhweb/"

headers = {
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.99 Safari/537.36"
}

request = urllib.request.Request(url, headers = headers)

# 在urlopen()方法里 指明添加 context 参数
response = urllib.request.urlopen(request, context = context)

print(response.read())</code></pre>
<p><code>CA</code>: 数字证书认证中心的简称，是指发放、管理、废除数字证书的受信任的第三方机构(类似与身份证)<br><code>CA</code>的作用: 检查证书持有者身份的合法性，并签发证书，以防证书被伪造或篡改，以及对证书和密钥进行管理</p>
<p>一般正常的网站都会主动出示自己的数字证书，来确保客户端和网站服务器之间的通信数据是加密安全的.</p>
<blockquote>Handler和Opener的使用</blockquote>
<p>自定义<code>Handler</code></p>
<pre><code># -*- coding:utf-8 -*-

import urllib.request

# 构建一个HTTPHandler处理器对象，支持处理HTTP的请求
# http_hander = urllib.request.HTTPHandler()
http_hander = urllib.request.HTTPHandler(debuglevel=1)

# 调用build_opener()方法构建一个自定义的opener对象，参数是构建的处理器对象
opener = urllib.request.build_opener(http_hander)

req = urllib.request.Request('http://www.baidu.com')

res = opener.open(req)

print(res.read().decode())
</code></pre>
<blockquote>开放代理和私密代理</blockquote>
<p>高匿：无法拿到真正的物理ip，只能获取代理服务器ip<br>透明：能看到代理服务器ip，也可以看到物理ip地址<br><a href="https://www.kuaidaili.com/" rel="nofollow noreferrer">快代理</a><br><a href="http://www.xicidaili.com/" rel="nofollow noreferrer">西刺免费代理</a></p>
<p>使用代理IP，这是爬虫/反爬虫的第二大招，通常也是最好用的。<br>很多网站会检测某一段时间某个IP的访问次数(通过流量统计，系统日志等)，如果访问次数多的不像正常人，它会禁止这个IP的访问。<br>可以设置一些代理服务器，每隔一段时间换一个代理，就算IP被禁止，依然可以换个IP继续爬取。</p>
<pre><code># -*- coding:utf-8 -*-

import urllib.request


# 代理开关，是否启用代理
proxyswitch = True

# 公开代理
proxy_ip = {
  'http': '123.57.217.208:3128'
}

# 私密代理 授权的账号密码
# proxy_ip_auth = {
#   'http': 'user:passwd@ip:prot'
# }

# 构建一个handler对象，参数是一个字典类型，包括代理类型和代理服务器ip+prot
http_proxy_handler = urllib.request.ProxyHandler(proxy_ip)

# 构建一个没有代理对象的处理器对象
null_proxy_headler = urllib.request.ProxyHandler({})


if proxyswitch:
  opener = urllib.request.build_opener(http_proxy_handler)
else:
  opener = urllib.request.build_opener(null_proxy_headler)

# 构建一个全局的opener,之后的所有请求都可以用urlopen()方式发送，也附带Handler功能
urllib.request.install_opener(opener)
request = urllib.request.Request('http://www.baidu.com/')
response = urllib.request.urlopen(request)

# response = opener.open(request)

print(response.read().decode())</code></pre>
<p><code>ProxyBasicAuthHandler</code>(代理授权验证):</p>
<pre><code>#conding=utf-8

import urllib.request


user = ''
passwd = ''
proxyserver = ''

# 构建一个密码管理对象，用来保存需要处理的用户名和密码
passwdmgr = urllib.request.HTTPPasswordMgrWithDefaultRealm()

# 添加账户信息，第一个参数realm是与远程服务器相关的域信息，一般都是写None，后面三个参数分别是 代理服务器、用户名、密码
passwdmgr.add_password(None, proxyserver, user, passwd)

# 构建一个代理基础用户名/密码验证的ProxyBasicAuthHandler处理器对象，参数是创建的密码管理对象
proxy_auth_handler = urllib.request.ProxyDigestAuthHandler(passwdmgr)

# 通过 build_opener()方法使用这些代理Handler对象，创建自定义opener对象，参数包括构建的 proxy_handler 和 proxyauth_handler
opener = urllib.request.build_opener(proxy_auth_handler)

request = urllib.request.Request('http://www.baidu.com/')
response = opener.open(request)

print(response.read().decode())</code></pre>
<h2>Cookie</h2>
<p>Cookie 是指某些网站服务器为了辨别用户身份和进行Session跟踪，而储存在用户浏览器上的文本文件，Cookie可以保持登录信息到用户下次与服务器的会话。</p>
<p>HTTP是无状态的面向连接的协议, 为了保持连接状态, 引入了Cookie机制 Cookie是http消息头中的一种属性</p>
<pre><code>Cookie名字（Name）
Cookie的值（Value）
Cookie的过期时间（Expires/Max-Age）
Cookie作用路径（Path）
Cookie所在域名（Domain），
使用Cookie进行安全连接（Secure）。

前两个参数是Cookie应用的必要条件，另外，还包括Cookie大小（Size，不同浏览器对Cookie个数及大小限制是有差异的）。</code></pre>
<p>Cookie由变量名和值组成，根据 Netscape公司的规定，Cookie格式如下：</p>
<p><code>Set－Cookie: NAME=VALUE；Expires=DATE；Path=PATH；Domain=DOMAIN_NAME；SECURE</code></p>
<p>在<code>Python</code>处理<code>Cookie</code>，一般是通过<code>cookielib</code>模块和<code>urllib2</code>模块的<code>HTTPCookieProcessor</code>处理器类一起使用。</p>
<p><code>cookielib</code>模块：主要作用是提供用于存储<code>cookie</code>的对象</p>
<p><code>HTTPCookieProcessor</code>处理器：主要作用是处理这些<code>cookie</code>对象，并构建<code>handler</code>对象。</p>
<blockquote>cookielib 库</blockquote>
<p>该模块主要的对象有<code>CookieJar</code>、<code>FileCookieJar</code>、<code>MozillaCookieJar</code>、<code>LWPCookieJar</code></p>
<p>一般情况下，只用<code>CookieJar()</code>,如果需要和本地文件交互，就需要使用<code>MozillaCookjar()</code>和<code>LWPCookieJar()</code></p>
<p>获取Cookie，并保存到CookieJar()对象中:</p>
<pre><code>#!/usr/local/bin/python

import urllib.request
import http.cookiejar

cookiejar = http.cookiejar.CookieJar()

http_handler = urllib.request.HTTPCookieProcessor(cookiejar)

opener = urllib.request.build_opener(http_handler)

opener.open('http://www.baidu.com')

cook_str = ''
for item in cookiejar:
    cook_str = cook_str + item.name + '=' + item.value + ';'

print(cook_str[:-1])

# BAIDUID=5DB0FC0C0DC9692BB8EE6EDC93A2EDEA:FG=1;BIDUPSID=5DB0FC0C0DC9692BB8EE6EDC93A2EDEA;H_PS_PSSID=1468_26259_21099_26350_26580;PSTM=1528615563;BDSVRTM=0;BD_HOME=0</code></pre>
<p>访问网站获得cookie，并把获得的cookie保存在cookie文件中：</p>
<pre><code>#!/usr/local/bin/python

import http.cookiejar
import urllib.request

filename = 'cookie.txt'

# 声明一个MozillaCookieJar(有save实现)对象实例来保存cookie，之后写入文件
cookiejar = http.cookiejar.MozillaCookieJar(filename)

handler = urllib.request.HTTPCookieProcessor(cookiejar)
opener = urllib.request.build_opener(handler)
req = opener.open('http://www.baidu.com')

# 保存cookie到本地文件
cookiejar.save()

print(1)</code></pre>
<h2>非结构化数据和结构化数据</h2>
<p>实际上爬虫一共就四个主要步骤：</p>
<ul>
<li>明确目标 (要知道准备在哪个范围或者网站去搜索)</li>
<li>爬 (将所有的网站的内容全部爬下来)</li>
<li>取 (去掉对没用处的数据)</li>
<li>处理数据（按照想要的方式存储和使用）</li>
</ul>
<blockquote>re模块</blockquote>
<pre><code>pattern = re.compile(regExp)

pattern.match(): 从起始位置开始查找，返回第一个符合规则的，只匹配一次。
pattern.search(): 从任意位置开始查找，返回第一个符合规则的，只匹配一次。
pattern.findall(): 所有的全部匹配，返回列表
pattern.split(): 分割字符串，返回列表
pattern.sub(): 替换</code></pre>
<pre><code>rs.I 忽略大小写
re.S 全文匹配</code></pre>
<hr>
<p><code>match(str, begin, end)</code>:</p>
<pre><code>&gt;&gt;&gt; pattern = re.compile(r'([a-z]+) ([a-z]+)', re.I)
&gt;&gt;&gt; m = pattern.match('hello world hello python')
&gt;&gt;&gt; m.group()
'hello world'
&gt;&gt;&gt; m.group(1)
'hello'
&gt;&gt;&gt; m.group(2)
'world'</code></pre>
<hr>
<p><code>findall(str, begin, end)</code>:</p>
<pre><code>&gt;&gt;&gt; pattern = re.compile(r'\d+')
&gt;&gt;&gt; pattern.findall('hello world 123 456 789')
['123', '456', '789']
&gt;&gt;&gt; </code></pre>
<p><code>split(str, count)</code>:</p>
<pre><code>&gt;&gt;&gt; pattern = re.compile(r'[\s\d\;]+')
&gt;&gt;&gt; pattern.split('a b\a;m; a  ')
['a', 'b\x07', 'm', 'a', '']
&gt;&gt;&gt; 
&gt;&gt;&gt; pattern = re.compile('[\s\d\;]+')
&gt;&gt;&gt; pattern.split(r'a b\a;m; a  ')
['a', 'b\\a', 'm', 'a', '']
&gt;&gt;&gt; </code></pre>
<p><code>sub()</code>:</p>
<pre><code>&gt;&gt;&gt; pattern = re.compile(r'(\w+)(\w+)')
&gt;&gt;&gt; strs = 'hello 123, world 456'
&gt;&gt;&gt; pattern.sub('hello world', strs)
'hello world hello world, hello world hello world'
&gt;&gt;&gt;</code></pre>
<h2>xpath</h2>
<p><code>chrome</code>插件：<code>XPath Helper</code><br><code>XPath (XML Path Language)</code> 是一门在 <code>XML</code> 文档中查找信息的语言，可用来在<code>XML</code>文档中对元素和属性进行遍历。</p>
<p><code>lxml</code>库：<br><code>lxml</code>是 一个<code>HTML/XML</code>的解析器，主要的功能是如何解析和提取<code>HTML/XML</code>数据。</p>
<p>获取属性：<code>@src</code>, <code>@title</code>, <code>@class</code><br>获取内容: <code>/text()</code><br>模糊查询: <code>contains(@id, '模糊字符串')</code></p>
<p><code>xpath</code>匹配规则:</p>
<pre><code>//div[@class="pic imgcover"]/img/@src</code></pre>
<p><code>xpath</code>模糊匹配：</p>
<pre><code>//div[contains(@id, 'qiushi_tag')]</code></pre>
<p>获取某个网站的图片：</p>
<pre><code>#conding=utf-8

import urllib.request
import urllib.parse
from lxml import etree # 我乃河北，姓氏颜良

class getQdailyImg:
    def __init__(self, url):
        self.url = url

    def loadPage(self):
        print('正在下载...')
        headres = {
            'User-Agent': 'ie 的user-Agent'
        }
        req = urllib.request.Request(self.url, headers=headres)
        html = urllib.request.urlopen(req).read().decode()
        xmlDom = etree.HTML(html)
        linkList = xmlDom.xpath('//div[@class="pic imgcover"]/img/@src')
        print(linkList)
        self.writePage(linkList)

    def writePage(self, data):
        for item in data:
            with open('img.txt', 'w') as f:
                f.write(item)

if __name__ == '__main__':
    qdI = getQdailyImg('http://www.qdaily.com/')
    qdI.loadPage()</code></pre>
<hr>
<pre><code># -*- coding:utf-8 -*-

import urllib.request
import json
from lxml import etree

url = 'http://www.qiushibaike.com/8hr/page/1'
headers = {
    'user-agent': 'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; GTB7.0)'
}

req = urllib.request.Request(url, headers=headers)
html = urllib.request.urlopen(req).read()
text = etree.HTML(html)

# 作为根目录节点
node_list = text.xpath('//div[contains(@id, "qiushi_tag")]')

items = {}
for node in node_list:
    username = node.xpath('./div[@class="author clearfix"]//h2/text()')[0]

    image = node.xpath('.//div[@class="thumb"]//@src')

    content = node.xpath('.//div[@class="content"]/span')[0].text

    zan = node.xpath('.//i')[0].text

    comment = node.xpath('.//i')[1].text

    items = {
        'username': username,
        'image': image,
        'content': content,
        'zan': zan,
        'comment': comment
    }

    with open('qiushi.json', 'a') as f:
        f.write(json.dumps(items, ensure_ascii=False) + '\n')

print('ok')</code></pre>
<h2>BeautifulSoup</h2>
<p><code>Beautiful Soup</code>也是一个<code>HTML/XML</code>的解析器，主要的功能也是如何解析和提取 <code>HTML/XML</code>数据。</p>
<p><code>BeautifulSoup</code>用来解析<code>HTML</code>比较简单，API非常人性化，支持CSS选择器、Python标准库中的HTML解析器，也支持<code>lxml</code>的 XML解析器。</p>
<p><code>pip install bs4</code><br><a href="http://beautifulsoup.readthedocs.io/zh_CN/v4.4.0" rel="nofollow noreferrer">beautifulsoup4文档</a></p>
<ul>
<li>tag: <code>BeautifulSoup(html).div</code>
</li>
<li>attrs: <code>BeautifulSoup(html).div.name</code>，<code>BeautifulSoup(html).div.attres</code>
</li>
<li>content: <code>BeautifulSoup(html).span.string</code>
</li>
</ul>
<pre><code>#conding=utf-8

from bs4 import BeautifulSoup
import requests
import time

def captchaMethod(captcha_data):
    with open('captcha.jpg', 'wb') as f:
        f.write(captcha_data)
    return input('请输入验证码：')     

def getLoginZhihu():
    # 构建Session对象，保存cookie值
    sess = requests.Session()

    headers = {
        'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.101 Safari/537.36 QQBrowser/4.3.4986.400'
    }

    html = sess.post('https://www.zhihu.com/#sigin', headers=headers).text
    bs = BeautifulSoup(html, 'lxml')
    _xsrf = bs.find('input', attrs={'name': '_xsrf'}).get('value')

    captcha_url = 'https://www.zhihu.com/captcha.gif?r=%d&amp;type=login' % (time.time() * 1000)
    captcha = sess.get(captcha_url, headers=headers).content

    # 获取验证码文字
    text = captchaMethod(captcha)

    data = {
        '_xsrf': _xsrf,
        'email': '123636374@qq.com',
        'password': 'ALARMCHIME',
        'captcha': text
    }
    # 登录 获取cookie
    res = sess.post('https://www.zhihu.com/login/email', data=data, headers=headers).text

    res = sess.get('https://www.zhihu.com/people/', headers)

if __name__ == '__main__':
    getLoginZhihu()
    </code></pre>
<h2>JSON和JSONPATH</h2>
<p><code>Json</code>和<code>JsonPath</code>应用</p>
<ul>
<li>
<code>json.loads()</code>: 把Json格式字符串解码转换成Python对象</li>
<li>
<code>json.dumps()</code>: 实现python类型转化为json字符串，返回一个str对象 把一个Python对象编码转换成Json字符串</li>
<li>
<code>json.dump()</code>: 将Python内置类型序列化为json对象后写入文件</li>
<li>
<code>json.load()</code>: 读取文件中json形式的字符串元素 转化成python类型</li>
</ul>
<pre><code>dictStr = {"city": "北京", "name": "大猫"}
print(json.dumps(dictStr, ensure_ascii=False))
# {"city": "北京", "name": "大刘"}

listStr = [{"city": "北京"}, {"name": "大刘"}]
json.dump(listStr, open("listStr.json","w"), ensure_ascii=False)

strDict = json.load(open("dictStr.json"))
print(strDict)
# {u'city': u'\u5317\u4eac', u'name': u'\u5927\u5218'}</code></pre>
<hr>
<pre><code># -*- coding:utf-8 -*-

import json
import urllib.request
import jsonpath

headers = {
    'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.101 Safari/537.36 QQBrowser/4.3.4986.400'
}
url = 'https://www.lagou.com/lbs/getAllCitySearchLabels.json'

request = urllib.request.Request(url, headers=headers)

response = urllib.request.urlopen(request)
html = response.read().decode()

unicodeStr = json.loads(html)
content = jsonpath.jsonpath(unicodeStr, '$..name')
print(content)
array = json.dumps(content, ensure_ascii=False)

with open('lagoucontent.json', 'w') as f:
    f.write(array)</code></pre>
<h2>多线程爬虫</h2>
<p>一个进程可能包括多个线程，线程之间执行任务，必须通过加锁方式控制它们（阻塞）<br>父线程和子线程都关系，只要父线程执行完，不管子线程如何，都一并结束</p>
<ol>
<li>计算机的核心是CPU，CPU承担了所有的计算任务</li>
<li>一个CPU核心一次只能执行一个任务<br>多个CPU核心同时可以执行多个任务</li>
<li>一个CPU一次只能执行一个进程，其它进程处于非运行</li>
<li>进程里包含的执行单元叫线程<br>一个进程 可以包含 多个线程</li>
<li>一个进程的内存空间是共享的，每个进程里的线程都可以使用这个共享空间<br>一个线程在使用这个共享空间的时候，其它线程必须等待它结束</li>
<li>通过“锁”实现，作用就是防止多个线程使用当前内存空间。<br>先使用的线程会加锁，锁上该空间，其它线程就在等待。</li>
</ol>
<p>进程：表示程序的一次执行<br>线程：CPU运算的基本调度单位</p>
<p>GIL： Python里的执行通行证，而且只有唯一个。拿到通行证的线程才会执行</p>
<p>Python 的多线程适用于：大量密集的I/O处理 （单独都任务，一个进程，只能执行一个任务）<br>Python 的多进程适用于：大量的密集并行计算</p>
<pre><code>#conding=utf-8

import json
import threading
from queue import Queue

import requests
from lxml import etree

CREAWL_EXIT = False
PARSE_EXIT = False

'''
    采集线程
'''
class ThreadCrawl(threading.Thread):
    def __init__(self, threadName, pageQueue, dataQueue):
        # threading.Thread.__init__(self)
        super(ThreadCrawl, self).__init__() # 多个父类，多重继承
        self.threadName = threadName
        self.pageQueue = pageQueue
        self.dataQueue = dataQueue
        self.headers = {
            'user-agent': 'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; GTB7.0)'
        }

    def run(self):
        print('start' + self.threadName)
        while not CREAWL_EXIT:
            try:
                page = self.pageQueue.get(False)
                url = 'https://www.qiushibaike.com/8hr/page/' + str(page) + '/'
                res = requests.get(url, headers=self.headers).text
                self.dataQueue.put(res)
            except:
                pass
        print('end' + self.threadName)      

'''
    解析线程
'''
class ThreadParse(threading.Thread):
    def __init__(self, threadingName, dataQueue, filename):
        super(ThreadParse, self).__init__()
        self.threadingName = threadingName
        self.dataQueue = dataQueue
        self.filename = filename

    def run(self):
        print('start' + self.threadingName)
        while not PARSE_EXIT:
            try:
                html = self.dataQueue.get(False)
                self.parse(html)
            except:
                pass
        print('end' + self.threadingName)


    def parse(self, html):
        text = etree.HTML(html)
        node_list = text.xpath('//div[contains(@id, "qiushi_tag")]')
        items = {}
        for node in node_list:
            username = node.xpath('./div[@class="author clearfix"]//h2/text()')[0]
            image = node.xpath('.//div[@class="thumb"]//@src')
            content = node.xpath('.//div[@class="content"]/span')[0].text
            zan = node.xpath('.//i')[0].text
            comment = node.xpath('.//i')[1].text
            items = {
                'username': username,
                'image': image,
                'content': content,
                'zan': zan,
                'comment': comment
            }
            self.filename.write(json.dumps(items, ensure_ascii=False) + '\n')


def main():
    # 页码
    pageQueue = Queue(10)
    # 放入1～10的数字
    for i in range(1, 10+1):
        pageQueue.put(i)

    # 采集结果（每页的HTML源码）
    dataQueue = Queue()

    filename = open('duanzi.json', 'a')

    crawlList = ['采集线程1', '采集线程2', '采集线程3']

    threadcrawl = []
    for threadName in crawlList:
        thread = ThreadCrawl(threadName, pageQueue, dataQueue)
        thread.start()
        threadcrawl.append(thread)
    
    parseList = ['解析线程1', '解析线程2', '解析线程3']
    threadparse = []
    for threadName in parseList:
        thread = ThreadParse(threadName, dataQueue, filename)
        thread.start()
        threadparse.append(thread)
    
    # 等待pageQueue队列为空， 或者 数据队列为空，也就是等待之前执行的操作执行完毕
    while not pageQueue.empty() or not dataQueue.empty():
        pass

    global CREAWL_EXIT
    CREAWL_EXIT = True
    print('queue队列为空')

    global PARSE_EXIT
    PARSE_EXIT = True
    print('data队列为空')

    for threadItem in crawlList:
        threadItem.join('')
        print('1')

if __name__ == '__main__':
    main()</code></pre>
<p>自动化测试<code>unittest</code>模块使用和模拟用户点击抓取数据（拿去ajax分页数据）</p>
<pre><code># -*- coding:utf-8 -*-

import unittest
from selenium import webdriver
from bs4 import BeautifulSoup as bs

class Douyu(unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.PhantomJS()

    # unittest测试方法必须有`test`字样开头
    def testDouyu(self):
        self.driver.get('https://www.douyu.com/directory/all')
        while True:
            soup = bs(self.driver.page_source, 'lxml')
            names = soup.find_all('h3', {'class': 'ellipsis'})
            viewNums = soup.find_all('span', {'class': 'dy-num fr'})
            
            for name, viewNum in zip(names, viewNums):
                print('房间名' + name.get_text() + '; ' + '观众人数' + viewNum.get_text())

            # 在页面源码中找到"下一页"未隐藏的标签，就退出循环
            if self.driver.page_source.find('shark-pager-disable-next') != -1:
                break

            # 一直点击下一页
            self.driver.find_element_by_class_name('shark-pager-next').click()    

    # 测试结束执行的方法
    def tearDown(self):
        self.driver.quit()

if __name__ == '__main__':
    unittest.main()</code></pre>
<p>执行<code>javascript</code>语句：<code>execute_script</code></p>
<pre><code>#conding=utf-8

from selenium import webdriver
import time

driver = webdriver.PhantomJS('/Users/linxingzhang/Library/Python/3.6/lib/python/site-packages/selenium/webdriver/phantomjs')
driver.get("https://movie.douban.com/typerank?type_name=剧情&amp;type=11&amp;interval_id=100:90&amp;action=")

time.sleep(3)
# 向下滚动10000像素
js = "document.body.scrollTop=10000"
# js="var q=document.documentElement.scrollTop=10000"

# 查看页面快照
driver.save_screenshot("douban.png")

# 执行JS语句
driver.execute_script(js)
time.sleep(10)

# 查看页面快照
driver.save_screenshot("newdouban.png")

driver.quit()</code></pre>
<blockquote>投票</blockquote>
<pre><code>import datetime
import sys
import threading
import time
from random import choice  # choice() 方法返回一个列表，元组或字符串的随机项

import requests
from lxml import etree

from fake_useragent import UserAgent  # 引入随机的UA

# 设置user-agent列表,每次请求时，随机挑选一个user-agent
ua_list = UserAgent()


def get_ip():
    '''
        获取代理ip
    '''
    url = 'http://www.xicidaili.com/nn'
    headers = {
        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
        'Host': 'www.xicidaili.com',
        'Referer': 'http: // www.xicidaili.com/nn',
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.26 Safari/537.36 Core/1.63.6726.400 QQBrowser/10.2.2265.400'
    }
    ret = requests.get(url, headers=headers)
    xmlDom = etree.HTML(ret.text)

    data = xmlDom.xpath('//table[@id="ip_list"]//tr')
    z = []
    for tr in data:
        if tr.xpath('td'):
            ip = tr.xpath('td')[1].text  # 获取所有IP
            port = tr.xpath('td')[2].text  # 获取所有端口
            z.append(ip + ':' + port)
    return z


def get_url(url, code=0, ips=[]):
    '''
        投票
        如果因为代理IP已失效造成投票失败，则会自动换一个代理IP后继续投票
    '''
    try:
        ip = choice(ips)
        print(ip, 'ip' * 5)
    except:
        return False
    else:
        proxies = {
            'http': ip
        }
        headers = {
            'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',
            'Host': 'best.zhaopin.com',
            'Origin': 'https: // best.zhaopin.com',
            'Referer': 'https//best.zhaopin.com/?sid=121128100&amp;site=sou',
            'User-Agent': ua_list.random
        }
        print(ua_list.random, 'ua_list' * 5)

    try:
        data = {'bestid': '3713', 'score': '5,5,5,5,5,5', 'source': 'best'}
        # 跳过证书的验证 verify=False
        result = requests.post(url, data=data, headers=headers, proxies=proxies)
        print(result, 'result' * 5)
    except requests.exceptions.ConnectionError:
        print('ConnectionError')
        if not ips:
            print('ip 失效')
            sys.exit()

        # 删除不可用的代理IP
        if ip in ips:
            ips.remove(ip)
        # 重新请求url
        get_url(url, code=0, ips=[])
    else:
        date = datetime.datetime.now().strftime('%H:%M:%S')
        # result.text() 投票成功显示1  失败显示0
        print('第%s次 [%s] [%s]：投票%s (剩余可用代理IP数：%s)' %
              (code, date, ip, result.text, len(ips)))


def main():
    url = 'https://best.zhaopin.com/API/ScoreCompany.ashx'  # 投票的请求
    ips = []
    for i in range(6000):
        if i % 1000 == 0:
            ips.extend(get_ip())
            # print('-' * 100)
            # print(ips)
        t = threading.Thread(target=get_url, args=(url, i, ips))
        t.start()
        time.sleep(1)


if __name__ == '__main__':
    main()
</code></pre>
<h2>Tesseract</h2>
<p>机器识别中的<code>文字识别</code></p>
<pre><code>pip install pytesseract</code></pre>
<p>识别图片中的文字：</p>
<pre><code>#conding=utf-8

import pytesseract
from PIL import Image

image = Image.open('./mayday.jpg')

text = pytesseract.image_to_string(image)

print(text)</code></pre>
<h2>asyncio &amp; aiohttp</h2>
<p>通过异步库<code>aiohttp</code>,<code>asyncio</code>爬取图片</p>
<pre><code># -*- coding:utf-8 -*-
import asyncio
import os
import time

import aiohttp
import requests


class Spider(object):
    def __init__(self):
        self.num = 1
        if 'load-img' not in os.listdir('.'):
            os.mkdir('load-img')
        self.path = os.path.join(os.path.abspath('.'), 'load-img')
        os.chdir(self.path)  # 进入文件下载路径

    def run(self):
        start = time.time()
        for x in range(1, 101): # 爬取100张图片，更改数值，爬取更多图片
            links = self.__get_img_links(x)
            tasks = [asyncio.ensure_future(self.__download_img(
                (link['id'], link['links']['download'])
            )) for link in links]
            loop = asyncio.get_event_loop()
            loop.run_until_complete(asyncio.wait(tasks))
            # if self.num &gt;= 10:
            #     break
        end = time.time()
        print('run %s s' % (end - start))

    def __get_img_links(self, page):
        url = 'https://unsplash.com/napi/photos'
        data = {
            'page': page,
            'per_page': 12,
            'order_by': 'latest'
        }
        response = requests.get(url, params=data)
        if response.status_code == 200:
            return response.json()
        else:
            print('request %s' % response.status_code)

    async def __download_img(self, img):
        content = await self.__get_content(img[1])
        with open(img[0] + '.jpg', 'wb') as f:
            f.write(content)
        print('load %s page success' % self.num)
        self.num += 1

    async def __get_content(self, link):
        async with aiohttp.ClientSession() as session:
            response = await session.get(link)
            content = await response.read()
            return content


def main():
    spider = Spider()
    spider.run()


if __name__ == '__main__':
    main()
</code></pre>

                </div>
                                                
                <div class="clearfix mt10">
                    <ul class="article-operation list-inline pull-left mt15"><li><a target="_blank"href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><img class="mb5" src="https://static.segmentfault.com/v-5bebf0aa/global/img/creativecommons-cc.svg" height="20"/></a></li><li class="dropdown js__content-ops hidden-xs" data-module="article"
                                data-id="1190000014981939"
                                data-typetext="文章"><a href="javascript:void(0);" class="dropdown-toggle text-muted" data-toggle="dropdown"><i class="fa fa-ellipsis-h" aria-hidden="true"></i></a><ul class="dropdown-menu dropdown-menu-left"><li><a href="#911"
                                           data-toggle="modal"
                                           data-target="#911"
                                           data-action="report"
                                        >举报</a></li></ul></li></ul>
                    <div class="pull-right mt-10 hidden-xs">
                        <div class="widget-share__full" data-text="Python_爬虫基础"
 data-url="https://segmentfault.com/a/1190000014981939" data-shorturl="http://sfau.lt/b5ba1El"></div>


                    </div>
                </div>
                <div class="mt10 text-center mb30"><button type="button" id="mainLike" data-id="1190000014981939"
                                    class="btn btn-success btn-lg mr15 "><span id="mainLikeText">赞</span>&nbsp;&nbsp;<span class="seprator">|</span>&nbsp;&nbsp;
                                <span id="mainLikeNum">0 </span></button><button type="button" id="mainBookmark" data-type="article" data-id="1190000014981939"
                                    class="btn btn-default btn-lg "><span id="mainBookmarkText">收藏</span>&nbsp;&nbsp;<span class="seprator">|</span>&nbsp;&nbsp;<span id="mainBookmarkNum">3</span></button></div>                
                                <script type='text/javascript'>
                    OA_show(3);
                </script>

                <h4 class="pt20 mb15 mt0 border-top">你可能感兴趣的</h4>

                
                <div class="mb15 block">
                    <script type='text/javascript'>
                        OA_show(4);
                    </script>
                </div>

                                <div id="paradigm-article-related"></div>

                
        <div class="comments--news comments--default comments--article 
    " 
    data-id="1190000014981939" data-user-id="" data-author-id="1030000002472926 "
         data-is-admin="null" id="goToReplyArea">
                    <div class="mb10 clearfix">
                <strong class="comments-stat pull-left mr10">评论</strong>

                                                    <div class="btn-group btn-group-xs pull-right comments-sort btn-group-menu" role="menu">
                        <a href="javascript:;" 
                           class="btn btn-default active" data-sort="default">默认排序</a>
                        <a href="javascript:;" 
                           class="btn btn-default" data-sort="desc">时间排序</a>
                    </div>
                            </div>
                <div class="comments-container">
                                <div class="comments-list">
            </div>
    <div class="comments-loading hide">载入中...</div>
        <div class="comments-more hide"><a href="javascript:;">显示更多评论</a></div>
    

                                    <div class="comments-box" id="goToReplyEditor">
                <div class="pull-left">
                    <img class="avatar-32 "
                         src="https://static.segmentfault.com/v-5bebf0aa/global/img/user-128.png"
                         alt=""/>
                </div>
                <div class="comments-box-content">
                    <form action="/api/article/1190000014981939/comments/add">
                        <div class="form-group mb0">
                            <textarea name="text" rows="3" class="form-control"placeholder="文明社会，理性评论"></textarea>
                            <div class="mt15 text-right">
                                <button type="button" class="hide"></button>
                                <button class=" btn btn-primary" type="button">发布评论</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
                                                        </div>
    </div>


                                    
                
                

            </div><!-- /.main -->


            <div class="col-md-3 side hidden-sm hidden-xs mt30">
                                                
                <div class="mb25 hidden-md hidden-sm hidden-xs">
    <img src="https://static.segmentfault.com/sponsor/20181119.png" alt="Planets" usemap ="#gridsMap" width=255 height=136>
    <map name="gridsMap" id="gridsMap"></map>
    <div style="text-align: center;"><a style="text-align:center; color:#9E9E9E; font-size:12px" href="/sponsor">想在上方展示你的广告？</a></div>
            <script async src="https://static.segmentfault.com/sponsor/20181119.js"></script>
    </div>

                                <style>
                    .job-recommend-area a:not(:last-of-type) {margin-bottom:10px; display: block}
                    .job-recommend-area a:hover {text-decoration: none;}
                </style>
                <div class="hidden-md">
                    <div class="job-recommend">
                      <h3 class="job-title">推广链接</h3>
                      <div class="job-recommend-area">
                                                <script type='text/javascript'>
                            OA_show(7);
                            OA_show(9);
                            OA_show(10);
                            OA_show(15);
                            OA_show(16);
                        </script>
                      </div>
                    </div>
                    <style>
                    .job-recommend {margin-bottom: 30px;}
                    .job-title {
                        font-size: 14px;
                        color: #017E66;
                        font-weight: 500;
                        background: #BFE6D7;
                        margin: 0;
                        padding-top: 6px;
                        padding-bottom: 6px;
                        text-align: center;
                    }
                    .job-recommend-area {
                      padding: 13px;
                      border: 3px solid #EBF7F3;
                      border-top: none;
                    }
                    </style>
                    
                                    </div>

                                
                <div class="hidden-md ad-should-be-fixed">
                    <div class="mb25 block">
                        <script type='text/javascript'>
                            OA_show(1);
                        </script>
                    </div>
                </div>
                <div class="post-nav hidden-xs">
                    <div class="panel panel-default widget-outline">
                        <div class="panel-heading">目录</div>
                        <div class="panel-body">
                            <div class="nav-body" style="overflow:scroll">
                                <div class="highlight-title"></div>
                                <ul class="articleIndex"></ul>
                            </div>
                        </div>
                    </div>
                </div>

                
            </div><!-- /.side -->
        </div>
    </div>
</div>

<div id="shareToWeiboModal" class="modal" tabindex='-1'>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">×</span><span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title">分享</h4>
            </div>
            <div class="modal-body">
                <p class="sfModal-content">
                    分享到微博？
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default dont-likeweibo" data-dismiss="modal">取消</button>
                <a href="" id="shareLink" class="btn btn-primary done-btn" target="_blank"
                   onclick="$('#shareToWeiboModal').modal('hide')">分享</a>
            </div>
        </div>
    </div>
</div>


<div class="modal widget-911" id="911" tabindex='-1'>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal" type="button">
          <span aria-hidden="true">&times;</span>
          <span class="sr-only">Close</span>
        </button>
        <h4 class="modal-title"><span data-model="action"></span><span data-model="type"></span></h4>
      </div>
      <div class="modal-body">
        <form id="reportForm">
          <!-- 后台返回信息 -->
          <p class="alert alert-warning" data-model="returnMsg"></p>
          <div data-role="base">
            <p>
              <strong class="required">我要<span data-model="action"></span>该<span data-model="type"></span>，理由是：</strong>
            </p>
            <ul class="list-unstyled" data-model="list"></ul>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-default pull-left" type="button" data-role="back" style="display:none">返回重选</button>
                <button class="btn btn-default" data-dismiss="modal" type="button">取消</button>
        <button class="btn btn-primary" data-role="submit" type="button">提交</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div class="modal widget-seo" id="seo" tabindex='-1'>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" data-dismiss="modal" type="button">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title"><span data-model="action"></span><span data-model="type"></span></h4>
            </div>
            <div class="modal-body">
                <form id="seoForm">
                    <!-- 后台返回信息 -->
                    <p class="alert alert-warning" data-model="returnMsg"></p>
                    <div data-role="base">
                        <div class="form-group">
                            <label>SEO标题：</label><textarea style="min-height: 35px; width: 100%; max-height: 132px; overflow: hidden; overflow-wrap: break-word; height: 32px;" name="title" class="form-control" rows="1" placeholder="请输入SEO标题"></textarea>
                        </div>
                        <div class="form-group">
                            <label>SEO描述：</label><textarea style="min-height: 35px; max-height: 132px; overflow: hidden; overflow-wrap: break-word; height: 32px;" name="desc" class="form-control" rows="1" placeholder="请输入SEO描述"></textarea>
                        </div>
                        <div class="form-group">
                            <label>SEO keywords：</label><textarea style="min-height: 35px; max-height: 132px; overflow: hidden; overflow-wrap: break-word; height: 32px;" name="keywords" class="form-control" rows="1" placeholder="请输入SEO keywords"></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal" type="button">取消</button>
                <button class="btn btn-primary" data-role="submit" type="button">提交</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

    <div id="loginBanner"  class="hidden-sm hidden-xs loginBanner">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-7">
                <h1 class="title">在 SegmentFault，学习技能、解决问题</h1>
                <p class="desc">每个月，我们帮助 1000 万的开发者解决各种各样的技术问题。并助力他们在技术能力、职业生涯、影响力上获得提升。</p>
            </div>
            <div class="col-lg-3 col-lg-offset-3 col-md-4 col-md-offset-1">
                <form class="register-form clearfix" action="/api/user/phone/register">

                    
                    <a href="/user/register" class="SFLogin btn btn-lg btn-primary mr15">免费注册</a>
                    <a href="/user/login" class="SFRegister btn btn-lg btn-primary">立即登录</a>
                </form>
            </div>
        </div>
    </div>
    </div>






<footer id="footer">
    <div class="container">
        <div class="row hidden-xs">
            <dl class="col-sm-2 site-link">
                <dt>产品</dt>
                
                <dd><a href="/questions/hottest?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=热门问答">热门问答</a></dd>
                <dd><a href="/blogs/hottest?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=热门专栏">热门专栏</a></dd>
                <dd><a href="/lives?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=热门讲堂">热门讲堂</a></dd>
                <dd><a href="/events?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=最新活动">最新活动</a></dd>
                <dd><a href="/groups?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=圈子">圈子</a></dd>
                <dd><a href="/jobs?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=找工作">找工作</a></dd>
                <dd><a href="/app?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=app">移动客户端</a></dd>
                
            </dl>
            
            <dl class="col-sm-2 site-link">
                <dt>资源</dt>
                <dd><a href="/weekly?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-weekly&utm_term=每周精选">每周精选</a></dd>
                <dd><a href="/users?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-users&utm_term=用户排行榜">用户排行榜</a></dd>
                <dd><a href="/badges?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-badges&utm_term=徽章">徽章</a></dd>
                <dd><a href="/faq?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-faq&utm_term=帮助中心">帮助中心</a></dd>
                <dd><a href="/repu?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-repu&utm_term=声望与权限">声望与权限</a></dd>
                <dd><a href="/community?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-community&utm_term=社区服务中心">社区服务中心</a></dd>
                <dd><a href="https://docs.segmentfault.com?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-docs&utm_term=开发手册">开发手册</a></dd>

   
            </dl>

            <dl class="col-sm-2 site-link">
                <dt>商务</dt>
                <dd><a href="https://business.segmentfault.com/services?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-services-rencai&utm_term=人才服务" target="_blank">人才服务</a></dd>
                <dd><a href="https://business.segmentfault.com/services?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-services-qiyeneixun&utm_term=企业服务" target="_blank">企业培训</a></dd>
                <dd><a href="https://business.segmentfault.com/services?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-services-huodongcehua&utm_term=活动策划" target="_blank">活动策划</a></dd>
                <dd><a href="https://business.segmentfault.com/ads?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-ads&utm_term=广告投放" target="_blank">广告投放</a></dd>
                <dd><a href="https://business.segmentfault.com/bc?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-bc&utm_term=区块链解决方案" target="_blank">区块链解决方案</a></dd>
                <dd><a href="https://business.segmentfault.com/contact?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-contact&utm_term=合作联系" target="_blank">合作联系</a></dd>
            </dl>
            
            <dl class="col-sm-2 site-link">
                <dt>关于</dt>
                <dd><a href="https://about.segmentfault.com/?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=about&utm_content=about-index&utm_term=关于我们">关于我们</a></dd>
                <dd><a href="https://about.segmentfault.com/careers.html?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=about&utm_content=about-careers&utm_term=加入我们">加入我们</a></dd>
                <dd><a href="https://about.segmentfault.com/contact.html?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=about&utm_content=about-contact&utm_term=联系我们">联系我们</a></dd>
            </dl>

            <dl class="col-sm-2 site-link">
                <dt>关注</dt>
                                <dd><a href="//segmentfault.com/blog/segmentfault" target="_blank">产品技术日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/community_admin" target="_blank">社区运营日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/segmentfault_news" target="_blank">市场运营日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/segmentfault_team" target="_blank">团队日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/interview" target="_blank">社区访谈</a></dd>
                                <dd>
                    <ul class="sn-inline">
                        <li>
                            <a class="entypo-wechart icon-sn-weixin weixin-popover-qrcode" data-toggle="popover" data-placement="top"  data-content="">微信</a>
                        </li>
                        <li>
                            <a href="http://weibo.com/segmentfault" target="_blank" class="entypo-weibo icon-sn-weibo" >新浪微博</a>
                        </li>
                        <li>
                            <a href="https://github.com/SegmentFault" target="_blank" class="entypo-facebook icon-sn-github">Github</a>
                        </li>
                        <li>
                            <a href="https://twitter.com/segment_fault" target="_blank" class="entypo-twitter icon-sn-twitter">Twitter</a>
                        </li>
                    </ul>
                </dd>
            </dl>

            <dl class="col-sm-2 site-link" id="license">
                <dt>条款</dt>
                <dd><a href="/tos">服务条款</a></dd>
                <dd><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">内容许可</a></dd>
                <dd>
                    <a href="/app" class="clearfix mt10 block"><img src="https://static.segmentfault.com/v-5bebf0aa/page/img/app/appQrcode.png" class="app-qrcode"></a>
                    <div class="app-download-desc">
                        <p>扫一扫下载 App</p>
                    </div>
                    
                </dd>
            </dl>
        </div>
        <div class="copyright">
            Copyright &copy; 2011-2018 SegmentFault. 当前呈现版本 17.06.16<br>
            <a href="http://www.miibeian.gov.cn/" rel="nofollow">浙ICP备 15005796号-2</a> &nbsp;
            <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602002000" rel="nofollow">浙公网安备 33010602002000号</a>
            <span class="ml5">杭州堆栈科技有限公司版权所有</span>
            <P class="mt30">CDN 存储服务由 <a target="_blank" href="https://www.upyun.com/?utm_source=segmentfault&utm_medium=link&utm_campaign=upyun&md=segmentfault">又拍云</a> 赞助提供 </p>
        </div>
        <p class="text-center">
            <a class="js__view--selector hidden-sm hidden-md hidden-lg" data-action="mobile" href="javascript:;">移动版</a>
            <a class="js__view--selector hidden-sm hidden-md hidden-lg" data-action="desktop" href="javascript:;">桌面版</a>
        </p>
    </div>
</footer>

<div id="fixedTools" class="hidden-xs hidden-sm">
    <a id="backtop" class="hidden border-bottom" href="#">回顶部</a>
</div>

    <script id="loginModal" type="text/template">
    <div class="row bg-white login-modal">
        <div class="col-md-12 login-wrap">
            <form action="/api/user/login" method="POST" role="form" class="mt15">
                <div class="form-group hidden">
                                        <input type="text" class="form-control" name="remember" value="1"
                           autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="username" class="control-label">手机号 或 Email</label>
                    <input type="text" class="form-control" name="username" tabindex="1" required placeholder="11 位手机号 或 Email"
                           autocomplete="off">
                </div>
                <div class="form-group">
                    <label class="control-label">密码</label><span class="pull-right"><a
                                href="/user/forgot" tabindex="4">忘记密码</a></span>
                    <input type="password" class="form-control" name="password" tabindex="2" required placeholder="请输入密码">
                </div>
                <div class="form-group">
                    <a
                            
                                                    href="/user/phoneLogin"
                            class="phoneLogin"
                                            >手机验证码登录</a>
                </div>
                <div class="form-group clearfix">
                    <button type="submit" class="btn-block btn btn-primary pull-right pl20 pr20" tabindex="3"
                            onclick='ga("send", "event", "email login button", "clicked", "login modal");'>登录
                    </button>
                </div>
            </form>
            <div class="text-muted text-center more-login-area">
    <span class="more-login-words">更多登录方式</span>
</div>
<div class="widget-login mb15 text-center">
    <a href="/user/oauth/google" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "google"});'><span
                class="icon-sn-google"></span></a>
    <a href="/user/oauth/github" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "github"});");'><span
                class="icon-sn-github"></span></a>
    <a href="/user/oauth/weibo" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "weibo"});'><span
                class="icon-sn-weibo"></span></a>
    <a href="/user/oauth/qq" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-qq"></span></a>
    <a href="/user/oauth/weixin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-weixin"></span></a>
    <a href="/user/oauth/linkedin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "linkedin"});'><span
                class="icon-sn-linkedin"></span></a>
    <span id="loginShowMore" style="cursor: pointer" class="mb5"><span class="icon-sn-dotted"></span></span>
    <a href="/user/oauth/twitter" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "twitter"});'><span
                class="icon-sn-twitter"></span></a>
    <a href="/user/oauth/facebook" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "facebook"});'><span
                class="icon-sn-facebook"></span></a>
    <a href="/user/oauth/douban" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "douban"});'><span
                class="icon-sn-douban"></span></a>
</div>
<div class="form-group clearfix">
    <a class="btn-block btn btn-default pull-right pl20 pr20 
                        SFLogin
             "

            
        onclick='ga("send", "event", "email login button", "clicked", "login modal");'>
                    注册新账号
            </a>
</div>
<p class="text-muted text-center mb15">登录即表示你同意网站的<a href="/tos" target="_blank">《服务条款》</a></p>        </div>
    </div>
</script>
    <script id="registerModal" type="text/template">
    <div class="row bg-white login-modal">
        <div class="col-md-12 login-wrap">
            
            <form action="/api/user/register" method="POST" role="form" class="mt15">
                <div class="form-group">
                    <label for="name" class="control-label">你的名字</label>
                    <input type="text" class="form-control" name="name" required placeholder="真实姓名或常用昵称">
                </div>
                
                <div class="form-group">
                    <label for="mail" class="control-label">手机号 或 Email</label>
                    <input type="text" class="form-control" id="login-name" name="mail" required placeholder="11 位手机号 或 Email">
                </div>
                
                <input type="text" class="hidden" name="register_type" value="mail">

                <div class="form-group">
                    <div class="phone-register-only hidden">
                        <div class="captchaInput mb10">
                            <input type="text" class="form-control" name="cap" placeholder="右侧的验证码" style="width:50%; display: inline; margin-right: 15px;">
                            <span class="mt10">
                                <a id="loginReloadCaptcha" href="javascript:void(0)">
                                <img src="/user/captcha?w=135&h=34" class="cap" width="135" height="34"/></a>
                            </span>
                        </div>
                        <div class="input-group">
                            <input name="code" type="text" class="form-control js-user-login__phone-code-value" placeholder="短信验证码">
                            <span class="input-group-btn">
                                <button class="btn btn-default js-user-login__phone-vaild-btn" style="width:96px;" type="button">
                                获取验证码</button>
                            </span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="password" class="control-label">密码</label>
                    <input type="password" class="form-control" name="password" required placeholder="不少于 6 位的密码">
                </div>
                <div class="form-group clearfix">
                    <button type="submit" class="btn-block btn btn-primary pl20 pr20 pull-right"
                            onclick='ga("send", "event", "email register button", "clicked", "login modal");'>注册
                    </button>
                </div>
                                <div class="text-muted text-center more-login-area">
    <span class="more-login-words">更多登录方式</span>
</div>
<div class="widget-login mb15 text-center">
    <a href="/user/oauth/google" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "google"});'><span
                class="icon-sn-google"></span></a>
    <a href="/user/oauth/github" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "github"});");'><span
                class="icon-sn-github"></span></a>
    <a href="/user/oauth/weibo" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "weibo"});'><span
                class="icon-sn-weibo"></span></a>
    <a href="/user/oauth/qq" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-qq"></span></a>
    <a href="/user/oauth/weixin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-weixin"></span></a>
    <a href="/user/oauth/linkedin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "linkedin"});'><span
                class="icon-sn-linkedin"></span></a>
    <span id="loginShowMore" style="cursor: pointer" class="mb5"><span class="icon-sn-dotted"></span></span>
    <a href="/user/oauth/twitter" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "twitter"});'><span
                class="icon-sn-twitter"></span></a>
    <a href="/user/oauth/facebook" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "facebook"});'><span
                class="icon-sn-facebook"></span></a>
    <a href="/user/oauth/douban" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "douban"});'><span
                class="icon-sn-douban"></span></a>
</div>
<div class="form-group clearfix">
    <a class="btn-block btn btn-default pull-right pl20 pr20 
                        SFRegister
             "

            
        onclick='ga("send", "event", "email login button", "clicked", "login modal");'>
                    已有账号登录
            </a>
</div>
<p class="text-muted text-center mb15">登录即表示你同意网站的<a href="/tos" target="_blank">《服务条款》</a></p>            </form>
        </div>
    </div>
</script>
    <script id="phoneLoginModal" type="text/template">

    <div class="row bg-white login-modal phonelogin-modal">
        <div class="col-md-12 login-wrap">
            <form action="/api/user/phonelogin" method="POST" role="form" class="mt15">
                <div class="form-group">
                    <label for="phone" class="control-label required">手机号</label>
                    <input type="text" class="form-control phonelogin--phone" name="phone" tabindex="1" required placeholder="11 位手机号"
                           autocomplete="off">
                    <span class="help-block"></span>
                </div>

                <div class="form-group">
                    <label for="authCode" class="control-label required">验证码</label>
                    <div class="input-group">
                        <input type="text" class="form-control bindphone--code" name="authCode" placeholder="短信验证码">
                        <span class="input-group-btn">
                            <button class="btn btn-default user-bind__phone-vaild-btn" type="button">获取验证码</button>
                        </span>
                    </div>
                    <div class="col-sm-3"></div>
                </div>

                <div class="form-group">
                    <a 
                                                            href="/user/login"
                                class="SFRegister"
                                                >密码登录（手机号或 Email）</a>
                </div>
                <div class="form-group clearfix">
                    <button type="submit" class="btn-block btn btn-primary pull-right pl20 pr20" tabindex="3"
                            onclick='ga("send", "event", "email login button", "clicked", "login modal");'>登录
                    </button>
                </div>
            </form>
            <div class="text-muted text-center more-login-area">
    <span class="more-login-words">更多登录方式</span>
</div>
<div class="widget-login mb15 text-center">
    <a href="/user/oauth/google" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "google"});'><span
                class="icon-sn-google"></span></a>
    <a href="/user/oauth/github" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "github"});");'><span
                class="icon-sn-github"></span></a>
    <a href="/user/oauth/weibo" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "weibo"});'><span
                class="icon-sn-weibo"></span></a>
    <a href="/user/oauth/qq" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-qq"></span></a>
    <a href="/user/oauth/weixin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-weixin"></span></a>
    <a href="/user/oauth/linkedin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "linkedin"});'><span
                class="icon-sn-linkedin"></span></a>
    <span id="loginShowMore" style="cursor: pointer" class="mb5"><span class="icon-sn-dotted"></span></span>
    <a href="/user/oauth/twitter" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "twitter"});'><span
                class="icon-sn-twitter"></span></a>
    <a href="/user/oauth/facebook" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "facebook"});'><span
                class="icon-sn-facebook"></span></a>
    <a href="/user/oauth/douban" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "douban"});'><span
                class="icon-sn-douban"></span></a>
</div>
<div class="form-group clearfix">
    <a class="btn-block btn btn-default pull-right pl20 pr20 
                        SFLogin
             "

            
        onclick='ga("send", "event", "email login button", "clicked", "login modal");'>
                    注册新账号
            </a>
</div>
<p class="text-muted text-center mb15">登录即表示你同意网站的<a href="/tos" target="_blank">《服务条款》</a></p>        </div>
    </div>
</script>
<script id="bindPhoneModal" type="text/template">
    <div class="bg-white bindphone-model">
        <div class="alert alert-warning" role="alert">
            为了保证账号安全，请先绑定手机
        </div>
        <div>
            <form class="form-horizontal form__bindphone-apply" style="background-color:#fff;padding:0;">
                <div class="form-group ">
                    <label for="phoneNumber" class="col-sm-3 control-label required" >手机号码</label>
                    <div class="col-sm-6">
                        <input type="text" class="form-control bindphone--phone" id="phoneNumber" name="phone" placeholder="仅只支持大陆手机号">
                    </div>
                    <div class="col-sm-3"></div>
                </div>
                <div class="form-group">
                    <label for="authCode" class="col-sm-3 control-label required">验证码</label>
                    <div class="col-sm-6">
                        <div class="input-group">
                            <input type="text" class="form-control bindphone--code" name="code" placeholder="短信验证码">
                            <span class="input-group-btn">
                                <button class="btn btn-default user-bind__phone-vaild-btn" type="button">获取验证码</button>
                            </span>
                        </div>
                    </div>
                    <div class="col-sm-3"></div>
                </div>
            </form>
        </div>

    </div>
</script>


<script>
    window.serverTime = 1542597523000;
</script>

<script>
    (function (w) {
        w.SF = {
            staticUrl: "https://static.segmentfault.com/v-5bebf0aa"
        };
        w.SF.token = (function () {
    var _aWL = ''///*'p7'*/'p7'
+//'IL7'
'0d'+''///*'E0y'*/'E0y'
+'38'//'y'
+//'d'
'd'+//'Yr'
'389'+//'Vh'
'Vh'+//'ssE'
'c'+//'4F'
'1e'+'PMd'//'PMd'
+'9'//'9'
+//'Bj'
'775'+'fdf'//'UOR'
+'7ce'//'6Q'
+'yk8'//'yk8'
+//'4G'
'78'+''///*'E'*/'E'
+'f10'//'y'
+'c'//'xZ'
+'d7'//'eTi'
+//'FBz'
'6'+'791'//'jBe'
+/* 'JM'//'JM' */''+'e'//'e'
+'m7'//'m7'
+//'d'
'd', _T16VG = [[4,5],[7,9],[10,13],[10,11],[19,22],[31,32],[31,33]];

    for (var i = 0; i < _T16VG.length; i ++) {
        _aWL = _aWL.substring(0, _T16VG[i][0]) + _aWL.substring(_T16VG[i][1]);
    }

    return _aWL;
})();;
    })(window);

                var lock = {
        type: "",
        text: '',
        table: {"ban_post":[1,"\u4f60\u5df2\u7ecf\u88ab\u7981\u8a00, \u65e0\u6cd5\u8fdb\u884c\u6b64\u64cd\u4f5c, \u5982\u6709\u7591\u4e49\u8bf7\u63d0\u4ea4\u7533\u8bc9, \u6216\u8005\u53d1\u90ae\u4ef6\u5230pr@segmentfault.com"]}
    };

        var ddosMode = false;
    
        (function (currentUrl) {
        if (typeof URL != 'undefined') {
            var baseUrl = new URL('https://segmentfault.com');

            if (baseUrl.protocol != currentUrl.protocol
                || baseUrl.host != currentUrl.host) {
                window.location.href = baseUrl.protocol + '//' + baseUrl.host
                    + currentUrl.pathname + currentUrl.search + currentUrl.hash;
            }
        }
    })(window.location);
    </script>

             <script crossorigin src="https://static.segmentfault.com/v-5bebf0aa/3rd/assets.js"></script>
                 
        <script crossorigin src="https://static.segmentfault.com/v-5bebf0aa/blog/script/post.min.js"></script>
            

<script>
if (!!navigator.userAgent.match(/MicroMessenger/i)) {
    require.config({
        paths: { weixin_jsapi: '//res.wx.qq.com/open/js/jweixin-1.2.0' }
    });

    require(['weixin_jsapi'], function (wx) {
        var share = {"title":"Python_\u722c\u866b\u57fa\u7840","desc":"\u4f01\u4e1a\u751f\u4ea7\u7684\u7528\u6237\u6570\u636e\uff1a\u5927\u578b\u4e92\u8054\u7f51\u516c\u53f8\u6709\u6d77\u91cf\u7528\u6237\uff0c\u6240\u4ee5\u4ed6\u4eec\u79ef\u7d2f\u6570\u636e\u6709\u5929\u7136\u4f18\u52bf\u3002\u6709\u6570\u636e\u610f\u8bc6\u7684\u4e2d\u5c0f\u578b\u4f01\u4e1a\uff0c\u4e5f\u5f00\u59cb\u79ef\u7d2f\u7684\u6570\u636e\u3002","link":"https:\/\/segmentfault.com\/a\/1190000014981939","imgUrl":"https:\/\/avatar-static.segmentfault.com\/509\/437\/509437996-577ccfee4d288_huge256"};
        share.title += ' - SegmentFault 思否';

        $.getJSON('/api/util/weixin/jsapi', function (o) {
            methods = o.data.jsApiList.slice();

            wx.config(o.data);
            wx.error(console.error);
            wx.ready(function () {
                methods.forEach(function (method) {
                    wx[method](share);
                });
            });
        });
    });
}
</script>

<script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-918487-8']);
    _gaq.push(['_trackPageview']);
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
        a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

                
        

            

    ga('create', 'UA-918487-8', 'auto', {
        'userID'
    : 0,
        'createdTime'
    : 0,
        'now'
    : 1542597523,
        'allowLinker'
    : true });
    ga('require', 'linker');
    ga('linker:autoLink', ['docs.segmentfault.com'] );
    ga('set', 'dimension1', 'guest');
    ga('send', 'pageview');

</script>

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?e23800c454aa573c0ccb16b52665ac26";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>



</body>
</html>

