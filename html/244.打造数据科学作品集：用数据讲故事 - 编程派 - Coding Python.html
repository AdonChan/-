

<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><meta name="renderer" content="webkit"/><meta property="qc:admins" content="15317273575564615446375"/><meta property="og:image" content="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon.png"/><meta name="viewport"
              content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/><meta name="alexaVerifyID" content="LkzCRJ7rPEUwt6fVey2vhxiw1vQ"/><meta name="apple-itunes-app" content="app-id=958101793, app-argument="><title>打造数据科学作品集：用数据讲故事 - 编程派 | Coding Python - SegmentFault 思否</title><meta name="description" content="这是「如何打造数据科学作品集」系列教程的第一篇。如果觉得不错，可以订阅我们第一时间获取最新更新。这个系列的文章都很长，建议先收藏再找时间详细阅读。如果你觉得译文读起来不舒服，可以点此阅读原文，并给..."/><meta name="keywords" content="数据科学,python"/><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="SegmentFault"/><link rel="shortcut icon" href="https://static.segmentfault.com/v-5bebf0aa/global/img/favicon.ico"/><link rel="apple-touch-icon" href="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon.png"><meta name="msapplication-TileColor" content="#009a61"/><meta name="msapplication-square150x150logo" content="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon.png"/><meta name="baidu_union_verify" content="bcf7fd80dca60d53d46d5b46e1b990ca"><link rel="alternate" type="application/atom+xml" title="SegmentFault 最新问题" href="/feeds/questions"><link rel="alternate" type="application/atom+xml" title="SegmentFault 最新文章" href="/feeds/blogs"><link rel="stylesheet" href="https://static.segmentfault.com/v-5bebf0aa/global/css/global.css"/><link rel="stylesheet" href="https://static.segmentfault.com/v-5bebf0aa/blog/css/blog.css"/><link rel="stylesheet" href="https://static.segmentfault.com/v-5bebf0aa/global/css/responsive.css"/><script type='text/javascript' src='https://sponsor.segmentfault.com/spcjs.php?id=1&block=1&repu=0&tag=数据科学,python'></script></head><!-- 推荐引擎 --><script charset="utf-8" id="ParadigmSDK" src="https://nbrecsys.4paradigm.com/sdk/js/ParadigmSDK_v2.js" data="216" defSI="594"></script><script>
    ParadigmSDK.init("46e957bd9dea4acdaa15b4b64aff728f");
    ParadigmSDK.trackDetailPageShow();
</script><body data-mod="blog"
    class="blog-post "><!--[if lt IE 9]><div class="alert alert-danger topframe" role="alert">你的浏览器实在<strong>太太太太太太旧了</strong>，放学别走，升级完浏览器再说 <a target="_blank" class="alert-link" href="http://browsehappy.com">立即升级</a></div><![endif]--><img id="icon4weChat" style="height: 0;width: 0;" src="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon-512.png"><div id="gridMapHoverBox" style="position:absolute; border: 1px solid #009a61; z-index:99; font-size: 10px; background:#fff"></div><div class="global-nav sf-header sf-header--index"><div class="bottom-nav visible-xs visible-sm "><div class="opts"><a class="opts-group " href="/"><i class="fa fa-home" aria-hidden="true"></i><span>首页</span></a><a class="opts-group " href="/questions"><i class="fa fa-comments" aria-hidden="true"></i><span>问答</span></a><a class="opts-group active" href="/blogs"><i class="fa fa-pencil-square" aria-hidden="true"></i><span>专栏</span></a><a class="opts-group " href="/lives"><i class="fa fa-play-circle" aria-hidden="true"></i><span>讲堂</span></a><div class="opts-group"><div class="btn-group dropup"><i class="fa fa-bars dropdown hoverDropdown" data-toggle="dropdown" aria-hidden="true"><span>更多</span></i><ul class="dropdown-menu"><li><a href="/jobs">职位</a></li><li><a href="/events">活动</a></li><li><a href="/tags">标签</a></li><li><a href="/badges">徽章</a></li></ul></div></div></div></div><nav class="container nav"><div class="visible-xs visible-sm header-response"><a href="/search" style="display:block"><i class="fa fa-search" aria-hidden="true"></i></a><div class="sf-header__logo sf-header__logo--response"><h1><a href="/" style="height:24px; background-size: auto 24px;"></a></h1></div><a href="/user/login" class="pull-right login-btn"><i class="fa fa-user" aria-hidden="true"></i></a></div><script>
mobileScroll(
    function(direction) { 
        try {
            if (direction === 'down') {
                document.querySelector('.bottom-nav').classList.add('hidden')
            } else {
                document.querySelector('.bottom-nav').classList.remove('hidden')
            }
        } catch(err) {}
    }
);    
function mobileScroll( fn ) {
    var beforeScrollTop = document.documentElement.scrollTop || document.body.scrollTop,
        fn = fn || function() {};
    window.addEventListener("scroll", function() {
        var afterScrollTop = document.documentElement.scrollTop || document.body.scrollTop,
            delta = afterScrollTop - beforeScrollTop;
        if( delta === 0 ) return false;
        fn( delta > 0 ? "down" : "up" );
        beforeScrollTop = afterScrollTop;
    }, false);
}
</script><div class="row hidden-xs hidden-sm"><div class="col-sm-8 col-md-9 col-lg-9"><div class="sf-header__logo"><h1><a href="/">SegmentFault</a></h1></div><div><ul class="menu list-inline pull-left hidden-xs"><li class="menu__item"><a href="/" class="">首页</a></li><li class="menu__item"><a href="/questions" class="">问答</a></li><li class="menu__item"><a href="/blogs" class="active-nav">专栏</a></li><li class="menu__item"><a href="/lives" class="">讲堂</a></li><li class="menu__item menu__item--more dropdown"><a href="##" class="dropdown-toggle dropdownBtn" data-toggle="dropdown">
                                        发现<i class="fa fa-caret-down" style="font-size: 14px;margin-left: 5px;" aria-hidden="true"></i></a><div class="dropdown-block hidden"><ul class="dropdown-content-menu"><li><a href="/groups">圈子</a></li><li><a href="/events">活动</a></li><li><a href="/tags">标签</a></li><li><a href="/jobs">找工作</a></li><li><a href="/users">排行榜</a></li><li><a href="/badges">徽章</a></li><li><a href="/notes">笔记</a></li><li><a href="https://docs.segmentfault.com" target="_blank">开发手册<i style="line-height: 20px;font-size: 12px;color: #F5A623;" class="ml10 fa fa-external-link-square"></i></a></li><li><a href="https://business.segmentfault.com/ads?utm_source=sf-header" target="_blank">广告投放<i style="line-height: 20px;font-size: 12px;color: #F5A623;" class="ml10 fa fa-external-link-square"></i></a></li></ul></div></li><li class="menu__item visible-sm-inline-block"><a href="/search"><span class="glyphicon glyphicon-search" style="vertical-align: middle;"></span></a></li></ul><form action="/search" class="header-search  hidden-sm hidden-xs pull-right" ><button class="btn btn-link"><span class="sr-only">搜索</span><span class="glyphicon glyphicon-search"></span></button><input id="searchBox" name="q" type="text"  placeholder="搜索问题或关键字" class="form-control" value="" /></form></div></div><div class="col-sm-4 col-md-3 col-lg-3 text-right"><ul class="opts list-inline hidden-xs"><li class="opts__item"><a href="/user/login" class="SFRegister btn-signin" style="margin-bottom:2px;">立即登录</a><a href="/user/register" class="SFLogin ml10 btn-signup"
                                       onClick="_gaq.push(['_trackEvent', 'Button', 'Click', 'Login']);">免费注册</a></li></ul></div></div></nav></div>
    
<input id="articleId" value="1190000007093751" class="hidden" />

<div class="wrap" data-blogid="1200000003962796">
    <div class="container mt15" style="position:relative">
        <div class="row">
            <div class="col-xs-12 col-md-9 main ">
                                <ol class="breadcrumb mb15">
                    <li><a href="/blogs">专栏</a></li>
                                        <li><a href="/blog/codingpy">编程派 | Coding Python</a></li>
                                        <li class="active">文章详情</li>
                </ol>
                                <div class="post-topheader custom- pt0">
                    <div class="mb20">
                        <div class="block-for-right-border">
                            <div class="row">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                

                                    <div class="post-topheader__info" data-username="EarlGrey"
                                         data-userslug="codingpy"
                                         data-useravatar="https://avatar-static.segmentfault.com/378/549/3785496272-563d5c4fc71e3_big64">


                                        <div class="article__author clearfix">
                                            <div class="article__authorleft">
                                                <a href="/u/codingpy">
                                                    <img class="avatar-40" src="https://avatar-static.segmentfault.com/378/549/3785496272-563d5c4fc71e3_big64" alt="EarlGrey">
                                                </a>
                                            </div>
                                            <div class="article__authorright">
                                                <div class="article__authormeta">
                                                <a href="/u/codingpy" class="mr5 "><strong>EarlGrey</strong></a>

                                                                                                <img src="https://static.segmentfault.com/v-5bebf0aa/global/img/rp.svg" class="mr5"><span style="color:#BF7158" class="mr10">1k</span>

                                                                                                发布于
                                                <a href="/blog/codingpy">编程派 | Coding Python</a>
                                                
                                                
                                                <span class="hidden-xs">
                                                                                                                                                          <button type="button"
                                                               class="btn btn-xs btn-success follow-article ml10"
                                                               data-do="follow"
                                                               data-type="blog"
                                                               data-id="1200000003962796">关注专栏
                                                       </button>
                                                                                                                                                   </span>
                                                </div>
                                                
                                                <span style="display: block">
                                                    2016-10-08 发布
                                                </span>
                                            </div>
                                        </div>

                                        <h1 class="h1 post-topheader__info--title" id="articleTitle" data-id="1190000007093751">
                                            <a href="/a/1190000007093751"> 打造数据科学作品集：用数据讲故事</a>
                                        </h1>

                                        <div class="content__tech hidden-xs">
                                            <a href="" class="blog-type-common blog-type-0-before" target="_blank" data-content="
                                                                                        翻译自 
                                                                                        "></a>
                                            
                                            <ul class="taglist--inline inline-block article__title--tag mr10">
                                                                                                    <li class="tagPopup mb5">
                                                        <a class="tag" href="/t/%E6%95%B0%E6%8D%AE%E7%A7%91%E5%AD%A6/blogs" data-toggle="popover"
                                                                                data-img="" data-placement="top"
                                                                                data-original-title="数据科学"
                                                                                data-id="1040000002579082">
                                                                                                                      数据科学
                                                        </a>
                                                    </li>
                                                                                                    <li class="tagPopup mb5">
                                                        <a class="tag" href="/t/python/blogs" data-toggle="popover"
                                                                                data-img="https://avatar-static.segmentfault.com/378/252/3782524817-1040000000089534_big64" data-placement="top"
                                                                                data-original-title="python"
                                                                                data-id="1040000000089534">
                                                                                                                    <img src="https://avatar-static.segmentfault.com/252/177/2521771040-54cb53b372821_small">
                                                                                                                      python
                                                        </a>
                                                    </li>
                                                                                            </ul>

                                            <span>
                                                2.1k 次阅读
                                                &nbsp;&middot;&nbsp;
                                                读完需要 65 分钟 
                                                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!-- end .post-topheader -->

                <div class="visible-lg">
                    <div class="side-widget">
                        <div class="stream__item-zan btn btn-default mt0 mb15 ml0 mr0 pt0 pb0 pl0 pr0 " id="side-widget-votes-btn">
                            <span class="stream__item-zan-icon"></span>
                            <span class="stream__item-zan-number" id="side-widget-votes-num">4</span>
                        </div>

                        <i class="fa fa-bookmark item " id="side-widget-bookmarks-btn"></i>
                        <i class="fa fa-weibo item"></i>
                        <i class="fa fa-weixin item" data-toggle="popover" data-placement="right"></i>
                        <i class="fa fa-twitter item"></i>
                        <i class="fa fa-facebook item"></i>
                        <i class="fa fa-arrow-up item hidden"></i>
                    </div>
                </div>

                
                <div class="article fmt article__content" data-id="1190000007093751" data-license="cc">
                    
<p>作者：Vik Paruchuri<br>译者：Nick Tang<br>校对：EarlGrey<br>出品：<a href="https://github.com/PythonTG/PythonTG" rel="nofollow noreferrer">PythonTG 翻译组</a>/<a href="http://codingpy.com" rel="nofollow noreferrer">编程派</a></p>
<blockquote><p>这是「如何打造数据科学作品集」系列教程的第一篇。如果觉得不错，可以订阅我们第一时间获取最新更新。这个系列的文章都很长，建议先收藏再找时间详细阅读。如果你觉得译文读起来不舒服，可以<a href="https://www.dataquest.io/blog/data-science-portfolio-project/" rel="nofollow noreferrer">点此阅读原文</a>，并给我们提些改建建议。</p></blockquote>
<p>数据科学公司在招聘时越来越看重个人作品集，原因在于作品集是衡量实际能力最好的方式之一。好消息是，你完全掌控着自己的作品集。如果付出一些努力，你就可以打造一套令用人单位印象深刻的高质量作品集。</p>
<p>想要打造高质量作品集，第一步需要搞清楚应该在作品中展现什么能力。公司希望数据科学家具备的能力（也就是他们希望作品集能够展示的能力）包括：</p>
<ul>
<li><p>沟通能力</p></li>
<li><p>与他人协作能力</p></li>
<li><p>技术能力</p></li>
<li><p>数据推断能力</p></li>
<li><p>主观能动性</p></li>
</ul>
<p>一个好的作品集一般由多个项目构成，每一个项目展示以上 1-2 个能力点。本文是教你怎样打造一个全面的数据科学作品系列的第一篇。我们将介绍怎样打造作品集中的第一个项目，怎样使用数据讲述一个有效的故事。本篇结束时，你将拥有一个展示沟通能力和数据推断能力的数据科学项目。</p>
<h2>用数据讲故事</h2>
<p>数据科学的本质是沟通。你通过数据得到了一些洞察，然后采用有效的方式将其传播给他人，并向其推销你的解决方案。可见使用数据来讲述一个有效的故事，是数据科学家最重要的技能之一。一个有效的故事可以使你的洞察更有说服力，同时能帮助他人理解你的观点。</p>
<p>数据科学中的故事需要围绕着你发现了什么，怎么发现的，意味着什么进行讲述。举个例子，你发现公司利润去年下降了25%。仅仅阐述这个事实是不够的，你必须说明为什么利润会下降，可以通过什么方式来解决。</p>
<p>用数据讲故事的要点如下：</p>
<ul>
<li><p>搞清楚并且设置故事的上下文</p></li>
<li><p>从多个角度进行探索</p></li>
<li><p>有说服力的形象化展示</p></li>
<li><p>使用多种数据源</p></li>
<li><p>叙述的一致性</p></li>
</ul>
<p>这里最有效的工具是<a href="http://www.jupyter.org/" rel="nofollow noreferrer"> Jupyter notebook</a>。如果你对此不是很熟悉，请参考这个<a href="https://www.dataquest.io/blog/python-data-science/" rel="nofollow noreferrer">教程</a>。Jupyter notebook 允许你交互式的探索数据，支持将结果分享到多个网站，包括 Github 。通过分享，他人可以很好的与你协作，并扩充你的成果。</p>
<p>我们会在文中使用 Jupyter notebook 以及一些 Python 数据科学库，如 Pandas 和 matplotlib。</p>
<h2>选择项目主题</h2>
<p>创建项目的第一步是决定主题。你需要选择感兴趣且有动力去研究的题目。我们都知道为了做项目而做，还是真的感兴趣去做，这之间有巨大区别。因此这一步值得多花点功夫，确保能够找到真正感兴趣的东西。</p>
<p>寻找题目的一个好办法是浏览不同的数据集，看看有什么有趣的东西。这里推荐一些好的站点：</p>
<ul>
<li><p><a href="https://www.data.gov/" rel="nofollow noreferrer">Data.gov</a> – 包含政府信息。</p></li>
<li><p><a href="https://reddit.com/r/datasets" rel="nofollow noreferrer">/r/datasets</a> – 一个reddit的子集拥有非常多的有趣数据集。</p></li>
<li><p><a href="https://github.com/caesar0301/awesome-public-datasets" rel="nofollow noreferrer">Awesome datasets</a> – Github上的一些数据集。</p></li>
<li><p><a href="http://rs.io/100-interesting-data-sets-for-statistics/" rel="nofollow noreferrer">rs.io</a> – 一个很棒的Blog，发布了很多有趣的数据。</p></li>
</ul>
<p>一般现实中，你拿到的经常不是一个完美的单个数据集。通常需要聚合不同的数据源，或者做大量的数据清理工作。当选题对你来说真的非常有意思，多花点时间去处理数据是非常值得的，同时在这个过程中你也可以炫耀一下技能。</p>
<p>本文我们使用纽约市公立学校的数据，你可以在<a href="https://data.cityofnewyork.us/data?cat=education" rel="nofollow noreferrer">这里</a>得到它们。</p>
<h2>选定题目</h2>
<p>能够从一而终的完成项目是非常重要的。因此，限制项目的范围非常关键，这可以让我们清楚地知道我们可以完成它。</p>
<p>本文中，我们着眼于美国高中生的<a href="https://en.wikipedia.org/wiki/SAT" rel="nofollow noreferrer">SAT</a> 成绩以及其他统计数据来做数据分析。SAT(Scholastic Aptitude Test) 是美国高中生申请大学前参加的一项考试。大学在作出是否入取决定时会参考考试成绩。这个考试分为三个部分，每部分 800 分，总分 2400 (虽然总分曾改来改去很多次，但在这个数据集里仍是2400)。各高中经常以 SAT 的平均成绩进行排名，SAT 成绩高代表着这个学区的高品质。</p>
<p>有人提出 SAT 对美国的某些种族人群不公平，因此对纽约市的数据进行分析可以帮组我们进一步搞清楚 SAT 考试的公平性。</p>
<p>从这里获得<a href="https://data.cityofnewyork.us/Education/SAT-Results/f9bf-2cp4" rel="nofollow noreferrer">SAT数据</a>及<a href="https://data.cityofnewyork.us/Education/DOE-High-School-Directory-2014-2015/n3p6-zve2" rel="nofollow noreferrer">各高中数据</a>。这将是项目的基础，但是我们还需要更多的信息来确保有说服力的分析。</p>
<h2>补充数据</h2>
<p>一旦找到了好题目，接下来去多找一些有助于这个题目或者能使你更进一步深入研究的数据集。最好提前准备，以便在开始建立项目前拥有尽可能多的数据。通常过少的数据意味着过早的放弃项目。</p>
<p>在这个项目里，某个网站上就有多个相关数据集，包括了生源统计信息以及测试分数等。</p>
<p>这里是所有将使用数据集的链接：</p>
<ul>
<li><p><a href="https://data.cityofnewyork.us/Education/SAT-Results/f9bf-2cp4" rel="nofollow noreferrer">按学校排列的 SAT 成绩</a> – 纽约市每所高中的 SAT 成绩。</p></li>
<li><p><a href="https://data.cityofnewyork.us/Education/School-Attendance-and-Enrollment-Statistics-by-Dis/7z8d-msnt" rel="nofollow noreferrer">学校招生情况</a> – 纽约市每所学校的招生数据。</p></li>
<li><p><a href="https://data.cityofnewyork.us/Education/NYS-Math-Test-Results-By-Grade-2006-2011-School-Le/jufi-gzgp" rel="nofollow noreferrer">数学考试成绩</a> – 纽约市每所学校的数学测试成绩。</p></li>
<li><p><a href="https://data.cityofnewyork.us/Education/2010-2011-Class-Size-School-level-detail/urz7-pzb3" rel="nofollow noreferrer">班级大小</a> –  纽约市每所学校班级规模数据。</p></li>
<li><p><a href="https://data.cityofnewyork.us/Education/AP-College-Board-2010-School-Level-Results/itfs-ms3e" rel="nofollow noreferrer">AP 考试成绩</a> – AP（Advanced Placement）考试成绩，通过 AP 考试可以获得大学学分。</p></li>
<li><p><a href="https://data.cityofnewyork.us/Education/Graduation-Outcomes-Classes-Of-2005-2010-School-Le/vh2h-md7a" rel="nofollow noreferrer">毕业数据</a> – 毕业学生比例，以及其他信息。</p></li>
<li><p><a href="https://data.cityofnewyork.us/Education/School-Demographics-and-Accountability-Snapshot-20/ihfw-zy9j" rel="nofollow noreferrer">生源信息</a> – 每所学校的生源统计信息。</p></li>
<li><p><a href="https://data.cityofnewyork.us/Education/NYC-School-Survey-2011/mnz3-dyi8" rel="nofollow noreferrer">学校调查</a> – 每所学校的父母，老师，学生的调查报告。</p></li>
<li><p><a href="https://data.cityofnewyork.us/Education/School-Districts/r8nu-ymqj" rel="nofollow noreferrer">学区地图</a> – 包含学区的地理分布信息，此数据帮助我们绘图。</p></li>
</ul>
<p>所有的这些数据集是相互关联的，我们可以在分析前先组合他们。</p>
<h2>获取背景信息</h2>
<p>在深入分析数据之前，调查一些背景信息非常有用。本例中，我们已知一些非常有用的信息：</p>
<ul>
<li><p>纽约市有五个区，各自是独立的区域。</p></li>
<li><p>所有学校分布在各个学区里，每个区包含数十个学校。</p></li>
<li><p>数据集里的学校并非都是高中，因此我们需要做一些数据清理工作。</p></li>
<li><p>每所有学校都有一个<code>DBN</code> (District Borough Number)唯一编号。</p></li>
<li><p>通过聚合每个区的数据，我们可以绘制出各个区域之间的差异。</p></li>
</ul>
<h2>理解数据</h2>
<p>为了能够真正理解这些数据的上下文，你要花点时间去探索数据。上面每个链接都有一些关于数据及相关列的描述。我们手里有高中生的 SAT 成绩，以及生源信息等其他数据集。</p>
<p>我们可以执行代码来读取数据。使用 Jupyter notebook 来探索这些数据，下面的代码将：</p>
<ul>
<li><p>遍历每个下载的数据文件</p></li>
<li><p>把文件数据读入到<a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html" rel="nofollow noreferrer">Pandas DataFrame</a></p></li>
<li><p>将 DataFrame 统一放入一个Python字典</p></li>
</ul>
<pre><code class="python">import pandas
import numpy as np

files = ["ap_2010.csv", "class_size.csv", "demographics.csv", "graduation.csv", "hs_directory.csv", "math_test_results.csv", "sat_results.csv"]

data = {}
for f in files:
    d = pandas.read_csv("schools/{0}".format(f))
    data[f.replace(".csv", "")] = d</code></pre>
<p>数据读入后，我们可以在 DataFrames 上使用 head 方法打印前 5 行数据：</p>
<pre><code class="python">for k,v in data.items():
    print("\n" + k + "\n")
    print(v.head())</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.comhttps://segmentfault.com/img/remote/1460000007093754?w=1522&amp;h=428" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="DataFrames" title="DataFrames"></span></p>
<p>可以发现数据集中的一些明显特征：</p>
<ul>
<li><p>大多数数据集包含 <code>DBN</code> 列。</p></li>
<li><p>一些字段对绘图有用，特别是 <code>Location 1</code>，其中包含了坐标信息。</p></li>
<li><p>一些数据集似乎包含一个学校的多条信息(重复的 DBN )，这意味着我们必须做一些预处理。</p></li>
</ul>
<h2>统一数据</h2>
<p>为了更容易的处理数据，我们需要将所有的单个数据集集中到一个数据集里。这样可以让我们更快的比较数据集之间的列。为了做到这一点，第一步我们需要找到一个统一的公共列。从上面的输出结果来看，你会发现 <code>DBN</code> 出现在大多数的数据集里，看起来可以用作公共列。</p>
<p>如果我们谷歌一下 <code>DBN New York City Schools</code>，会找到<a href="https://developer.cityofnewyork.us/api/doe-school-choice" rel="nofollow noreferrer">这个页面</a>，解释了 <code>DBN</code> 是每一个学校的唯一编号。当我们探索数据集，特别是政府数据集时，为了搞清楚每一个列的意思，做一些调查工作是必不可少的。</p>
<p>现在有个问题，<code>class_size</code> 和 <code>hs_directory</code> 数据集没有发现 <code>DBN</code> 字段。<code>hs_directory</code> 数据集只有 <code>dbn</code> 字段，我们可以通过重命名这个列或者把它拷贝到一个<code>DBN</code> 的新列来解决。而对 <code>class_size</code> 数据集，我们需要采用其他办法来处理。</p>
<p><code>DBN</code> 列看起来像这样：</p>
<pre><code class="python">data["demographics"]["DBN"].head()</code></pre>
<pre><code>0    01M015
1    01M015
2    01M015
3    01M015
4    01M015
Name: DBN, dtype: object
</code></pre>
<p>我们再看一眼 <code>class_size</code> 的前 5 行数据:</p>
<pre><code class="python">data["class_size"].head()</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.comhttps://segmentfault.com/img/remote/1460000007093754?w=1522&amp;h=428" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="数据科学" title="数据科学"></span></p>
<p>如上图所见，看起来 <code>DBN</code> 实际上是由<code>CSD</code>、 <code>BOROUGH</code> 和 <code>SCHOOL CODE</code> 组合而成。<code>DBN</code> 全称为 <code>District Borough Number</code> 。<code>csd</code> 字段表示 District，<code>BOROUGH</code> 字段表示 borough，再与 <code>SCHOOL CODE</code> 字段一起最终组成<code>DBN</code>。 </p>
<p>想洞察数据之间的这种关系并没有什么系统化的方法，只能经过探索和尝试来找到答案。</p>
<p>现在我们知道怎样构建 <code>DBN</code> 了，可以把它添加到 <code>class_size</code> 和 <code>hs_directory</code> 数据集里：</p>
<pre><code class="python">data["class_size"]["DBN"] = data["class_size"].apply(lambda x: "{0:02d}{1}".format(x["CSD"], x["SCHOOL CODE"]), axis=1)
data["hs_directory"]["DBN"] = data["hs_directory"]["dbn"]</code></pre>
<h3>添加调查数据</h3>
<p>最有趣的数据集之一，应该是学生、父母、老师的问卷调查数据，囊括了对每个学校的安全程度、学术水平等等反馈数据。在组合数据集之前，让我们添加这些调查数据。现实工作中，分析数据的途中你经常会碰到你想要加入的有趣数据。使用Jupyter notebook 这样灵活的工具，可以让你快速添加额外代码，并且重新运行你的分析。</p>
<p>我们将要添加调查数据到我们的 <code>data</code> 字典里，然后再组合所有的数据集。调查数据包含两个文件，一个针对所有学习，一个是针对 75 区的学校。我们需要写一些代码来组合。在下面的代码中，我们将</p>
<ul>
<li><p>使用 <code>windows-1252</code> 编码读入所有学校的数据。</p></li>
<li><p>使用 <code>windows-1252</code> 编码读入 75 区学校的数据。</p></li>
<li><p>添加一个 flag 来数据来自哪个区。</p></li>
<li><p>使用 DataFrames 的 <a href="http://pandas.pydata.org/pandas-docs/stable/generated/pandas.concat.html" rel="nofollow noreferrer">concat</a> 方法来合并以上数据。</p></li>
</ul>
<pre><code class="python">survey1 = pandas.read_csv("schools/survey_all.txt", delimiter="\t", encoding='windows-1252')
survey2 = pandas.read_csv("schools/survey_d75.txt", delimiter="\t", encoding='windows-1252')
survey1["d75"] = False
survey2["d75"] = True
survey = pandas.concat([survey1, survey2], axis=0)</code></pre>
<p>一旦我们完成调查数据的合并，还有一个复杂的事情要处理。为了方便进行比较和找出列直接关联，我们需要减少数据集中的列数。不幸的是，调查数据里包含太多对我们没有用的列：</p>
<pre><code class="python">survey.head()</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093755?w=1766&amp;h=524" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="数据的合并" title="数据的合并"></span></p>
<p>我们可以通过查看与调查数据一起下载下来的数据字典文件，来找出我们需要的重要字段去简化列：</p>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093756?w=1151&amp;h=878" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="需要的重要字段去简化列" title="需要的重要字段去简化列"></span></p>
<p>这样我们就可以删除 <code>survey</code> 中多余的列：</p>
<pre><code class="python">survey["DBN"] = survey["dbn"]
survey_fields = ["DBN", "rr_s", "rr_t", "rr_p", "N_s", "N_t", "N_p", "saf_p_11", "com_p_11", "eng_p_11", "aca_p_11", "saf_t_11", "com_t_11", "eng_t_10", "aca_t_11", "saf_s_11", "com_s_11", "eng_s_11", "aca_s_11", "saf_tot_11", "com_tot_11", "eng_tot_11", "aca_tot_11",]
survey = survey.loc[:,survey_fields]
data["survey"] = survey
survey.shape</code></pre>
<pre><code>(1702, 23)
</code></pre>
<p>确保你能够理解每个数据集包含什么，相关列是什么，可以为日后分析节省很多的时间和精力。</p>
<h2>压缩数据集</h2>
<p>再次看一下数据集，我们马上发现一个新的问题：</p>
<pre><code class="python">data["class_size"].head()</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093757?w=1764&amp;h=400" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="压缩数据集" title="压缩数据集"></span></p>
<p><code>class_size</code> 中对应一个高中存在多行数据(及重复的 <code>DBN</code> 和 <code>SCHOOL NAME</code> )。然而 <code>sat_results</code> 里每个高中只有一条数据：</p>
<pre><code class="python">data["sat_results"].head()</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093758?w=1768&amp;h=418" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="压缩数据集" title="压缩数据集"></span></p>
<p>为了能够联合数据集，我们需要找到一种方式来保证一个高中对应一行数据。如果不这样做，我们将无法比较 SAT 成绩与班级大小。首先我们需要更好地理解数据，然后做一些聚合。在 <code>class_size</code> 数据集里，<code>GRADE</code> 和 <code>PROGRAM TYPE</code> 字段对于一个学校存在多个值。通过限制一个字段只有一个值，我们可以过滤掉大部分的重复行。在下面的代码中，我们将：</p>
<ul>
<li><p>仅仅保留 <code>class_size</code> 中<code>GRADE</code> 字段是 09-12 的值。</p></li>
<li><p>仅仅保留 <code>class_size</code> 中 <code>PROGRAM TYPE</code> 是 <code>GEN ED</code> 的值。</p></li>
<li><p>按 <code>DBN</code> 进行group，计算每个列的平均值，得到每所学校平均的 <code>class_size</code> 值。</p></li>
<li><p>重置索引，将 <code>DBN</code> 作为列重新加回。</p></li>
</ul>
<pre><code class="python">class_size = data["class_size"]
class_size = class_size[class_size["GRADE "] == "09-12"]
class_size = class_size[class_size["PROGRAM TYPE"] == "GEN ED"]
class_size = class_size.groupby("DBN").agg(np.mean)
class_size.reset_index(inplace=True)
data["class_size"] = class_size</code></pre>
<h3>压缩其他数据集</h3>
<p>同样，我们需要压缩 <code>demographics</code>  数据集。这个数据集收集了同一个学校多年的数据，因此存在重复数据。我们将仅仅挑选出 <code>schoolyear</code> 字段里为最近年份的，来去除重复的数据：</p>
<pre><code class="python">demographics = data["demographics"]
demographics = demographics[demographics["schoolyear"] == 20112012]
data["demographics"] = demographics</code></pre>
<p>还需要压缩 <code>math_test_results</code> 数据集。这个数据集按 <code>Grade</code> 和 <code>Year</code> 进行分割。我们可以只保留某一年中某个年级的数据：</p>
<pre><code class="python">data["math_test_results"] = data["math_test_results"][data["math_test_results"]["Year"] == 2011]
data["math_test_results"] = data["math_test_results"][data["math_test_results"]["Grade"] == '8']</code></pre>
<p>最后，压缩 <code>graduation</code> 数据集：</p>
<pre><code class="python">data["graduation"] = data["graduation"][data["graduation"]["Cohort"] == "2006"]
data["graduation"] = data["graduation"][data["graduation"]["Demographic"] == "Total Cohort"]</code></pre>
<p>在真正开始项目工作之前，数据的清理和探索是至关重要。拥有一个良好的、一致的数据集会大大加快后续分析工作。</p>
<h2>计算变量值</h2>
<p>计算变量值对加快分析过程有两个好处，让日后进行比较更快，能够比较原本不能比较的字段。目前我们要做的第一件事情是从 <code>SAT Math Avg. Score</code>、<code>SAT Critical Reading Avg. Score</code>、<code>and SAT Writing Avg. Score</code> 列来计算 SAT 总分。下面的代码：</p>
<ul>
<li><p>把每个 SAT 成绩中的列从字符串转为数字。</p></li>
<li><p>合计所有列到 <code>sat_score</code> 列，代表 SAT 总分。</p></li>
</ul>
<pre><code class="python">cols = ['SAT Math Avg. Score', 'SAT Critical Reading Avg. Score', 'SAT Writing Avg. Score']
for c in cols:
    data["sat_results"][c] = pandas.to_numeric(data["sat_results"][c], errors='coerce')

data['sat_results']['sat_score'] = data['sat_results'][cols[0]] + data['sat_results'][cols[1]] + data['sat_results'][cols[2]]</code></pre>
<p>接下里，我们来解析每个学校的坐标位置，这个可以让我们绘制每所学校的位置。下面的代码：</p>
<ul>
<li><p>从 <code>Location 1</code> 列解析出经纬度。</p></li>
<li><p>转换经纬度为数字。</p></li>
</ul>
<pre><code class="python">data["hs_directory"]['lat'] = data["hs_directory"]['Location 1'].apply(lambda x: x.split("\n")[-1].replace("(", "").replace(")", "").split(", ")[0])
data["hs_directory"]['lon'] = data["hs_directory"]['Location 1'].apply(lambda x: x.split("\n")[-1].replace("(", "").replace(")", "").split(", ")[1])

for c in ['lat', 'lon']:
    data["hs_directory"][c] = pandas.to_numeric(data["hs_directory"][c], errors='coerce')</code></pre>
<p>现在，我们可以重新打印每一个数据集来看看：</p>
<pre><code class="python">for k,v in data.items():
    print(k)
    print(v.head())</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093759?w=1620&amp;h=464" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="打印每一个数据集" title="打印每一个数据集"></span></p>
<h2>合并数据集</h2>
<p>现在我们完成了所有的准备工作，可以使用 <code>DBN</code> 列来将数据集合并在一起了。合并后我们将获得一个有着数百个列的数据集。合并时注意一些数据集存在缺失部分高中的数据。为了不丢失这部分数据，我们需要使用 <code>outer join</code> 来合并数据集。在现实世界里，数据缺失是很常见的。有能力推理和处理缺失数据是作品集中重要的展示部分。</p>
<p>你可以从<a href="http://pandas.pydata.org/pandas-docs/stable/merging.html" rel="nofollow noreferrer">这里</a>了解不同类型的 join 。</p>
<p>下面的代码中，我们将：</p>
<ul>
<li><p>遍历 <code>data</code> 字典里的每一项。</p></li>
<li><p>打印非唯一 <code>DBN</code> 的数量。</p></li>
<li><p>决定 join 的策略，<code>inner</code> 还是 <code>outer</code>。</p></li>
<li><p>以 <code>DBN</code> 来 join 所有的数据集，存于 DataFrame <code>full</code>。</p></li>
</ul>
<pre><code class="python">flat_data_names = [k for k,v in data.items()]
flat_data = [data[k] for k in flat_data_names]
full = flat_data[0]
for i, f in enumerate(flat_data[1:]):
    name = flat_data_names[i+1]
    print(name)
    print(len(f["DBN"]) - len(f["DBN"].unique()))
    join_type = "inner"
    if name in ["sat_results", "ap_2010", "graduation"]:
        join_type = "outer"
    if name not in ["math_test_results"]:
        full = full.merge(f, on="DBN", how=join_type)

full.shape</code></pre>
<pre><code>sat_results
0
demographics
0
graduation
0
hs_directory
0
ap_2010
1
survey
0
class_size
0
</code></pre>
<pre><code>(396, 174)
</code></pre>
<h2>添加值</h2>
<p>现在我们有了 DataFrame <code>full</code>， 几乎包含所有我们需要信息的。但是，仍然有部分字段的数据是缺失的。例如我们想将 <a href="https://apstudent.collegeboard.org/home" rel="nofollow noreferrer">AP</a> 考试的结果与 SAT 成绩关联到一起的话，我们需要将列转化为数字，然后填入所有缺失的数值：</p>
<pre><code class="python">cols = ['AP Test Takers ', 'Total Exams Taken', 'Number of Exams with scores 3 4 or 5']

for col in cols:
    full[col] = pandas.to_numeric(full[col], errors='coerce')

full[cols] = full[cols].fillna(value=0)</code></pre>
<p>接着，我们计算 <code>school_dist</code> 列，得到学校的区号。之后我们将使用这个数据按区去匹配学区，绘制学校的的统计数据。</p>
<pre><code class="python">full["school_dist"] = full["DBN"].apply(lambda x: x[:2])</code></pre>
<p>最后我们用所有列的平均值，来填写 <code>full</code> 中其他的缺失值：</p>
<pre><code class="python">full = full.fillna(full.mean())</code></pre>
<h2>计算关联性</h2>
<p>计算列之间的关联性，是探索数据集和检查列相关度的好方法。这个方法可以告诉你哪个列与你感兴趣的列有紧密关系。我们可以使用 Pandas DataFrames 提供的 <code>corr</code> 方法来计算得分。得分越接近 <code>0</code>，表示越没有相关性。越接近 <code>1</code>，则正相关性越强，越接近 <code>-1</code>，则负相关性越强：</p>
<pre><code class="python">full.corr()['sat_score']</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093760?w=1442&amp;h=442" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="计算关联性" title="计算关联性"></span></p>
<p>从上面的数据我们洞察到一些需要进一步研究的东西：</p>
<ul>
<li><p>总录取人数与 <code>sat_score</code> 有很强的相关性。这有点令我们惊讶，在我们的认知中，越小的学校，应该越注重于学生教育，分数应该更高才对。</p></li>
<li><p>女性百分比（<code>female_per</code>）与 SAT 成绩成正比，男性比例(<code>male_per</code>) 则相反。</p></li>
<li><p>调查反馈数据与 SAT 成绩没有什么相关性。</p></li>
<li><p>SAT 成绩中有显著的种族不平等性(<code>white_per</code>, <code>asian_per</code>, <code>black_per</code>, <code>hispanic_per</code>)。</p></li>
<li><p><code>ell_percent</code> 与 SAT 成绩有强烈的负相关性。</p></li>
</ul>
<p>以上每一项都是一个潜在的探索方向，都可以使用数据来叙述一个故事。</p>
<h2>设定上下文</h2>
<p>在我们深入数据之前，要为自己以及读者设定一个上下文。使用可探索的图表或者地图是一个好的方式。在本例中，我们按学校位置绘制出地图，这可以帮组我们理解即将探索的问题。</p>
<p>下面的代码：</p>
<ul>
<li><p>设立地图中心为纽约市</p></li>
<li><p>为每所学校添加一个标记</p></li>
<li><p>显示地图</p></li>
</ul>
<pre><code class="python">import folium
from folium import plugins

schools_map = folium.Map(location=[full['lat'].mean(), full['lon'].mean()], zoom_start=10)
marker_cluster = folium.MarkerCluster().add_to(schools_map)
for name, row in full.iterrows():
    folium.Marker([row["lat"], row["lon"]], popup="{0}: {1}".format(row["DBN"], row["school_name"])).add_to(marker_cluster)
schools_map.save('schools.html')
schools_map</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093761?w=998&amp;h=599" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="显示地图" title="显示地图"></span></p>
<p>这幅地图很有帮助，但很难看出哪个地区的学校最多。因此，我们制作一副热力图：</p>
<pre><code class="python">schools_heatmap = folium.Map(location=[full['lat'].mean(), full['lon'].mean()], zoom_start=10)
schools_heatmap.add_children(plugins.HeatMap([[row["lat"], row["lon"]] for name, row in full.iterrows()]))
schools_heatmap.save("heatmap.html")
schools_heatmap</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093762?w=998&amp;h=599" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="热力图" title="热力图"></span></p>
<h2>学区地图绘制</h2>
<p>热力图对于绘制梯度差异很方便，但是我们希望使用更加结构化的方式，来绘制城市中不同学校 SAT 成绩的区别。学区是一个很好的可视化选择，因为每个学期的管理各异。纽约市有数十个学期，每个学区就是一个小的地理范围。</p>
<p>我们可以根据学期计算 SAT 成绩，然后将其绘制到地图上。在下面的代码中，我们将：</p>
<ul>
<li><p>根据学区对 <code>full</code> 进行分组</p></li>
<li><p>计算每个学区的行均值</p></li>
<li><p>删除 <code>school_dist</code> 字段中的前导 0 ，方便与地理区域数据进行匹配</p></li>
</ul>
<pre><code class="python">district_data = full.groupby("school_dist").agg(np.mean)
district_data.reset_index(inplace=True)
district_data["school_dist"] = district_data["school_dist"].apply(lambda x: str(int(x)))</code></pre>
<p>现在我们可以绘制每个学区的平均 SAT 成绩了。为此，我们读取 GeoJSON 格式的数据，获取每个学区的形状，然后通过 <code>school_dist</code> 列将 SAT 成绩与学区形状关联在一起，最后绘制出想要的图形：</p>
<pre><code class="python">def show_district_map(col):
    geo_path = 'schools/districts.geojson'
    districts = folium.Map(location=[full['lat'].mean(), full['lon'].mean()], zoom_start=10)
    districts.geo_json(
        geo_path=geo_path,
        data=district_data,
        columns=['school_dist', col],
        key_on='feature.properties.school_dist',
        fill_color='YlGn',
        fill_opacity=0.7,
        line_opacity=0.2,
    )
    districts.save("districts.html")
    return districts

show_district_map("sat_score")</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093763?w=998&amp;h=599" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="学区地图绘制" title="学区地图绘制"></span></p>
<h2>入学率与 SAT 成绩</h2>
<p>绘制完每个学员的位置，并按学区绘制出 SAT 成绩之后，我们就设定了分析的上下文。阅读我们分析报告的人将能更好地理解数据集背后的上下文。接来下，我们进行此前提到的分析。第一个是学校的学生数量与 SAT 成绩之间的关系。</p>
<p>可以使用散点图，来比较学校的入学率和 SAT 成绩。</p>
<pre><code class="python">%matplotlib inline

full.plot.scatter(x='total_enrollment', y='sat_score')</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093764?w=404&amp;h=272" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="入学率与 SAT 成绩" title="入学率与 SAT 成绩"></span></p>
<p>我们发现，左下方有大量的数据点聚集，表示低入学率低 SAT 成绩。除此之外，SAT 成绩和总入学率之间似乎只有一点正相关。将相关性绘制出来可以发现意想不到的规律。</p>
<p>我们可以获取低入学率、低 SAT 成绩的学校名称，进行进一步的探索。</p>
<pre><code class="python">full[(full["total_enrollment"] &lt; 1000) &amp; (full["sat_score"] &lt; 1000)]["School Name"]</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093765?w=1538&amp;h=454" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="入学率与 SAT 成绩" title="入学率与 SAT 成绩"></span></p>
<p>谷歌搜索结果显示，这些学校中大多数是针对正在学习英语的学生，因此入学率也低。这一结果告诉我们，并不是说总入学率与 SAT 成绩相关，而是学校中的学生是否以英语为第二外语。</p>
<h2>英语学生与 SAT 成绩</h2>
<p>既然我们知道了一个学习中英语学生的比例与较低的 SAT 成绩相关，可以进一步作探索。<code>ell_percent</code> 列是每个学校中英语学生的比例。我们绘制一副散点图来分析二者之间的关系。</p>
<pre><code class="python">full.plot.scatter(x='ell_percent', y='sat_score')</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093766?w=401&amp;h=272" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="英语学生与 SAT 成绩" title="英语学生与 SAT 成绩"></span></p>
<p>看上去有一些学校的英语学生比例很高，同时平均 SAT 成绩却很低。我们可以从学区层面对此进行调查，弄清每个学区中英语学生的比例，然后检查是否与根据学区绘制的 SAT 成绩图相匹配。</p>
<pre><code class="python">show_district_map("ell_percent")</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093767?w=998&amp;h=599" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="根据学区绘制的 SAT 成绩图" title="根据学区绘制的 SAT 成绩图"></span></p>
<p>从中可以看出，英语学生比例低的学区，SAT 成绩一般比较高，反之亦然。</p>
<h2>调查分数与 SAT 成绩</h2>
<p>我们可以合理地假设，学生、家长和老师调查的结果与 SAT 成绩与较大的相关性。成绩预期高的学校一般 SAT 成绩也高。为了验证该假设，我们结合 SAT 成绩和各种调查结果进行绘图：</p>
<pre><code class="python">full.corr()["sat_score"][["rr_s", "rr_t", "rr_p", "N_s", "N_t", "N_p", "saf_tot_11", "com_tot_11", "aca_tot_11", "eng_tot_11"]].plot.bar()</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093768?w=382&amp;h=302" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="调查分数与 SAT 成绩" title="调查分数与 SAT 成绩"></span></p>
<p>令人意外的是，相关性最高的两个因素是 <code>N_p</code> 和 <code>N_s</code>，即参与调查的家长和学生的数量。二者与总入学率之间均呈强相关性，因此可能会受到 <code>ell_learners</code> 的影响。相关性强的其他指标是 <code>saf_t_11</code> 。这是学生、家长和老师对学校安全性的评价。一所学校越安全，学生更容易安心在其中学习。但是沟通、成绩预期等其他因素与 SAT 成绩之间没有任何相关性。这或许说明纽约市在调查时的问题设计不妥，或者是调查因子就不正确（如果他们的目标是提高 SAT 成绩的话）。</p>
<h2>种族和 SAT 成绩</h2>
<p>还有一个分析角度，就是种族和 SAT 成绩。二者之间有很大的相关性，可视化后将有助于理解背后的原因：</p>
<pre><code class="python">full.corr()["sat_score"][["white_per", "asian_per", "black_per", "hispanic_per"]].plot.bar()</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093769?w=375&amp;h=308" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="种族和 SAT 成绩" title="种族和 SAT 成绩"></span></p>
<p>结果显示，白人和亚洲学生的比例越高，SAT 成绩就越高，而黑人和拉美裔学生比例越高，SAT 成绩就越低。对于拉美裔学生来说，原因可能是近来移民的数量较大，其中多为英语学生。我们可以按地区绘制拉美裔的比例，来验证相关性。</p>
<pre><code class="python">show_district_map("hispanic_per")</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093770?w=998&amp;h=599" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="种族和 SAT 成绩" title="种族和 SAT 成绩"></span></p>
<p>拉美裔比例似乎和英语学生比例之间有一定相关性，但是要确定的话则需要做深入的分析和研究。</p>
<h2>性别差别与 SAT 成绩</h2>
<p>最后一个分析角度是性别与SAT 成绩。我们注意到女性比例更高的学校有更高的 SAT 成绩。我们可以用一个柱状图来呈现：</p>
<pre><code class="python">full.corr()["sat_score"][["male_per", "female_per"]].plot.bar()</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093771?w=382&amp;h=302" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="性别差别与 SAT 成绩" title="性别差别与 SAT 成绩"></span></p>
<p>为了挖掘更多信息，我们以 <code>female_per</code> 和 <code>sat_score</code> 列为轴绘制散点图：</p>
<pre><code class="python">full.plot.scatter(x='female_per', y='sat_score')</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093772?w=401&amp;h=272" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="性别差别与 SAT 成绩" title="性别差别与 SAT 成绩"></span></p>
<p>在图中，我们发现了一些拥有高比例女性和高 SAT 分数的学校。可以这样获取这些学校的名字：</p>
<pre><code class="python">full[(full["female_per"] &gt; 65) &amp; (full["sat_score"] &gt; 1400)]["School Name"]</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093773?w=1512&amp;h=366" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="性别差别与 SAT 成绩" title="性别差别与 SAT 成绩"></span></p>
<p>谷歌搜索显示，这些学校属于表演艺术的精英学校。所以可以同时解释这些学校有较高的女性占比以及较高的 SAT 分数。</p>
<h2>AP 成绩</h2>
<p>目前为止，我们已经考虑了生源方面的分析角度。另一个方向是研究学生参加 AP 考试与SAT 成绩的关系。二者之间应该是相关的，学习成绩好的学生，SAT 成绩也应更高。</p>
<pre><code class="python">full["ap_avg"] = full["AP Test Takers "] / full["total_enrollment"]

full.plot.scatter(x='ap_avg', y='sat_score')</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093774?w=399&amp;h=271" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="AP 成绩" title="AP 成绩"></span></p>
<p>看起来二者之间确实是正相关。右上方的学校很有趣，他们的 SAT 成绩很高，学生参加 AP 考试的比例也很高。</p>
<pre><code class="python">full[(full["ap_avg"] &gt; .3) &amp; (full["sat_score"] &gt; 1700)]["School Name"]</code></pre>
<p><span class="img-wrap"><img src="https://segmentfault.com/img/remote/1460000007093775?w=1362&amp;h=418" src="https://static.segmentfault.com/v-5bebf0aa/global/img/squares.svg" alt="AP 成绩" title="AP 成绩"></span></p>
<p>谷歌搜索显示，它们大多数属于需要考试才能入学的名牌学校。所以这些学校有高的 AP 考试比例也是理所当然的。</p>
<h2>故事总结</h2>
<p>数据科学的世界里，故事绝不会完全结束。把你的分析分享给其他人，别人可以就任何感兴趣的方向进一步扩充和塑造你的分析。比如本文中就有很多你可以继续进行挖掘的方向。</p>
<p>入门用数据来讲故事最好的方式，就是尝试扩充或者复制其他人的分析。如果你决定这么做，非常欢迎你扩展本文的分析，来看看你还会有什么发现。如果你这么做了，请在下面留言。</p>
<h2>下一步</h2>
<p>如果你已经学到这里了，代表你已经理解如何用数据讲故事和怎样打造你的数据科学作品集。一旦你完成了你的数据科学项目，请将它传到 Github，这样别人就可以与你协作了。</p>
<p>本文首发于编程派公众号及<a href="http://codingpy.com/article/data-science-portfolio-storytelling-with-data/" rel="nofollow noreferrer">网站</a>。</p>

                </div>
                                                
                <div class="clearfix mt10">
                    <ul class="article-operation list-inline pull-left mt15"><li><a target="_blank" href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><img class="mb5" src="https://static.segmentfault.com/v-5bebf0aa/global/img/creativecommons-cc.svg" height="20"/></a></li><li class="dropdown js__content-ops hidden-xs" data-module="article"
                                data-id="1190000007093751"
                                data-typetext="文章"><a href="javascript:void(0);" class="dropdown-toggle text-muted" data-toggle="dropdown"><i class="fa fa-ellipsis-h" aria-hidden="true"></i></a><ul class="dropdown-menu dropdown-menu-left"><li><a href="#911"
                                           data-toggle="modal"
                                           data-target="#911"
                                           data-action="report"
                                        >举报</a></li></ul></li></ul>
                    <div class="pull-right mt-10 hidden-xs">
                        <div class="widget-share__full" data-text="打造数据科学作品集：用数据讲故事"
 data-url="https://segmentfault.com/a/1190000007093751" data-shorturl="http://sfau.lt/b5DVzv"></div>


                    </div>
                </div>
                <div class="mt10 text-center mb30"><button type="button" id="mainLike" data-id="1190000007093751"
                                    class="btn btn-success btn-lg mr15 "><span id="mainLikeText">赞</span>&nbsp;&nbsp;<span class="seprator">|</span>&nbsp;&nbsp;
                                <span id="mainLikeNum">4 </span></button><button type="button" id="mainBookmark" data-type="article" data-id="1190000007093751"
                                    class="btn btn-default btn-lg "><span id="mainBookmarkText">收藏</span>&nbsp;&nbsp;<span class="seprator">|</span>&nbsp;&nbsp;<span id="mainBookmarkNum">9</span></button></div>                
                                <script type='text/javascript'>
                    OA_show(3);
                </script>

                <h4 class="pt20 mb15 mt0 border-top">你可能感兴趣的</h4>

                
                <div class="mb15 block">
                    <script type='text/javascript'>
                        OA_show(4);
                    </script>
                </div>

                                <div id="paradigm-article-related"></div>

                
        <div class="comments--news comments--default comments--article 
    " 
    data-id="1190000007093751" data-user-id="" data-author-id="1030000003962780 "
         data-is-admin="null" id="goToReplyArea">
                    <div class="mb10 clearfix">
                <strong class="comments-stat pull-left mr10">1 条评论</strong>

                                                    <div class="btn-group btn-group-xs pull-right comments-sort btn-group-menu" role="menu">
                        <a href="javascript:;" 
                           class="btn btn-default active" data-sort="default">默认排序</a>
                        <a href="javascript:;" 
                           class="btn btn-default" data-sort="desc">时间排序</a>
                    </div>
                            </div>
                <div class="comments-container">
                                <div class="comments-list">
                <div class="comments-item" data-id="1050000007098966">
            <div class="pull-left">
                <a href="/u/morefreeze" target="_blank"><img class="avatar-32 " src="https://static.segmentfault.com/v-5bebf0aa/global/img/user-64.png" alt=""></a>
            </div>
            <div class="comments-content">
                <div class="comment-trigger">
                    <div class="pull-right comment-option">
                                                <a href="#911" class="ml10" data-toggle="modal" data-target="#911" data-action="report" data-action-text="举报" data-module="comment" data-id="1050000007098966" data-typetext="评论" data-placement="top" title="举报"><span class="glyphicon glyphicon-flag" aria-hidden="true"></span></a>
                                            </div>
                    <strong><a target="_blank" href="/u/morefreeze">morefreeze</a></strong>
                    <span class="comments-isAuthor hide"></span>
                    <span class="comments-date">  ·  2016年10月08日</span>
                </div>

                <div class="fmt mb10"><p>理解数据那一小节的图不完整，原文是个可以滚动的，这里只截了一部分。统一数据那节的图和上一节是一样的。这么长文章翻译着实辛苦，但还请认真校对。建议看原文</p></div>

                <form action="/api/comment/1050000007098966/edit">
                    <div class="form-group">
                        <textarea class="editTextarea mono form-control mb10 hidden" rows="1" name="text" style="height: 28px; overflow: hidden; word-wrap: break-word;" >理解数据那一小节的图不完整，原文是个可以滚动的，这里只截了一部分。统一数据那节的图和上一节是一样的。这么长文章翻译着实辛苦，但还请认真校对。建议看原文</textarea>
                    </div>
                </form>

                <p class="comment-ops not-reply">
                    <span class="comments-zan ">
                        <i class="fa fa-thumbs-up mr4" aria-hidden="true"></i>
                        <span class="comments-zan-text">赞</span>
                        <span class="comments-zan-value"></span>
                    </span>
                    
                    <span class="ml15 comments-reply-btn">回复</span>

                    <span class="pull-right editBtns hidden">
                      <button class="btn btn-link btn-xs cancel" type="button">取消</button>
                      <button class="btn btn-primary btn-xs edit ml10" type="button">保存</button>
                    </span>
                </p>

                <div class="reply-list reply-list--empty">

                    
                    <div class="reply-item reply-item--ops" data-obj="obj">
                        <a class="reply-inner-btn" href="javascript:;">添加回复</a>
                        
                    </div>
                </div>


            </div>
        </div>
            </div>
    <div class="comments-loading hide">载入中...</div>
        <div class="comments-more hide"><a href="javascript:;">显示更多评论</a></div>
    

                                    <div class="comments-box" id="goToReplyEditor">
                <div class="pull-left">
                    <img class="avatar-32 "
                         src="https://static.segmentfault.com/v-5bebf0aa/global/img/user-128.png"
                         alt=""/>
                </div>
                <div class="comments-box-content">
                    <form action="/api/article/1190000007093751/comments/add">
                        <div class="form-group mb0">
                            <textarea name="text" rows="3" class="form-control"placeholder="文明社会，理性评论"></textarea>
                            <div class="mt15 text-right">
                                <button type="button" class="hide"></button>
                                <button class=" btn btn-primary" type="button">发布评论</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
                                                        </div>
    </div>


                                    
                
                

            </div><!-- /.main -->


            <div class="col-md-3 side hidden-sm hidden-xs mt30">
                                                
                <div class="mb25 hidden-md hidden-sm hidden-xs">
    <img src="https://static.segmentfault.com/sponsor/20181120.png" alt="Planets" usemap ="#gridsMap" width=255 height=136>
    <map name="gridsMap" id="gridsMap"></map>
    <div style="text-align: center;"><a style="text-align:center; color:#9E9E9E; font-size:12px" href="/sponsor">想在上方展示你的广告？</a></div>
            <script async src="https://static.segmentfault.com/sponsor/20181120.js"></script>
    </div>

                                <style>
                    .job-recommend-area a:not(:last-of-type) {margin-bottom:10px; display: block}
                    .job-recommend-area a:hover {text-decoration: none;}
                </style>
                <div class="hidden-md">
                    <div class="job-recommend">
                      <h3 class="job-title">推广链接</h3>
                      <div class="job-recommend-area">
                                                <script type='text/javascript'>
                            OA_show(7);
                            OA_show(9);
                            OA_show(10);
                            OA_show(15);
                            OA_show(16);
                        </script>
                      </div>
                    </div>
                    <style>
                    .job-recommend {margin-bottom: 30px;}
                    .job-title {
                        font-size: 14px;
                        color: #017E66;
                        font-weight: 500;
                        background: #BFE6D7;
                        margin: 0;
                        padding-top: 6px;
                        padding-bottom: 6px;
                        text-align: center;
                    }
                    .job-recommend-area {
                      padding: 13px;
                      border: 3px solid #EBF7F3;
                      border-top: none;
                    }
                    </style>
                    
                                    </div>

                                
                <div class="hidden-md ad-should-be-fixed">
                    <div class="mb25 block">
                        <script type='text/javascript'>
                            OA_show(1);
                        </script>
                    </div>
                </div>
                <div class="post-nav hidden-xs">
                    <div class="panel panel-default widget-outline">
                        <div class="panel-heading">目录</div>
                        <div class="panel-body">
                            <div class="nav-body" style="overflow:scroll">
                                <div class="highlight-title"></div>
                                <ul class="articleIndex"></ul>
                            </div>
                        </div>
                    </div>
                </div>

                
            </div><!-- /.side -->
        </div>
    </div>
</div>

<div id="shareToWeiboModal" class="modal" tabindex='-1'>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">×</span><span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title">分享</h4>
            </div>
            <div class="modal-body">
                <p class="sfModal-content">
                    分享到微博？
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default dont-likeweibo" data-dismiss="modal">取消</button>
                <a href="" id="shareLink" class="btn btn-primary done-btn" target="_blank"
                   onclick="$('#shareToWeiboModal').modal('hide')">分享</a>
            </div>
        </div>
    </div>
</div>


<div class="modal widget-911" id="911" tabindex='-1'>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal" type="button">
          <span aria-hidden="true">&times;</span>
          <span class="sr-only">Close</span>
        </button>
        <h4 class="modal-title"><span data-model="action"></span><span data-model="type"></span></h4>
      </div>
      <div class="modal-body">
        <form id="reportForm">
          <!-- 后台返回信息 -->
          <p class="alert alert-warning" data-model="returnMsg"></p>
          <div data-role="base">
            <p>
              <strong class="required">我要<span data-model="action"></span>该<span data-model="type"></span>，理由是：</strong>
            </p>
            <ul class="list-unstyled" data-model="list"></ul>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-default pull-left" type="button" data-role="back" style="display:none">返回重选</button>
                <button class="btn btn-default" data-dismiss="modal" type="button">取消</button>
        <button class="btn btn-primary" data-role="submit" type="button">提交</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div class="modal widget-seo" id="seo" tabindex='-1'>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" data-dismiss="modal" type="button">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title"><span data-model="action"></span><span data-model="type"></span></h4>
            </div>
            <div class="modal-body">
                <form id="seoForm">
                    <!-- 后台返回信息 -->
                    <p class="alert alert-warning" data-model="returnMsg"></p>
                    <div data-role="base">
                        <div class="form-group">
                            <label>SEO标题：</label><textarea style="min-height: 35px; width: 100%; max-height: 132px; overflow: hidden; overflow-wrap: break-word; height: 32px;" name="title" class="form-control" rows="1" placeholder="请输入SEO标题"></textarea>
                        </div>
                        <div class="form-group">
                            <label>SEO描述：</label><textarea style="min-height: 35px; max-height: 132px; overflow: hidden; overflow-wrap: break-word; height: 32px;" name="desc" class="form-control" rows="1" placeholder="请输入SEO描述"></textarea>
                        </div>
                        <div class="form-group">
                            <label>SEO keywords：</label><textarea style="min-height: 35px; max-height: 132px; overflow: hidden; overflow-wrap: break-word; height: 32px;" name="keywords" class="form-control" rows="1" placeholder="请输入SEO keywords"></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal" type="button">取消</button>
                <button class="btn btn-primary" data-role="submit" type="button">提交</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

    <div id="loginBanner"  class="hidden-sm hidden-xs loginBanner">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-7">
                <h1 class="title">在 SegmentFault，学习技能、解决问题</h1>
                <p class="desc">每个月，我们帮助 1000 万的开发者解决各种各样的技术问题。并助力他们在技术能力、职业生涯、影响力上获得提升。</p>
            </div>
            <div class="col-lg-3 col-lg-offset-3 col-md-4 col-md-offset-1">
                <form class="register-form clearfix" action="/api/user/phone/register">

                    
                    <a href="/user/register" class="SFLogin btn btn-lg btn-primary mr15">免费注册</a>
                    <a href="/user/login" class="SFRegister btn btn-lg btn-primary">立即登录</a>
                </form>
            </div>
        </div>
    </div>
    </div>






<footer id="footer">
    <div class="container">
        <div class="row hidden-xs">
            <dl class="col-sm-2 site-link">
                <dt>产品</dt>
                
                <dd><a href="/questions/hottest?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=热门问答">热门问答</a></dd>
                <dd><a href="/blogs/hottest?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=热门专栏">热门专栏</a></dd>
                <dd><a href="/lives?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=热门讲堂">热门讲堂</a></dd>
                <dd><a href="/events?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=最新活动">最新活动</a></dd>
                <dd><a href="/groups?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=圈子">圈子</a></dd>
                <dd><a href="/jobs?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=找工作">找工作</a></dd>
                <dd><a href="/app?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=app">移动客户端</a></dd>
                
            </dl>
            
            <dl class="col-sm-2 site-link">
                <dt>资源</dt>
                <dd><a href="/weekly?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-weekly&utm_term=每周精选">每周精选</a></dd>
                <dd><a href="/users?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-users&utm_term=用户排行榜">用户排行榜</a></dd>
                <dd><a href="/badges?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-badges&utm_term=徽章">徽章</a></dd>
                <dd><a href="/faq?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-faq&utm_term=帮助中心">帮助中心</a></dd>
                <dd><a href="/repu?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-repu&utm_term=声望与权限">声望与权限</a></dd>
                <dd><a href="/community?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-community&utm_term=社区服务中心">社区服务中心</a></dd>
                <dd><a href="https://docs.segmentfault.com?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-docs&utm_term=开发手册">开发手册</a></dd>

   
            </dl>

            <dl class="col-sm-2 site-link">
                <dt>商务</dt>
                <dd><a href="https://business.segmentfault.com/services?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-services-rencai&utm_term=人才服务" target="_blank">人才服务</a></dd>
                <dd><a href="https://business.segmentfault.com/services?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-services-qiyeneixun&utm_term=企业服务" target="_blank">企业培训</a></dd>
                <dd><a href="https://business.segmentfault.com/services?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-services-huodongcehua&utm_term=活动策划" target="_blank">活动策划</a></dd>
                <dd><a href="https://business.segmentfault.com/ads?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-ads&utm_term=广告投放" target="_blank">广告投放</a></dd>
                <dd><a href="https://business.segmentfault.com/bc?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-bc&utm_term=区块链解决方案" target="_blank">区块链解决方案</a></dd>
                <dd><a href="https://business.segmentfault.com/contact?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-contact&utm_term=合作联系" target="_blank">合作联系</a></dd>
            </dl>
            
            <dl class="col-sm-2 site-link">
                <dt>关于</dt>
                <dd><a href="https://about.segmentfault.com/?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=about&utm_content=about-index&utm_term=关于我们">关于我们</a></dd>
                <dd><a href="https://about.segmentfault.com/careers.html?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=about&utm_content=about-careers&utm_term=加入我们">加入我们</a></dd>
                <dd><a href="https://about.segmentfault.com/contact.html?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=about&utm_content=about-contact&utm_term=联系我们">联系我们</a></dd>
            </dl>

            <dl class="col-sm-2 site-link">
                <dt>关注</dt>
                                <dd><a href="//segmentfault.com/blog/segmentfault" target="_blank">产品技术日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/community_admin" target="_blank">社区运营日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/segmentfault_news" target="_blank">市场运营日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/segmentfault_team" target="_blank">团队日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/interview" target="_blank">社区访谈</a></dd>
                                <dd>
                    <ul class="sn-inline">
                        <li>
                            <a class="entypo-wechart icon-sn-weixin weixin-popover-qrcode" data-toggle="popover" data-placement="top"  data-content="">微信</a>
                        </li>
                        <li>
                            <a href="http://weibo.com/segmentfault" target="_blank" class="entypo-weibo icon-sn-weibo" >新浪微博</a>
                        </li>
                        <li>
                            <a href="https://github.com/SegmentFault" target="_blank" class="entypo-facebook icon-sn-github">Github</a>
                        </li>
                        <li>
                            <a href="https://twitter.com/segment_fault" target="_blank" class="entypo-twitter icon-sn-twitter">Twitter</a>
                        </li>
                    </ul>
                </dd>
            </dl>

            <dl class="col-sm-2 site-link" id="license">
                <dt>条款</dt>
                <dd><a href="/tos">服务条款</a></dd>
                <dd><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">内容许可</a></dd>
                <dd>
                    <a href="/app" class="clearfix mt10 block"><img src="https://static.segmentfault.com/v-5bebf0aa/page/img/app/appQrcode.png" class="app-qrcode"></a>
                    <div class="app-download-desc">
                        <p>扫一扫下载 App</p>
                    </div>
                    
                </dd>
            </dl>
        </div>
        <div class="copyright">
            Copyright &copy; 2011-2018 SegmentFault. 当前呈现版本 17.06.16<br>
            <a href="http://www.miibeian.gov.cn/" rel="nofollow">浙ICP备 15005796号-2</a> &nbsp;
            <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602002000" rel="nofollow">浙公网安备 33010602002000号</a>
            <span class="ml5">杭州堆栈科技有限公司版权所有</span>
            <P class="mt30">CDN 存储服务由 <a target="_blank" href="https://www.upyun.com/?utm_source=segmentfault&utm_medium=link&utm_campaign=upyun&md=segmentfault">又拍云</a> 赞助提供 </p>
        </div>
        <p class="text-center">
            <a class="js__view--selector hidden-sm hidden-md hidden-lg" data-action="mobile" href="javascript:;">移动版</a>
            <a class="js__view--selector hidden-sm hidden-md hidden-lg" data-action="desktop" href="javascript:;">桌面版</a>
        </p>
    </div>
</footer>

<div id="fixedTools" class="hidden-xs hidden-sm">
    <a id="backtop" class="hidden border-bottom" href="#">回顶部</a>
</div>

    <script id="loginModal" type="text/template">
    <div class="row bg-white login-modal">
        <div class="col-md-12 login-wrap">
            <form action="/api/user/login" method="POST" role="form" class="mt15">
                <div class="form-group hidden">
                                        <input type="text" class="form-control" name="remember" value="1"
                           autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="username" class="control-label">手机号 或 Email</label>
                    <input type="text" class="form-control" name="username" tabindex="1" required placeholder="11 位手机号 或 Email"
                           autocomplete="off">
                </div>
                <div class="form-group">
                    <label class="control-label">密码</label><span class="pull-right"><a
                                href="/user/forgot" tabindex="4">忘记密码</a></span>
                    <input type="password" class="form-control" name="password" tabindex="2" required placeholder="请输入密码">
                </div>
                <div class="form-group">
                    <a
                            
                                                    href="/user/phoneLogin"
                            class="phoneLogin"
                                            >手机验证码登录</a>
                </div>
                <div class="form-group clearfix">
                    <button type="submit" class="btn-block btn btn-primary pull-right pl20 pr20" tabindex="3"
                            onclick='ga("send", "event", "email login button", "clicked", "login modal");'>登录
                    </button>
                </div>
            </form>
            <div class="text-muted text-center more-login-area">
    <span class="more-login-words">更多登录方式</span>
</div>
<div class="widget-login mb15 text-center">
    <a href="/user/oauth/google" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "google"});'><span
                class="icon-sn-google"></span></a>
    <a href="/user/oauth/github" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "github"});");'><span
                class="icon-sn-github"></span></a>
    <a href="/user/oauth/weibo" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "weibo"});'><span
                class="icon-sn-weibo"></span></a>
    <a href="/user/oauth/qq" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-qq"></span></a>
    <a href="/user/oauth/weixin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-weixin"></span></a>
    <a href="/user/oauth/linkedin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "linkedin"});'><span
                class="icon-sn-linkedin"></span></a>
    <span id="loginShowMore" style="cursor: pointer" class="mb5"><span class="icon-sn-dotted"></span></span>
    <a href="/user/oauth/twitter" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "twitter"});'><span
                class="icon-sn-twitter"></span></a>
    <a href="/user/oauth/facebook" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "facebook"});'><span
                class="icon-sn-facebook"></span></a>
    <a href="/user/oauth/douban" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "douban"});'><span
                class="icon-sn-douban"></span></a>
</div>
<div class="form-group clearfix">
    <a class="btn-block btn btn-default pull-right pl20 pr20 
                        SFLogin
             "

            
        onclick='ga("send", "event", "email login button", "clicked", "login modal");'>
                    注册新账号
            </a>
</div>
<p class="text-muted text-center mb15">登录即表示你同意网站的<a href="/tos" target="_blank">《服务条款》</a></p>        </div>
    </div>
</script>
    <script id="registerModal" type="text/template">
    <div class="row bg-white login-modal">
        <div class="col-md-12 login-wrap">
            
            <form action="/api/user/register" method="POST" role="form" class="mt15">
                <div class="form-group">
                    <label for="name" class="control-label">你的名字</label>
                    <input type="text" class="form-control" name="name" required placeholder="真实姓名或常用昵称">
                </div>
                
                <div class="form-group">
                    <label for="mail" class="control-label">手机号 或 Email</label>
                    <input type="text" class="form-control" id="login-name" name="mail" required placeholder="11 位手机号 或 Email">
                </div>
                
                <input type="text" class="hidden" name="register_type" value="mail">

                <div class="form-group">
                    <div class="phone-register-only hidden">
                        <div class="captchaInput mb10">
                            <input type="text" class="form-control" name="cap" placeholder="右侧的验证码" style="width:50%; display: inline; margin-right: 15px;">
                            <span class="mt10">
                                <a id="loginReloadCaptcha" href="javascript:void(0)">
                                <img src="/user/captcha?w=135&h=34" class="cap" width="135" height="34"/></a>
                            </span>
                        </div>
                        <div class="input-group">
                            <input name="code" type="text" class="form-control js-user-login__phone-code-value" placeholder="短信验证码">
                            <span class="input-group-btn">
                                <button class="btn btn-default js-user-login__phone-vaild-btn" style="width:96px;" type="button">
                                获取验证码</button>
                            </span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="password" class="control-label">密码</label>
                    <input type="password" class="form-control" name="password" required placeholder="不少于 6 位的密码">
                </div>
                <div class="form-group clearfix">
                    <button type="submit" class="btn-block btn btn-primary pl20 pr20 pull-right"
                            onclick='ga("send", "event", "email register button", "clicked", "login modal");'>注册
                    </button>
                </div>
                                <div class="text-muted text-center more-login-area">
    <span class="more-login-words">更多登录方式</span>
</div>
<div class="widget-login mb15 text-center">
    <a href="/user/oauth/google" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "google"});'><span
                class="icon-sn-google"></span></a>
    <a href="/user/oauth/github" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "github"});");'><span
                class="icon-sn-github"></span></a>
    <a href="/user/oauth/weibo" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "weibo"});'><span
                class="icon-sn-weibo"></span></a>
    <a href="/user/oauth/qq" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-qq"></span></a>
    <a href="/user/oauth/weixin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-weixin"></span></a>
    <a href="/user/oauth/linkedin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "linkedin"});'><span
                class="icon-sn-linkedin"></span></a>
    <span id="loginShowMore" style="cursor: pointer" class="mb5"><span class="icon-sn-dotted"></span></span>
    <a href="/user/oauth/twitter" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "twitter"});'><span
                class="icon-sn-twitter"></span></a>
    <a href="/user/oauth/facebook" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "facebook"});'><span
                class="icon-sn-facebook"></span></a>
    <a href="/user/oauth/douban" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "douban"});'><span
                class="icon-sn-douban"></span></a>
</div>
<div class="form-group clearfix">
    <a class="btn-block btn btn-default pull-right pl20 pr20 
                        SFRegister
             "

            
        onclick='ga("send", "event", "email login button", "clicked", "login modal");'>
                    已有账号登录
            </a>
</div>
<p class="text-muted text-center mb15">登录即表示你同意网站的<a href="/tos" target="_blank">《服务条款》</a></p>            </form>
        </div>
    </div>
</script>
    <script id="phoneLoginModal" type="text/template">

    <div class="row bg-white login-modal phonelogin-modal">
        <div class="col-md-12 login-wrap">
            <form action="/api/user/phonelogin" method="POST" role="form" class="mt15">
                <div class="form-group">
                    <label for="phone" class="control-label required">手机号</label>
                    <input type="text" class="form-control phonelogin--phone" name="phone" tabindex="1" required placeholder="11 位手机号"
                           autocomplete="off">
                    <span class="help-block"></span>
                </div>

                <div class="form-group">
                    <label for="authCode" class="control-label required">验证码</label>
                    <div class="input-group">
                        <input type="text" class="form-control bindphone--code" name="authCode" placeholder="短信验证码">
                        <span class="input-group-btn">
                            <button class="btn btn-default user-bind__phone-vaild-btn" type="button">获取验证码</button>
                        </span>
                    </div>
                    <div class="col-sm-3"></div>
                </div>

                <div class="form-group">
                    <a 
                                                            href="/user/login"
                                class="SFRegister"
                                                >密码登录（手机号或 Email）</a>
                </div>
                <div class="form-group clearfix">
                    <button type="submit" class="btn-block btn btn-primary pull-right pl20 pr20" tabindex="3"
                            onclick='ga("send", "event", "email login button", "clicked", "login modal");'>登录
                    </button>
                </div>
            </form>
            <div class="text-muted text-center more-login-area">
    <span class="more-login-words">更多登录方式</span>
</div>
<div class="widget-login mb15 text-center">
    <a href="/user/oauth/google" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "google"});'><span
                class="icon-sn-google"></span></a>
    <a href="/user/oauth/github" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "github"});");'><span
                class="icon-sn-github"></span></a>
    <a href="/user/oauth/weibo" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "weibo"});'><span
                class="icon-sn-weibo"></span></a>
    <a href="/user/oauth/qq" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-qq"></span></a>
    <a href="/user/oauth/weixin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-weixin"></span></a>
    <a href="/user/oauth/linkedin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "linkedin"});'><span
                class="icon-sn-linkedin"></span></a>
    <span id="loginShowMore" style="cursor: pointer" class="mb5"><span class="icon-sn-dotted"></span></span>
    <a href="/user/oauth/twitter" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "twitter"});'><span
                class="icon-sn-twitter"></span></a>
    <a href="/user/oauth/facebook" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "facebook"});'><span
                class="icon-sn-facebook"></span></a>
    <a href="/user/oauth/douban" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "douban"});'><span
                class="icon-sn-douban"></span></a>
</div>
<div class="form-group clearfix">
    <a class="btn-block btn btn-default pull-right pl20 pr20 
                        SFLogin
             "

            
        onclick='ga("send", "event", "email login button", "clicked", "login modal");'>
                    注册新账号
            </a>
</div>
<p class="text-muted text-center mb15">登录即表示你同意网站的<a href="/tos" target="_blank">《服务条款》</a></p>        </div>
    </div>
</script>
<script id="bindPhoneModal" type="text/template">
    <div class="bg-white bindphone-model">
        <div class="alert alert-warning" role="alert">
            为了保证账号安全，请先绑定手机
        </div>
        <div>
            <form class="form-horizontal form__bindphone-apply" style="background-color:#fff;padding:0;">
                <div class="form-group ">
                    <label for="phoneNumber" class="col-sm-3 control-label required" >手机号码</label>
                    <div class="col-sm-6">
                        <input type="text" class="form-control bindphone--phone" id="phoneNumber" name="phone" placeholder="仅只支持大陆手机号">
                    </div>
                    <div class="col-sm-3"></div>
                </div>
                <div class="form-group">
                    <label for="authCode" class="col-sm-3 control-label required">验证码</label>
                    <div class="col-sm-6">
                        <div class="input-group">
                            <input type="text" class="form-control bindphone--code" name="code" placeholder="短信验证码">
                            <span class="input-group-btn">
                                <button class="btn btn-default user-bind__phone-vaild-btn" type="button">获取验证码</button>
                            </span>
                        </div>
                    </div>
                    <div class="col-sm-3"></div>
                </div>
            </form>
        </div>

    </div>
</script>


<script>
    window.serverTime = 1542680403000;
</script>

<script>
    (function (w) {
        w.SF = {
            staticUrl: "https://static.segmentfault.com/v-5bebf0aa"
        };
        w.SF.token = (function () {
    var _Ek8 = 'b'//'y16'
+'7'//'A'
+'a9c'//'alb'
+'hk'//'hk'
+//'l'
'b11'+'8'//'b'
+//'nJG'
'55d'+'4f6'//'1'
+'bb9'//'t'
+//'o'
'16a'+//'O'
'a0d'+'m'//'m'
+//'Ob'
'4a5'+'35'//'6Y'
+//'e'
'dc'+'7'//'Dm'
, _HNxfFX = [[5,7],[24,25]];

    for (var i = 0; i < _HNxfFX.length; i ++) {
        _Ek8 = _Ek8.substring(0, _HNxfFX[i][0]) + _Ek8.substring(_HNxfFX[i][1]);
    }

    return _Ek8;
})();;
    })(window);

                var lock = {
        type: "",
        text: '',
        table: {"ban_post":[1,"\u4f60\u5df2\u7ecf\u88ab\u7981\u8a00, \u65e0\u6cd5\u8fdb\u884c\u6b64\u64cd\u4f5c, \u5982\u6709\u7591\u4e49\u8bf7\u63d0\u4ea4\u7533\u8bc9, \u6216\u8005\u53d1\u90ae\u4ef6\u5230pr@segmentfault.com"]}
    };

        var ddosMode = false;
    
        (function (currentUrl) {
        if (typeof URL != 'undefined') {
            var baseUrl = new URL('https://segmentfault.com');

            if (baseUrl.protocol != currentUrl.protocol
                || baseUrl.host != currentUrl.host) {
                window.location.href = baseUrl.protocol + '//' + baseUrl.host
                    + currentUrl.pathname + currentUrl.search + currentUrl.hash;
            }
        }
    })(window.location);
    </script>

             <script crossorigin src="https://static.segmentfault.com/v-5bebf0aa/3rd/assets.js"></script>
                 
        <script crossorigin src="https://static.segmentfault.com/v-5bebf0aa/blog/script/post.min.js"></script>
            

<script>
if (!!navigator.userAgent.match(/MicroMessenger/i)) {
    require.config({
        paths: { weixin_jsapi: '//res.wx.qq.com/open/js/jweixin-1.2.0' }
    });

    require(['weixin_jsapi'], function (wx) {
        var share = {"title":"\u6253\u9020\u6570\u636e\u79d1\u5b66\u4f5c\u54c1\u96c6\uff1a\u7528\u6570\u636e\u8bb2\u6545\u4e8b","desc":"\u8fd9\u662f\u300c\u5982\u4f55\u6253\u9020\u6570\u636e\u79d1\u5b66\u4f5c\u54c1\u96c6\u300d\u7cfb\u5217\u6559\u7a0b\u7684\u7b2c\u4e00\u7bc7\u3002\u5982\u679c\u89c9\u5f97\u4e0d\u9519\uff0c\u53ef\u4ee5\u8ba2\u9605\u6211\u4eec\u7b2c\u4e00\u65f6\u95f4\u83b7\u53d6\u6700\u65b0\u66f4\u65b0\u3002\u8fd9\u4e2a\u7cfb\u5217\u7684\u6587\u7ae0\u90fd\u5f88\u957f\uff0c\u5efa\u8bae\u5148\u6536\u85cf\u518d\u627e\u65f6\u95f4\u8be6\u7ec6\u9605\u8bfb\u3002\u5982\u679c\u4f60\u89c9\u5f97\u8bd1\u6587\u8bfb\u8d77\u6765\u4e0d\u8212\u670d\uff0c\u53ef\u4ee5\u70b9\u6b64\u9605\u8bfb\u539f\u6587\uff0c\u5e76\u7ed9...","link":"https:\/\/segmentfault.com\/a\/1190000007093751","imgUrl":"https:\/\/segmentfault.com\/img\/remote\/1460000007093754?w=1522&amp;h=428"};
        share.title += ' - SegmentFault 思否';

        $.getJSON('/api/util/weixin/jsapi', function (o) {
            methods = o.data.jsApiList.slice();

            wx.config(o.data);
            wx.error(console.error);
            wx.ready(function () {
                methods.forEach(function (method) {
                    wx[method](share);
                });
            });
        });
    });
}
</script>

<script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-918487-8']);
    _gaq.push(['_trackPageview']);
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
        a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

                
        

            

    ga('create', 'UA-918487-8', 'auto', {
        'userID'
    : 0,
        'createdTime'
    : 0,
        'now'
    : 1542680403,
        'allowLinker'
    : true });
    ga('require', 'linker');
    ga('linker:autoLink', ['docs.segmentfault.com'] );
    ga('set', 'dimension1', 'guest');
    ga('send', 'pageview');

</script>

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?e23800c454aa573c0ccb16b52665ac26";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>



</body>
</html>

