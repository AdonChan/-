

<!DOCTYPE HTML><html lang="zh-CN"><head><meta charset="UTF-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><meta name="renderer" content="webkit"/><meta property="qc:admins" content="15317273575564615446375"/><meta property="og:image" content="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon.png"/><meta name="viewport"
              content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/><meta name="alexaVerifyID" content="LkzCRJ7rPEUwt6fVey2vhxiw1vQ"/><meta name="apple-itunes-app" content="app-id=958101793, app-argument="><title>[译] 属性访问、特性和描述符 1 - young - SegmentFault 思否</title><meta name="description" content="注：原书作者 Steven F. Lott，原书名为 Mastering Object-oriented Python"/><meta name="keywords" content="python,python3.x"/><link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="SegmentFault"/><link rel="shortcut icon" href="https://static.segmentfault.com/v-5bebf0aa/global/img/favicon.ico"/><link rel="apple-touch-icon" href="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon.png"><meta name="msapplication-TileColor" content="#009a61"/><meta name="msapplication-square150x150logo" content="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon.png"/><meta name="baidu_union_verify" content="bcf7fd80dca60d53d46d5b46e1b990ca"><link rel="alternate" type="application/atom+xml" title="SegmentFault 最新问题" href="/feeds/questions"><link rel="alternate" type="application/atom+xml" title="SegmentFault 最新文章" href="/feeds/blogs"><link rel="stylesheet" href="https://static.segmentfault.com/v-5bebf0aa/global/css/global.css"/><link rel="stylesheet" href="https://static.segmentfault.com/v-5bebf0aa/blog/css/blog.css"/><link rel="stylesheet" href="https://static.segmentfault.com/v-5bebf0aa/global/css/responsive.css"/><script type='text/javascript' src='https://sponsor.segmentfault.com/spcjs.php?id=1&block=1&repu=0&tag=python,python3.x'></script></head><!-- 推荐引擎 --><script charset="utf-8" id="ParadigmSDK" src="https://nbrecsys.4paradigm.com/sdk/js/ParadigmSDK_v2.js" data="216" defSI="594"></script><script>
    ParadigmSDK.init("46e957bd9dea4acdaa15b4b64aff728f");
    ParadigmSDK.trackDetailPageShow();
</script><body data-mod="blog"
    class="blog-post "><!--[if lt IE 9]><div class="alert alert-danger topframe" role="alert">你的浏览器实在<strong>太太太太太太旧了</strong>，放学别走，升级完浏览器再说 <a target="_blank" class="alert-link" href="http://browsehappy.com">立即升级</a></div><![endif]--><img id="icon4weChat" style="height: 0;width: 0;" src="https://static.segmentfault.com/v-5bebf0aa/global/img/touch-icon-512.png"><div id="gridMapHoverBox" style="position:absolute; border: 1px solid #009a61; z-index:99; font-size: 10px; background:#fff"></div><div class="global-nav sf-header sf-header--index"><div class="bottom-nav visible-xs visible-sm "><div class="opts"><a class="opts-group " href="/"><i class="fa fa-home" aria-hidden="true"></i><span>首页</span></a><a class="opts-group " href="/questions"><i class="fa fa-comments" aria-hidden="true"></i><span>问答</span></a><a class="opts-group active" href="/blogs"><i class="fa fa-pencil-square" aria-hidden="true"></i><span>专栏</span></a><a class="opts-group " href="/lives"><i class="fa fa-play-circle" aria-hidden="true"></i><span>讲堂</span></a><div class="opts-group"><div class="btn-group dropup"><i class="fa fa-bars dropdown hoverDropdown" data-toggle="dropdown" aria-hidden="true"><span>更多</span></i><ul class="dropdown-menu"><li><a href="/jobs">职位</a></li><li><a href="/events">活动</a></li><li><a href="/tags">标签</a></li><li><a href="/badges">徽章</a></li></ul></div></div></div></div><nav class="container nav"><div class="visible-xs visible-sm header-response"><a href="/search" style="display:block"><i class="fa fa-search" aria-hidden="true"></i></a><div class="sf-header__logo sf-header__logo--response"><h1><a href="/" style="height:24px; background-size: auto 24px;"></a></h1></div><a href="/user/login" class="pull-right login-btn"><i class="fa fa-user" aria-hidden="true"></i></a></div><script>
mobileScroll(
    function(direction) { 
        try {
            if (direction === 'down') {
                document.querySelector('.bottom-nav').classList.add('hidden')
            } else {
                document.querySelector('.bottom-nav').classList.remove('hidden')
            }
        } catch(err) {}
    }
);    
function mobileScroll( fn ) {
    var beforeScrollTop = document.documentElement.scrollTop || document.body.scrollTop,
        fn = fn || function() {};
    window.addEventListener("scroll", function() {
        var afterScrollTop = document.documentElement.scrollTop || document.body.scrollTop,
            delta = afterScrollTop - beforeScrollTop;
        if( delta === 0 ) return false;
        fn( delta > 0 ? "down" : "up" );
        beforeScrollTop = afterScrollTop;
    }, false);
}
</script><div class="row hidden-xs hidden-sm"><div class="col-sm-8 col-md-9 col-lg-9"><div class="sf-header__logo"><h1><a href="/">SegmentFault</a></h1></div><div><ul class="menu list-inline pull-left hidden-xs"><li class="menu__item"><a href="/" class="">首页</a></li><li class="menu__item"><a href="/questions" class="">问答</a></li><li class="menu__item"><a href="/blogs" class="active-nav">专栏</a></li><li class="menu__item"><a href="/lives" class="">讲堂</a></li><li class="menu__item menu__item--more dropdown"><a href="##" class="dropdown-toggle dropdownBtn" data-toggle="dropdown">
                                        发现<i class="fa fa-caret-down" style="font-size: 14px;margin-left: 5px;" aria-hidden="true"></i></a><div class="dropdown-block hidden"><ul class="dropdown-content-menu"><li><a href="/groups">圈子</a></li><li><a href="/events">活动</a></li><li><a href="/tags">标签</a></li><li><a href="/jobs">找工作</a></li><li><a href="/users">排行榜</a></li><li><a href="/badges">徽章</a></li><li><a href="/notes">笔记</a></li><li><a href="https://docs.segmentfault.com" target="_blank">开发手册<i style="line-height: 20px;font-size: 12px;color: #F5A623;" class="ml10 fa fa-external-link-square"></i></a></li><li><a href="https://business.segmentfault.com/ads?utm_source=sf-header" target="_blank">广告投放<i style="line-height: 20px;font-size: 12px;color: #F5A623;" class="ml10 fa fa-external-link-square"></i></a></li></ul></div></li><li class="menu__item visible-sm-inline-block"><a href="/search"><span class="glyphicon glyphicon-search" style="vertical-align: middle;"></span></a></li></ul><form action="/search" class="header-search  hidden-sm hidden-xs pull-right" ><button class="btn btn-link"><span class="sr-only">搜索</span><span class="glyphicon glyphicon-search"></span></button><input id="searchBox" name="q" type="text"  placeholder="搜索问题或关键字" class="form-control" value="" /></form></div></div><div class="col-sm-4 col-md-3 col-lg-3 text-right"><ul class="opts list-inline hidden-xs"><li class="opts__item"><a href="/user/login" class="SFRegister btn-signin" style="margin-bottom:2px;">立即登录</a><a href="/user/register" class="SFLogin ml10 btn-signup"
                                       onClick="_gaq.push(['_trackEvent', 'Button', 'Click', 'Login']);">免费注册</a></li></ul></div></div></nav></div>
    
<input id="articleId" value="1190000004025274" class="hidden" />

<div class="wrap" data-blogid="1200000000533048">
    <div class="container mt15" style="position:relative">
        <div class="row">
            <div class="col-xs-12 col-md-9 main ">
                                <ol class="breadcrumb mb15">
                    <li><a href="/blogs">专栏</a></li>
                                        <li><a href="/blog/wanyoung">young</a></li>
                                        <li class="active">文章详情</li>
                </ol>
                                <div class="post-topheader custom- pt0">
                    <div class="mb20">
                        <div class="block-for-right-border">
                            <div class="row">
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                

                                    <div class="post-topheader__info" data-username="wanyoung"
                                         data-userslug="wanyoung"
                                         data-useravatar="https://avatar-static.segmentfault.com/374/773/3747734741-1030000000516766_big64">


                                        <div class="article__author clearfix">
                                            <div class="article__authorleft">
                                                <a href="/u/wanyoung">
                                                    <img class="avatar-40" src="https://avatar-static.segmentfault.com/374/773/3747734741-1030000000516766_big64" alt="wanyoung">
                                                </a>
                                            </div>
                                            <div class="article__authorright">
                                                <div class="article__authormeta">
                                                <a href="/u/wanyoung" class="mr5 "><strong>wanyoung</strong></a>

                                                                                                <img src="https://static.segmentfault.com/v-5bebf0aa/global/img/rp.svg" class="mr5"><span style="color:#BF7158" class="mr10">2k</span>

                                                                                                发布于
                                                <a href="/blog/wanyoung">young</a>
                                                
                                                
                                                <span class="hidden-xs">
                                                                                                                                                          <button type="button"
                                                               class="btn btn-xs btn-success follow-article ml10"
                                                               data-do="follow"
                                                               data-type="blog"
                                                               data-id="1200000000533048">关注专栏
                                                       </button>
                                                                                                                                                   </span>
                                                </div>
                                                
                                                <span style="display: block">
                                                    2015-11-21 发布
                                                </span>
                                            </div>
                                        </div>

                                        <h1 class="h1 post-topheader__info--title" id="articleTitle" data-id="1190000004025274">
                                            <a href="/a/1190000004025274"> [译] 属性访问、特性和描述符 1</a>
                                        </h1>

                                        <div class="content__tech hidden-xs">
                                            <a href="" class="blog-type-common blog-type-0-before" target="_blank" data-content="
                                                                                        翻译自 
                                                                                        "></a>
                                            
                                            <ul class="taglist--inline inline-block article__title--tag mr10">
                                                                                                    <li class="tagPopup mb5">
                                                        <a class="tag" href="/t/python/blogs" data-toggle="popover"
                                                                                data-img="https://avatar-static.segmentfault.com/378/252/3782524817-1040000000089534_big64" data-placement="top"
                                                                                data-original-title="python"
                                                                                data-id="1040000000089534">
                                                                                                                    <img src="https://avatar-static.segmentfault.com/252/177/2521771040-54cb53b372821_small">
                                                                                                                      python
                                                        </a>
                                                    </li>
                                                                                                    <li class="tagPopup mb5">
                                                        <a class="tag" href="/t/python3.x/blogs" data-toggle="popover"
                                                                                data-img="" data-placement="top"
                                                                                data-original-title="python3.x"
                                                                                data-id="1040000000174563">
                                                                                                                      python3.x
                                                        </a>
                                                    </li>
                                                                                            </ul>

                                            <span>
                                                1.7k 次阅读
                                                &nbsp;&middot;&nbsp;
                                                读完需要 46 分钟 
                                                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div><!-- end .post-topheader -->

                <div class="visible-lg">
                    <div class="side-widget">
                        <div class="stream__item-zan btn btn-default mt0 mb15 ml0 mr0 pt0 pb0 pl0 pr0 " id="side-widget-votes-btn">
                            <span class="stream__item-zan-icon"></span>
                            <span class="stream__item-zan-number" id="side-widget-votes-num">1</span>
                        </div>

                        <i class="fa fa-bookmark item " id="side-widget-bookmarks-btn"></i>
                        <i class="fa fa-weibo item"></i>
                        <i class="fa fa-weixin item" data-toggle="popover" data-placement="right"></i>
                        <i class="fa fa-twitter item"></i>
                        <i class="fa fa-facebook item"></i>
                        <i class="fa fa-arrow-up item hidden"></i>
                    </div>
                </div>

                
                <div class="article fmt article__content" data-id="1190000004025274" data-license="cc">
                    
<blockquote><p>注：原书作者 Steven F. Lott，原书名为 Mastering Object-oriented Python</p></blockquote>
<p>对象就是一些特性的集合，包括方法和属性。<code>object</code>类的默认行为包括设置、获取和删除属性。我们经常需要修改这些行为来改变一个对象的属性。</p>
<p>本章将重点关注以下五个层次的字段访问：</p>
<ul>
<li><p>内置字段的处理，这是最简单的，但最不精明的选择。</p></li>
<li><p>回顾一下<code>@property</code>装饰器。特性扩展了属性的概念，把处理过程包含到了已定义的方法函数中。</p></li>
<li><p>如何利用低级别的特殊方法去控制属性访问方法：<code>__getattr__()</code>、<code>__setattr__()</code>和<code>__delattr__()</code>。这些特殊的方法允许我们构建更复杂的属性处理。</p></li>
<li><p>了解<code>__getattribute__()</code>方法，它提供了更细粒度的属性控制。这可以让我们写不寻常的属性处理。</p></li>
<li><p>最后，我们将看看描述符。这些都是用来访问一个属性的，但它们涉及到更复杂的设计决策。在Python中大量使用描述符来实现特性、静态方法和类方法。</p></li>
</ul>
<p>在这一章，我们将会看到默认处理如何工作的细节。我们需要决定何时何地来覆写默认行为。在某些情况下，我们希望我们的属性不仅仅是实例化变量。在其他情况下，我们可能想要防止属性的添加。我们的属性可能有更复杂的行为。</p>
<p>同样，在我们探索了解描述符时，我们将更深入的理解Python的内部是怎样工作的。我们不需要经常显式的使用描述符。我们经常隐式的使用它们，因为它们是实现Python一些特性的机制。</p>
<h2><strong>基本属性处理</strong></h2>
<p>默认情况下，我们创建的任何类对属性都将允许以下四个行为：</p>
<ul>
<li><p>通过设置值来创建一个新的属性</p></li>
<li><p>给存在的属性设置值</p></li>
<li><p>获取属性的值</p></li>
<li><p>删除属性</p></li>
</ul>
<p>我们可以使用像下面代码这样简单的表示。创建一个简单的、通用的类和该类的一个对象：</p>
<pre><code>&gt;&gt;&gt; class Generic:
...     pass
...
&gt;&gt;&gt; g = Generic()</code></pre>
<p>前面的代码允许我们创建、获取、设置和删除属性。我们可以轻松地创建和获取一个属性。以下是一些示例：</p>
<pre><code>&gt;&gt;&gt; g.attribute = "value"
&gt;&gt;&gt; g.attribute
'value'
&gt;&gt;&gt; g.unset
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
AttributeError: 'Generic' object has no attribute 'unset'
&gt;&gt;&gt; del g.attribute
&gt;&gt;&gt; g.attribute
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
AttributeError: 'Generic' object has no attribute 'attribute'</code></pre>
<p>我们可以添加、更改和删除属性。如果我们试图获取一个未设置的属性或删除一个不存在的属性时会发生异常。</p>
<p>稍微更好的方法就是使用<code>types.SimpleNamespace</code>类的一个实例。设置特性是一样的，但是我们不需要创建额外的类定义。我们创建一个<code>SimpleNamespace</code>类对象来代替，如下：</p>
<pre><code>&gt;&gt;&gt; import types
&gt;&gt;&gt; n = types.SimpleNamespace()</code></pre>
<p>在以下代码中，我们可以看到为<code>SimpleNamespace</code>类工作的相同用例：</p>
<pre><code>&gt;&gt;&gt; n.attribute = "value"
&gt;&gt;&gt; n.attribute
'value'
&gt;&gt;&gt; del n.attribute
&gt;&gt;&gt; n.attribute
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
AttributeError: 'namespace' object has no attribute 'attribute'</code></pre>
<p>我们可以为这个对象创建属性。任何试图使用未定义的属性都会抛出异常。当我们创建一个<code>object</code>类实例时<code>SimpleNamespace</code>会有不同的行为。一个简单的<code>object</code>类实例不允许创建新的属性；它缺乏内部<code>__dict__</code>结构，Python会保存属性和值到该结构里面。</p>
<h3><strong>1、属性和__init__()方法</strong></h3>
<p>大多数时候，我们使用类的<code>__init__()</code>方法来创建一系列的初始属性。理想情况下，我们为<code>__init__()</code>中所有属性提供默认值。</p>
<p><strong>不</strong>需要提供所有属性到<code>__init__()</code>方法。正因为如此，存在或不在的属性可以作为一个对象状态的一部分。</p>
<p>一个可选属性可以超越类定义的限制。对于一个类来说，有一组好的属性定义意义甚大。通过创建一个子类或父类，属性通常可以更清晰地被添加（或删除）。</p>
<p>因此，可选属性意味着一种非正式的子类关系。因此，当我们使用可选属性时会碰到可怜的多态性。</p>
<p>思考一下21点游戏，只有允许一次分牌。如果一手牌已经分牌，就不能再分牌。有几种方法，我们可以模拟一下：</p>
<ul>
<li><p>我们可以由<code>Hand.split()</code>方法创建一个<code>SplitHand</code>子类。在此我们不详细展示。</p></li>
<li><p>我们可以在<code>Hand</code>对象中创建一个状态属性，由<code>Hand.split()</code>方法创建。理想情况下，这是一个布尔值，但是我们可以实现它作为一个可选属性。</p></li>
</ul>
<p>下面是通过一个可选属性检测可分离和不可分离的<code>Hand.split()</code>：</p>
<pre><code class="python">def split(self, deck):
    assert self.cards[0].rank == self.cards[1].rank
    try:
        self.split_count
        raise CannotResplit
    except AttributeError:
        h0 = Hand(self.dealer_card, self.cards[0], deck.pop())
        h1 = Hand(self.dealer_card, self.cards[1], deck.pop())
        h0.split_count = h1.split_count = 1
    return h0, h1</code></pre>
<p>实际上，<code>split()</code>方法是检测是否有<code>split_count</code>属性。如果有这个属性，则是已经分牌的手牌且该方法抛出异常。如果<code>split_count</code>属性不存在，允许分牌。</p>
<p>一个可选属性的优势是使<code>__init__()</code>方法有相对整洁的状态标识。劣势是模糊了对象的状态。使用<code>try:</code>块来确定对象状态可能会变得非常混乱，我们应该避免。</p>
<h2><strong>创建特性</strong></h2>
<p>特性是一个方法函数，它（语法上）看上去像一个简单的属性。我们可以获取、设置和删除特性值就像我们如何获取、设置和和删除属性值一样。这里有一个重要的区别，特性实际上是一个函数且可以处理，而不是简单地保存一个引用到一个对象。</p>
<p>除了更加尖端之外，特性和属性之间的另一个差别就是我们不能轻易将新特性附加到现有对象上；然而，默认情况下我们可以地轻易给对象添加属性。在这方面特性和简单的属性是不一样的。</p>
<p>有两种方法创建特性。我们可以使用<code>@property</code>装饰器或者我们可以使用<code>property()</code>函数。纯粹是语法的差异。我们将更多的关注装饰器。</p>
<p>我们看看特性的两个基本设计模式：</p>
<ul>
<li><p><strong>及早计算：</strong>在这个设计模式中，当我们通过特性设置一个值时，其他属性也同样计算。</p></li>
<li><p><strong>延迟计算：</strong>在这个设计模式中，计算将被推迟直到需要的时候，通过特性。</p></li>
</ul>
<p>为了比较前两种特性处理，我们将分割<code>Hand</code>对象的常见的特性到一个抽象父类，如下所示：</p>
<pre><code class="python">class Hand:

    def __str__(self):
        return ", ".join(map(str, self.card))

    def __repr__(self):
        return "{__class__.__name__}({dealer_card!r}, {_cards_str})"
        .format(__class__=self.__class__, _cards_str=", "
        .join(map(repr, self.card)), **self.__dict__)</code></pre>
<p>在前面的代码中，我们只是定义了一些字符串表示方法。</p>
<p>下面是<code>Hand</code>的一个子类，<code>total</code>是一个延迟属性，只有在需要的时候进行计算：</p>
<pre><code class="python">class Hand_Lazy(Hand):

    def __init__(self, dealer_card, *cards):
        self.dealer_card = dealer_card
        self._cards = list(cards)

    @property
    def total(self):
        delta_soft = max(c.soft-c.hard for c in self._cards)
        hard_total = sum(c.hard for c in self._cards)
        if hard_total + delta_soft &lt;= 21:
            return hard_total + delta_soft
        return hard_total

    @property
    def card(self):
        return self._cards

    @card.setter
    def card(self, aCard):
        self._cards.append(aCard)

    @card.deleter
    def card(self):
        self._cards.pop(-1)</code></pre>
<p><code>Hand_Lazy</code>类初始化一个带有一组<code>Cards</code>对象的<code>Hand</code>对象。<code>total</code>特性是一个只有在需要的时候计算总和的方法。此外，我们定义了一些其他特性更新手中的牌。<code>Card</code>属性可以获取、设置或删除手中的牌。我们将在<code>setter</code>和<code>deleter</code>属性章节看到这些。</p>
<p>我们可以创建一个<code>Hand</code>对象，<code>total</code>作为一个简单的属性出现：</p>
<pre><code>&gt;&gt;&gt; d = Deck()
&gt;&gt;&gt; h = Hand_Lazy(d.pop(), d.pop(), d.pop())
&gt;&gt;&gt; h.total
19
&gt;&gt;&gt; h.card = d.pop()
&gt;&gt;&gt; h.total
29</code></pre>
<p>在每次需要总和的时候，通过重新扫描手中的牌延迟计算。这可是非常昂贵的开销。</p>
<h3>1、及早计算属性</h3>
<p>以下是<code>Hand</code>的一个子类，<code>total</code>是一个简单的属性，它会在每张牌被添加后立即计算：</p>
<pre><code class="python">class Hand_Eager(Hand):

    def __init__(self, dealer_card, *cards):
        self.dealer_card = dealer_card
        self.total = 0
        self._delta_soft = 0
        self._hard_total = 0
        self._cards = list()
        for c in cards:
            self.card = c

    @property
    def card(self):
        return self._cards

    @card.setter
    def card(self, aCard):
        self._cards.append(aCard)
        self._delta_soft = max(aCard.soft - aCard.hard, self._delta_soft)
        self._hard_total += aCard.hard
        self._set_total()

    @card.deleter
    def card(self):
        removed = self._cards.pop(-1)
        self._hard_total -= removed.hard
        # Issue: was this the only ace?
        self._delta_soft = max(c.soft - c.hard for c in self._cards)
        self._set_total()

    def _set_total(self):
        if self._hard_total+self._delta_soft &lt;= 21:
            self.total = self._hard_total + self._delta_soft
        else:
            self.total = self._hard_total</code></pre>
<p>在这种情况下，每添加一张牌，<code>total</code>属性就会更新。</p>
<p>其他<code>Card</code>——<code>deleter</code>特性——及早地更新<code>total</code>属性无论牌在何时被删除。我们将在下一节详细查看<code>deleter</code>。</p>
<p>客户端认为这两个子类之间的语法相同（<code>Hand_Lazy()</code>和<code>Hand_Eager()</code>）</p>
<pre><code class="python">d = Deck()
h1 = Hand_Lazy(d.pop(), d.pop(), d.pop())
print(h1.total)
h2 = Hand_Eager(d.pop(), d.pop(), d.pop())
print(h2.total)</code></pre>
<p>在这两种情况下，客户端软件简单的使用<code>total</code>字段。</p>
<p>使用特性的优势是，当实现改变时语法没有改变。我们可以做一个类似<code>getter/setter</code>简单要求的方法函数。然而，<code>getter/setter</code>方法函数涉及到并没有什么用处的额外语法。以下是两个例子，其中一个是使用<code>setter</code>方法，另一个是使用赋值运算符：</p>
<pre><code class="python">obj.set_something(value)
obj.something = value</code></pre>
<p>赋值运算符（=）的存在意图很简单。许多程序员发现赋值语句比<code>setter</code>方法函数看起来更清晰。</p>
<h3>2、<code>setter</code>和<code>deleter</code>特性</h3>
<p>在前面的例子中，我们定义了<code>Card</code>特性来处理额外的牌到<code>Hand</code>类对象。</p>
<p>自从<code>setter</code>（和<code>deleter</code>）属性的创建来自<code>getter</code>，我们必须经常定义<code>getter</code>特性使用如下代码：</p>
<pre><code class="python">@property
def card(self):
    return self._cards

@card.setter
def card(self, aCard):
    self._cards.append(aCard)

@card.deleter
def card(self):
    self._cards.pop(-1)</code></pre>
<p>这允许我们用一条简单的语句添加一张牌到手中像下面这样：</p>
<pre><code class="python">h.card = d.pop()</code></pre>
<p>前面的赋值语句有一个缺点，因为它看起来像一张牌替代了所有的牌。另一方面，它也有一个优势，因为它使用简单赋值来更新一个可变对象的状态。我们可以使用<code>__iadd__()</code>特殊方法，这样做更简洁。但我们会等到第七章《创建数字》引入其他特殊方法。</p>
<p>我们当前的例子，没有令人信服的理由来使用<code>deleter</code>特性。即使没有一个令人信服的理由，还是有一些<code>deleter</code>用法。无论如何，我们还可以利用它来删除最后一张处理过的牌。这可以用作分牌过程的一部分。</p>
<p>我们可以思考一下以下版本的<code>split()</code>，如下代码显示：</p>
<pre><code class="python">def split(self, deck):
    """Updates this hand and also returns the new hand."""
    assert self._cards[0].rank == self._cards[1].rank
    c1 = self._cards[-1]
    del self.card
    self.card = deck.pop()
    h_new = self.__class__(self.dealer_card, c1, deck.pop())
    return h_new</code></pre>
<p>前面的方法更新给定的手牌并返回新的<code>Hand</code>对象。下面是一个分牌的例子：</p>
<pre><code>&gt;&gt;&gt; d = Deck()
&gt;&gt;&gt; c = d.pop()
&gt;&gt;&gt; h = Hand_Lazy(d.pop(), c, c) # Force splittable hand
&gt;&gt;&gt; h2 = h.split(d)
&gt;&gt;&gt; print(h)
2♠, 10♠
&gt;&gt;&gt; print(h2)
2♠, A♠</code></pre>
<p>一旦我们有两张牌，我们可以使用<code>split()</code>产生第二个手牌。一张牌从最初的手牌中被移除。</p>
<p>这个版本的<code>split()</code>当然是可行的。然而，似乎有所好转的使用<code>split()</code>方法返回两个新的<code>Hand</code>对象。这样，旧的、预分牌的<code>Hand</code>实例可以用作收集统计数据。</p>
<h2><strong>对属性访问使用特殊方法</strong></h2>
<p>我们来看看这三个规范的访问属性的特殊方法：<code>getattr()</code>、<code>setattr()</code>和<code>delattr()</code>。此外，我们会知道<code>__dir__()</code>方法会显示属性名称。我们推迟到下一节来介绍<code>__getattribute__()</code>。</p>
<p>第一节默认行为的展示如下：</p>
<ul>
<li><p><code>__setattr__()</code>方法将创建并设置属性。</p></li>
<li><p><code>__getattr__()</code>方法将做两件事。首先，如果一个属性已经有值，<code>__getattr__()</code>不使用，只是返回属性值。其次，如果属性没有值，那么<code>__getattr__()</code>会有机会返回有意义的值。如果没有属性，它一定会抛出一个<code>AttributeError</code>异常。</p></li>
<li><p><code>__delattr__()</code>方法删除一个属性。</p></li>
<li><p><code>__dir__()</code>方法返回属性名称列表。</p></li>
</ul>
<p><code>__getattr__()</code>方法函数在更大的处理过程中只有一个步骤；只有当属性是未知的才会去使用。如果属性是已知的，不使用这种方法。<code>__setattr__()</code>和<code>__delattr__()</code>方法没有内置的处理。这些方法不与额外的处理过程进行交互。</p>
<p>对于控制属性访问我们有许多设计可选。这根据我们的三个基本设计来选择是扩展、包装或发明。选择如下：</p>
<ul>
<li><p>我们可以扩展一个类，通过重写<code>__setattr__()</code>和<code>__delattr__()</code>使它几乎不可变。我们也可以通过<code>__slots__</code>替换内部的<code>__dict__</code>。</p></li>
<li><p>我们可以包装类和委托属性访问到即将包装的对象(或复合对象)。这可能涉及到覆写所有三种方法。</p></li>
<li><p>我们可以在一个类中实现类特性行为。使用这些方法，我们可以确保所有属性集中处理。</p></li>
<li><p>我们可以创建延迟属性值尽管它的值在需要的时候没有（或不能）计算。可能会有一个属性没有值，直到从文件、数据库或网络中读取到。这对于<code>__getattr__()</code>是常用用法。</p></li>
<li><p>我们可以有及早属性，在其他属性中自动设置时创建一个属性值。这是通过覆写<code>__setattr__()</code>做到的。</p></li>
</ul>
<p>我们不会看所有这些选择。相反，我们将关注两个最常用的技术：扩展和包装。我们将创建不可变对象，看看其他方法来及早计算特性值。</p>
<h3>1、通过<code>__slots__</code>创建不可变对象</h3>
<p>如果我们不能够设置一个属性或创建一个新的，且对象是不可变的。则以下是我们希望在交互式Python中所能够看到的：</p>
<pre><code>&gt;&gt;&gt; c = card21(1,'♠')
&gt;&gt;&gt; c.rank = 12
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "&lt;stdin&gt;", line 30, in __setattr__
TypeError: Cannot set rank
&gt;&gt;&gt; c.hack = 13
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "&lt;stdin&gt;", line 31, in __setattr__
AttributeError: 'Ace21Card' has no attribute 'hack'</code></pre>
<p>前面的代码显示，我们是不允许改变这个对象的属性或添加一个到这个对象种。</p>
<p>为了让此操作可以顺利工作我们需要变化这个类定义中的两个地方。我们将忽略很多类，只关注三个特性，使一个对象不可变，如下所示：</p>
<pre><code class="python">class BlackJackCard:
    """Abstract Superclass"""
    __slots__ = ('rank', 'suit', 'hard', 'soft')
    def __init__(self, rank, suit, hard, soft):
        super().__setattr__('rank', rank)
        super().__setattr__('suit', suit)
        super().__setattr__('hard', hard)
        super().__setattr__('soft', soft)

    def __str__(self):
        return "{0.rank}{0.suit}".format(self)

    def __setattr__(self, name, value):
        raise AttributeError("'{__class__.__name__}' has no attribute '{name}'"
        .format(__class__ = self.__class__, name = name))</code></pre>
<p>我们做了三个重要的变动：</p>
<ul>
<li><p>我们设置<code>__slots__</code>到只被允许的属性。这个将关闭对象内部<code>__dict__</code>的特性且允许限制属性。</p></li>
<li><p>我们定义的<code>__setattr__()</code>会引发一个异常比不做任何事有用的多。</p></li>
<li><p>我们定义<code>__init__()</code>使用的超类版本的<code>__setattr__()</code>这样值就可以正确设置，尽管这个类中缺少了正常工作的<code>__setattr__()</code>方法。</p></li>
</ul>
<p>小心一些，如果这样做我们可以绕过不变性特性。</p>
<pre><code class="python">object.__setattr__(c, 'bad', 5)</code></pre>
<p>这给我们带来了一个问题。我们如何防止“邪恶的”程序员绕过不变性特性？这个问题是愚蠢的。我们并不能阻止邪恶的程序员。另一个同样愚蠢的问题是，为什么一些邪恶的程序员写代码来规避不变性？我们并不能阻止邪恶的程序员做邪恶的事情。</p>
<p>如果这个虚构的程序员不喜欢类中的不变性，他们可以修改类的定义来删除重新定义的<code>__setattr__()</code>。不可变对象的重点是保证<code>__hash__()</code>返回一个一致的值，而不是阻止人们写烂的代码。</p>
<p><strong>不要滥用<code>__slots__</code></strong></p>
<p><code>__slots__</code>特性的主要目的是通过限制字段的数量来节省内存。</p>
<h3>2、创建不可变对象作为元组的子类</h3>
<p>我们也可以通过给<code>Card</code>属性一个元组子类并覆写<code>__getattr__()</code>来创建一个不可变对象。在这种情况下，我们将翻译<code>__getattr__(name)</code>请求为<code>self[index]</code>请求。在第六章《创建容器和集合》中我们将看到，<code>self[index]</code>是由<code>__getitem__(index)</code>来实现的。</p>
<p>下面是内置<code>tuple</code>类的一个小扩展：</p>
<pre><code class="python">class BlackJackCard2(tuple):

    def __new__(cls, rank, suit, hard, soft):
        return super().__new__(cls, (rank, suit, hard, soft))

    def __getattr__(self, name):
        return self[{'rank':0, 'suit':1, 'hard':2 , 'soft':3}[name]]

    def __setattr__(self, name, value):
        raise AttributeError</code></pre>
<p>在本例中，我们只是简单的抛出了<code>AttributeError</code>异常而不是提供详细的错误消息。</p>
<p>当我们使用前面的代码中，我们看到以下交互：</p>
<pre><code>&gt;&gt;&gt; d = BlackJackCard2('A', '♠', 1, 11)
&gt;&gt;&gt; d.rank
'A'
&gt;&gt;&gt; d.suit
'♠'
&gt;&gt;&gt; d.bad = 2
Traceback (most recent call last):
  File "&lt;stdin&gt;", line 1, in &lt;module&gt;
  File "&lt;stdin&gt;", line 7, in __setattr__AttributeError</code></pre>
<p>我们不能轻易的改变牌值。然而，我们仍然可以调整<code>d.__dict__</code>来引入<strong>额外的</strong>属性。</p>
<p><strong>有这必要吗</strong></p>
<p>也许，简单的工作可以确保对象不是不小心误用。实际上，我们对从异常得到的诊断信息和跟踪，比我们在极其安全的不可变类中更感兴趣。</p>
<h3>3、及早计算属性</h3>
<p>我们可以定义一个对象，它的属性在设置值后尽可能快的及早计算。对象最优访问就是进行一次计算结果多次使用。</p>
<p>我们能够定义很多的<code>setter</code>特性来做这些。然而，过多的<code>setter</code>特性，每个属性都计算，会使得计算变得冗长复杂。</p>
<p>我们可以集中式的进行属性处理。在接下来的例子中，我们将对其调整来扩展Python的内部<code>dict</code>类型。扩展<code>dict</code>的优点是，它能够很好地处理字符串的<code>format()</code>方法。同时，我们不必过多担心设置额外的被忽略的属性值。</p>
<p>我们希望类似下面的代码：</p>
<pre><code>&gt;&gt;&gt; RateTimeDistance(rate=5.2, time=9.5)
{'distance': 49.4, 'time': 9.5, 'rate': 5.2}
&gt;&gt;&gt; RateTimeDistance(distance=48.5, rate=6.1)
{'distance': 48.5, 'time': 7.950819672131148, 'rate': 6.1}</code></pre>
<p>我们可以在<code>RateTimeDistance</code>对象中设置值。额外的属性可以很轻松的被计算。我们可以一次性做到这些，如下代码所示：</p>
<pre><code>&gt;&gt;&gt; rtd = RateTimeDistance()
&gt;&gt;&gt; rtd.time = 9.5
&gt;&gt;&gt; rtd
{'time': 9.5}
&gt;&gt;&gt; rtd.rate = 6.24
&gt;&gt;&gt; rtd
{'distance': 59.28, 'time': 9.5, 'rate': 6.24}</code></pre>
<p>下面是内置<code>dict</code>类型的扩展。我们扩展了基本<code>dict</code>映射用来实现计算缺失的属性：</p>
<pre><code class="python">class RateTimeDistance(dict):

    def __init__(self, *args, **kw):
        super().__init__(*args, **kw)
        self._solve()

    def __getattr__(self, name):
        return self.get(name,None)

    def __setattr__(self, name, value):
        self[name] = value
        self._solve()

    def __dir__(self):
        return list(self.keys())

    def _solve(self):
        if self.rate is not None and self.time is not None:
            self['distance'] = self.rate * self.time
        elif self.rate is not None and self.distance is not None:
            self['time'] = self.distance / self.rate
        elif self.time is not None and self.distance is not None:
            self['rate'] = self.distance / self.time</code></pre>
<p><code>dict</code>类型使用<code>__init__()</code>来填充内部字典，然后试图解决当前数据太多的问题。它使用<code>__setattr__()</code>来添加新项目到字典。它也试图在每次设置值的时候解答等式。</p>
<p>在<code>__getattr__()</code>中，在等式中我们使用<code>None</code>表明值的缺失。这允许我们设置一个字段为<code>None</code>表明它是一个缺失的值，这将迫使为此寻找解决方案。例如，我们可以基于用户输入或者一个网络请求，所有参数被赋予一个值，但一个变量设置为<code>None</code>。</p>
<p>我们可以如下使用：</p>
<pre><code>&gt;&gt;&gt; rtd = RateTimeDistance(rate=6.3, time=8.25, distance=None)
&gt;&gt;&gt; print("Rate={rate}, Time={time}, Distance={distance}".format(**rtd))
Rate=6.3, Time=8.25, Distance=51.975</code></pre>
<p>请注意，我们不能轻易地在这个类里面设置属性值。</p>
<p>让我们考虑下面这行代码：</p>
<pre><code class="python">self.distance = self.rate * self.time</code></pre>
<p>如果我们要编写之前的代码片段，我们会在<code>__setattr__()</code>和<code>_solve()</code>之间进行无限的递归调用。当我们使用<code>self['distance']</code>到这个例子中，我们避免了递归调用<code>__setattr__()</code>。</p>
<p>同样重要的是要注意，一旦设置了所有三个值，该对象不能轻易被改变来提供新的解决方案。</p>
<p>我们不能简单地给<code>rate</code>设置一个新值且计算<code>time</code>新值必须让<code>distance</code>不变。为了调整这个模型，我们需要清除一个变量以及为另一个变量设置一个新值：</p>
<pre><code>&gt;&gt;&gt; rtd.time = None
&gt;&gt;&gt; rtd.rate = 6.1
&gt;&gt;&gt; print("Rate={rate}, Time={time}, Distance={distance}".format(**rtd))
Rate=6.1, Time=8.25, Distance=50.324999999999996</code></pre>
<p>这里，我们清除<code>time</code>且改变<code>rate</code>得到一个新的解决方案来使用既定的<code>distance</code>值。</p>
<p>我们可以设计一个模型，跟踪设置变量的顺序；这一模型可以节省我们在设置另一个变量重新计算相关结果之前清除一个变量。</p>

                </div>
                                                
                <div class="clearfix mt10">
                    <ul class="article-operation list-inline pull-left mt15"><li><a target="_blank"href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><img class="mb5" src="https://static.segmentfault.com/v-5bebf0aa/global/img/creativecommons-cc.svg" height="20"/></a></li><li class="dropdown js__content-ops hidden-xs" data-module="article"
                                data-id="1190000004025274"
                                data-typetext="文章"><a href="javascript:void(0);" class="dropdown-toggle text-muted" data-toggle="dropdown"><i class="fa fa-ellipsis-h" aria-hidden="true"></i></a><ul class="dropdown-menu dropdown-menu-left"><li><a href="#911"
                                           data-toggle="modal"
                                           data-target="#911"
                                           data-action="report"
                                        >举报</a></li></ul></li></ul>
                    <div class="pull-right mt-10 hidden-xs">
                        <div class="widget-share__full" data-text="[译] 属性访问、特性和描述符 1"
 data-url="https://segmentfault.com/a/1190000004025274" data-shorturl="http://sfau.lt/b5q3jW"></div>


                    </div>
                </div>
                <div class="mt10 text-center mb30"><button type="button" id="mainLike" data-id="1190000004025274"
                                    class="btn btn-success btn-lg mr15 "><span id="mainLikeText">赞</span>&nbsp;&nbsp;<span class="seprator">|</span>&nbsp;&nbsp;
                                <span id="mainLikeNum">1 </span></button><button type="button" id="mainBookmark" data-type="article" data-id="1190000004025274"
                                    class="btn btn-default btn-lg "><span id="mainBookmarkText">收藏</span>&nbsp;&nbsp;<span class="seprator">|</span>&nbsp;&nbsp;<span id="mainBookmarkNum">7</span></button><br><button type="button" data-id="1190000004025274"
                                        class="btn btn-danger btn-lg mt15 article__reward-btn">
                                    赞赏支持
                                </button></div><div class="mt30 mb30 text-center article__reward-info"><span class="mr10">如果觉得我的文章对你有用，请随意赞赏</span></div>                
                                <script type='text/javascript'>
                    OA_show(3);
                </script>

                <h4 class="pt20 mb15 mt0 border-top">你可能感兴趣的</h4>

                
                <div class="mb15 block">
                    <script type='text/javascript'>
                        OA_show(4);
                    </script>
                </div>

                                <div id="paradigm-article-related"></div>

                
        <div class="comments--news comments--default comments--article 
    " 
    data-id="1190000004025274" data-user-id="" data-author-id="1030000000516766 "
         data-is-admin="null" id="goToReplyArea">
                    <div class="mb10 clearfix">
                <strong class="comments-stat pull-left mr10">评论</strong>

                                                    <div class="btn-group btn-group-xs pull-right comments-sort btn-group-menu" role="menu">
                        <a href="javascript:;" 
                           class="btn btn-default active" data-sort="default">默认排序</a>
                        <a href="javascript:;" 
                           class="btn btn-default" data-sort="desc">时间排序</a>
                    </div>
                            </div>
                <div class="comments-container">
                                <div class="comments-list">
            </div>
    <div class="comments-loading hide">载入中...</div>
        <div class="comments-more hide"><a href="javascript:;">显示更多评论</a></div>
    

                                    <div class="comments-box" id="goToReplyEditor">
                <div class="pull-left">
                    <img class="avatar-32 "
                         src="https://static.segmentfault.com/v-5bebf0aa/global/img/user-128.png"
                         alt=""/>
                </div>
                <div class="comments-box-content">
                    <form action="/api/article/1190000004025274/comments/add">
                        <div class="form-group mb0">
                            <textarea name="text" rows="3" class="form-control"placeholder="文明社会，理性评论"></textarea>
                            <div class="mt15 text-right">
                                <button type="button" class="hide"></button>
                                <button class=" btn btn-primary" type="button">发布评论</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
                                                        </div>
    </div>


                                    
                
                

            </div><!-- /.main -->


            <div class="col-md-3 side hidden-sm hidden-xs mt30">
                                                
                <div class="mb25 hidden-md hidden-sm hidden-xs">
    <img src="https://static.segmentfault.com/sponsor/20181120.png" alt="Planets" usemap ="#gridsMap" width=255 height=136>
    <map name="gridsMap" id="gridsMap"></map>
    <div style="text-align: center;"><a style="text-align:center; color:#9E9E9E; font-size:12px" href="/sponsor">想在上方展示你的广告？</a></div>
            <script async src="https://static.segmentfault.com/sponsor/20181120.js"></script>
    </div>

                                <style>
                    .job-recommend-area a:not(:last-of-type) {margin-bottom:10px; display: block}
                    .job-recommend-area a:hover {text-decoration: none;}
                </style>
                <div class="hidden-md">
                    <div class="job-recommend">
                      <h3 class="job-title">推广链接</h3>
                      <div class="job-recommend-area">
                                                <script type='text/javascript'>
                            OA_show(7);
                            OA_show(9);
                            OA_show(10);
                            OA_show(15);
                            OA_show(16);
                        </script>
                      </div>
                    </div>
                    <style>
                    .job-recommend {margin-bottom: 30px;}
                    .job-title {
                        font-size: 14px;
                        color: #017E66;
                        font-weight: 500;
                        background: #BFE6D7;
                        margin: 0;
                        padding-top: 6px;
                        padding-bottom: 6px;
                        text-align: center;
                    }
                    .job-recommend-area {
                      padding: 13px;
                      border: 3px solid #EBF7F3;
                      border-top: none;
                    }
                    </style>
                    
                                    </div>

                                
                <div class="hidden-md ad-should-be-fixed">
                    <div class="mb25 block">
                        <script type='text/javascript'>
                            OA_show(1);
                        </script>
                    </div>
                </div>
                <div class="post-nav hidden-xs">
                    <div class="panel panel-default widget-outline">
                        <div class="panel-heading">目录</div>
                        <div class="panel-body">
                            <div class="nav-body" style="overflow:scroll">
                                <div class="highlight-title"></div>
                                <ul class="articleIndex"></ul>
                            </div>
                        </div>
                    </div>
                </div>

                
            </div><!-- /.side -->
        </div>
    </div>
</div>

<div id="shareToWeiboModal" class="modal" tabindex='-1'>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">×</span><span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title">分享</h4>
            </div>
            <div class="modal-body">
                <p class="sfModal-content">
                    分享到微博？
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default dont-likeweibo" data-dismiss="modal">取消</button>
                <a href="" id="shareLink" class="btn btn-primary done-btn" target="_blank"
                   onclick="$('#shareToWeiboModal').modal('hide')">分享</a>
            </div>
        </div>
    </div>
</div>


<div class="modal widget-911" id="911" tabindex='-1'>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal" type="button">
          <span aria-hidden="true">&times;</span>
          <span class="sr-only">Close</span>
        </button>
        <h4 class="modal-title"><span data-model="action"></span><span data-model="type"></span></h4>
      </div>
      <div class="modal-body">
        <form id="reportForm">
          <!-- 后台返回信息 -->
          <p class="alert alert-warning" data-model="returnMsg"></p>
          <div data-role="base">
            <p>
              <strong class="required">我要<span data-model="action"></span>该<span data-model="type"></span>，理由是：</strong>
            </p>
            <ul class="list-unstyled" data-model="list"></ul>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-default pull-left" type="button" data-role="back" style="display:none">返回重选</button>
                <button class="btn btn-default" data-dismiss="modal" type="button">取消</button>
        <button class="btn btn-primary" data-role="submit" type="button">提交</button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<div class="modal widget-seo" id="seo" tabindex='-1'>
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button class="close" data-dismiss="modal" type="button">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title"><span data-model="action"></span><span data-model="type"></span></h4>
            </div>
            <div class="modal-body">
                <form id="seoForm">
                    <!-- 后台返回信息 -->
                    <p class="alert alert-warning" data-model="returnMsg"></p>
                    <div data-role="base">
                        <div class="form-group">
                            <label>SEO标题：</label><textarea style="min-height: 35px; width: 100%; max-height: 132px; overflow: hidden; overflow-wrap: break-word; height: 32px;" name="title" class="form-control" rows="1" placeholder="请输入SEO标题"></textarea>
                        </div>
                        <div class="form-group">
                            <label>SEO描述：</label><textarea style="min-height: 35px; max-height: 132px; overflow: hidden; overflow-wrap: break-word; height: 32px;" name="desc" class="form-control" rows="1" placeholder="请输入SEO描述"></textarea>
                        </div>
                        <div class="form-group">
                            <label>SEO keywords：</label><textarea style="min-height: 35px; max-height: 132px; overflow: hidden; overflow-wrap: break-word; height: 32px;" name="keywords" class="form-control" rows="1" placeholder="请输入SEO keywords"></textarea>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-default" data-dismiss="modal" type="button">取消</button>
                <button class="btn btn-primary" data-role="submit" type="button">提交</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

    <div id="loginBanner"  class="hidden-sm hidden-xs loginBanner">
    <div class="container">
        <div class="row">
            <div class="col-lg-6 col-md-7">
                <h1 class="title">在 SegmentFault，学习技能、解决问题</h1>
                <p class="desc">每个月，我们帮助 1000 万的开发者解决各种各样的技术问题。并助力他们在技术能力、职业生涯、影响力上获得提升。</p>
            </div>
            <div class="col-lg-3 col-lg-offset-3 col-md-4 col-md-offset-1">
                <form class="register-form clearfix" action="/api/user/phone/register">

                    
                    <a href="/user/register" class="SFLogin btn btn-lg btn-primary mr15">免费注册</a>
                    <a href="/user/login" class="SFRegister btn btn-lg btn-primary">立即登录</a>
                </form>
            </div>
        </div>
    </div>
    </div>






<footer id="footer">
    <div class="container">
        <div class="row hidden-xs">
            <dl class="col-sm-2 site-link">
                <dt>产品</dt>
                
                <dd><a href="/questions/hottest?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=热门问答">热门问答</a></dd>
                <dd><a href="/blogs/hottest?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=热门专栏">热门专栏</a></dd>
                <dd><a href="/lives?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=热门讲堂">热门讲堂</a></dd>
                <dd><a href="/events?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=最新活动">最新活动</a></dd>
                <dd><a href="/groups?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=圈子">圈子</a></dd>
                <dd><a href="/jobs?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=找工作">找工作</a></dd>
                <dd><a href="/app?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=product&utm_content=footer-links-hottest-questions&utm_term=app">移动客户端</a></dd>
                
            </dl>
            
            <dl class="col-sm-2 site-link">
                <dt>资源</dt>
                <dd><a href="/weekly?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-weekly&utm_term=每周精选">每周精选</a></dd>
                <dd><a href="/users?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-users&utm_term=用户排行榜">用户排行榜</a></dd>
                <dd><a href="/badges?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-badges&utm_term=徽章">徽章</a></dd>
                <dd><a href="/faq?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-faq&utm_term=帮助中心">帮助中心</a></dd>
                <dd><a href="/repu?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-repu&utm_term=声望与权限">声望与权限</a></dd>
                <dd><a href="/community?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-community&utm_term=社区服务中心">社区服务中心</a></dd>
                <dd><a href="https://docs.segmentfault.com?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=resource&utm_content=footer-links-docs&utm_term=开发手册">开发手册</a></dd>

   
            </dl>

            <dl class="col-sm-2 site-link">
                <dt>商务</dt>
                <dd><a href="https://business.segmentfault.com/services?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-services-rencai&utm_term=人才服务" target="_blank">人才服务</a></dd>
                <dd><a href="https://business.segmentfault.com/services?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-services-qiyeneixun&utm_term=企业服务" target="_blank">企业培训</a></dd>
                <dd><a href="https://business.segmentfault.com/services?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-services-huodongcehua&utm_term=活动策划" target="_blank">活动策划</a></dd>
                <dd><a href="https://business.segmentfault.com/ads?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-ads&utm_term=广告投放" target="_blank">广告投放</a></dd>
                <dd><a href="https://business.segmentfault.com/bc?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-bc&utm_term=区块链解决方案" target="_blank">区块链解决方案</a></dd>
                <dd><a href="https://business.segmentfault.com/contact?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=business&utm_content=footer-links-contact&utm_term=合作联系" target="_blank">合作联系</a></dd>
            </dl>
            
            <dl class="col-sm-2 site-link">
                <dt>关于</dt>
                <dd><a href="https://about.segmentfault.com/?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=about&utm_content=about-index&utm_term=关于我们">关于我们</a></dd>
                <dd><a href="https://about.segmentfault.com/careers.html?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=about&utm_content=about-careers&utm_term=加入我们">加入我们</a></dd>
                <dd><a href="https://about.segmentfault.com/contact.html?utm_source=sf-footer&utm_medium=footer-nav&utm_campaign=about&utm_content=about-contact&utm_term=联系我们">联系我们</a></dd>
            </dl>

            <dl class="col-sm-2 site-link">
                <dt>关注</dt>
                                <dd><a href="//segmentfault.com/blog/segmentfault" target="_blank">产品技术日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/community_admin" target="_blank">社区运营日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/segmentfault_news" target="_blank">市场运营日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/segmentfault_team" target="_blank">团队日志</a></dd>
                                <dd><a href="//segmentfault.com/blog/interview" target="_blank">社区访谈</a></dd>
                                <dd>
                    <ul class="sn-inline">
                        <li>
                            <a class="entypo-wechart icon-sn-weixin weixin-popover-qrcode" data-toggle="popover" data-placement="top"  data-content="">微信</a>
                        </li>
                        <li>
                            <a href="http://weibo.com/segmentfault" target="_blank" class="entypo-weibo icon-sn-weibo" >新浪微博</a>
                        </li>
                        <li>
                            <a href="https://github.com/SegmentFault" target="_blank" class="entypo-facebook icon-sn-github">Github</a>
                        </li>
                        <li>
                            <a href="https://twitter.com/segment_fault" target="_blank" class="entypo-twitter icon-sn-twitter">Twitter</a>
                        </li>
                    </ul>
                </dd>
            </dl>

            <dl class="col-sm-2 site-link" id="license">
                <dt>条款</dt>
                <dd><a href="/tos">服务条款</a></dd>
                <dd><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank">内容许可</a></dd>
                <dd>
                    <a href="/app" class="clearfix mt10 block"><img src="https://static.segmentfault.com/v-5bebf0aa/page/img/app/appQrcode.png" class="app-qrcode"></a>
                    <div class="app-download-desc">
                        <p>扫一扫下载 App</p>
                    </div>
                    
                </dd>
            </dl>
        </div>
        <div class="copyright">
            Copyright &copy; 2011-2018 SegmentFault. 当前呈现版本 17.06.16<br>
            <a href="http://www.miibeian.gov.cn/" rel="nofollow">浙ICP备 15005796号-2</a> &nbsp;
            <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602002000" rel="nofollow">浙公网安备 33010602002000号</a>
            <span class="ml5">杭州堆栈科技有限公司版权所有</span>
            <P class="mt30">CDN 存储服务由 <a target="_blank" href="https://www.upyun.com/?utm_source=segmentfault&utm_medium=link&utm_campaign=upyun&md=segmentfault">又拍云</a> 赞助提供 </p>
        </div>
        <p class="text-center">
            <a class="js__view--selector hidden-sm hidden-md hidden-lg" data-action="mobile" href="javascript:;">移动版</a>
            <a class="js__view--selector hidden-sm hidden-md hidden-lg" data-action="desktop" href="javascript:;">桌面版</a>
        </p>
    </div>
</footer>

<div id="fixedTools" class="hidden-xs hidden-sm">
    <a id="backtop" class="hidden border-bottom" href="#">回顶部</a>
</div>

    <script id="loginModal" type="text/template">
    <div class="row bg-white login-modal">
        <div class="col-md-12 login-wrap">
            <form action="/api/user/login" method="POST" role="form" class="mt15">
                <div class="form-group hidden">
                                        <input type="text" class="form-control" name="remember" value="1"
                           autocomplete="off">
                </div>
                <div class="form-group">
                    <label for="username" class="control-label">手机号 或 Email</label>
                    <input type="text" class="form-control" name="username" tabindex="1" required placeholder="11 位手机号 或 Email"
                           autocomplete="off">
                </div>
                <div class="form-group">
                    <label class="control-label">密码</label><span class="pull-right"><a
                                href="/user/forgot" tabindex="4">忘记密码</a></span>
                    <input type="password" class="form-control" name="password" tabindex="2" required placeholder="请输入密码">
                </div>
                <div class="form-group">
                    <a
                            
                                                    href="/user/phoneLogin"
                            class="phoneLogin"
                                            >手机验证码登录</a>
                </div>
                <div class="form-group clearfix">
                    <button type="submit" class="btn-block btn btn-primary pull-right pl20 pr20" tabindex="3"
                            onclick='ga("send", "event", "email login button", "clicked", "login modal");'>登录
                    </button>
                </div>
            </form>
            <div class="text-muted text-center more-login-area">
    <span class="more-login-words">更多登录方式</span>
</div>
<div class="widget-login mb15 text-center">
    <a href="/user/oauth/google" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "google"});'><span
                class="icon-sn-google"></span></a>
    <a href="/user/oauth/github" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "github"});");'><span
                class="icon-sn-github"></span></a>
    <a href="/user/oauth/weibo" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "weibo"});'><span
                class="icon-sn-weibo"></span></a>
    <a href="/user/oauth/qq" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-qq"></span></a>
    <a href="/user/oauth/weixin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-weixin"></span></a>
    <a href="/user/oauth/linkedin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "linkedin"});'><span
                class="icon-sn-linkedin"></span></a>
    <span id="loginShowMore" style="cursor: pointer" class="mb5"><span class="icon-sn-dotted"></span></span>
    <a href="/user/oauth/twitter" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "twitter"});'><span
                class="icon-sn-twitter"></span></a>
    <a href="/user/oauth/facebook" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "facebook"});'><span
                class="icon-sn-facebook"></span></a>
    <a href="/user/oauth/douban" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "douban"});'><span
                class="icon-sn-douban"></span></a>
</div>
<div class="form-group clearfix">
    <a class="btn-block btn btn-default pull-right pl20 pr20 
                        SFLogin
             "

            
        onclick='ga("send", "event", "email login button", "clicked", "login modal");'>
                    注册新账号
            </a>
</div>
<p class="text-muted text-center mb15">登录即表示你同意网站的<a href="/tos" target="_blank">《服务条款》</a></p>        </div>
    </div>
</script>
    <script id="registerModal" type="text/template">
    <div class="row bg-white login-modal">
        <div class="col-md-12 login-wrap">
            
            <form action="/api/user/register" method="POST" role="form" class="mt15">
                <div class="form-group">
                    <label for="name" class="control-label">你的名字</label>
                    <input type="text" class="form-control" name="name" required placeholder="真实姓名或常用昵称">
                </div>
                
                <div class="form-group">
                    <label for="mail" class="control-label">手机号 或 Email</label>
                    <input type="text" class="form-control" id="login-name" name="mail" required placeholder="11 位手机号 或 Email">
                </div>
                
                <input type="text" class="hidden" name="register_type" value="mail">

                <div class="form-group">
                    <div class="phone-register-only hidden">
                        <div class="captchaInput mb10">
                            <input type="text" class="form-control" name="cap" placeholder="右侧的验证码" style="width:50%; display: inline; margin-right: 15px;">
                            <span class="mt10">
                                <a id="loginReloadCaptcha" href="javascript:void(0)">
                                <img src="/user/captcha?w=135&h=34" class="cap" width="135" height="34"/></a>
                            </span>
                        </div>
                        <div class="input-group">
                            <input name="code" type="text" class="form-control js-user-login__phone-code-value" placeholder="短信验证码">
                            <span class="input-group-btn">
                                <button class="btn btn-default js-user-login__phone-vaild-btn" style="width:96px;" type="button">
                                获取验证码</button>
                            </span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="password" class="control-label">密码</label>
                    <input type="password" class="form-control" name="password" required placeholder="不少于 6 位的密码">
                </div>
                <div class="form-group clearfix">
                    <button type="submit" class="btn-block btn btn-primary pl20 pr20 pull-right"
                            onclick='ga("send", "event", "email register button", "clicked", "login modal");'>注册
                    </button>
                </div>
                                <div class="text-muted text-center more-login-area">
    <span class="more-login-words">更多登录方式</span>
</div>
<div class="widget-login mb15 text-center">
    <a href="/user/oauth/google" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "google"});'><span
                class="icon-sn-google"></span></a>
    <a href="/user/oauth/github" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "github"});");'><span
                class="icon-sn-github"></span></a>
    <a href="/user/oauth/weibo" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "weibo"});'><span
                class="icon-sn-weibo"></span></a>
    <a href="/user/oauth/qq" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-qq"></span></a>
    <a href="/user/oauth/weixin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-weixin"></span></a>
    <a href="/user/oauth/linkedin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "linkedin"});'><span
                class="icon-sn-linkedin"></span></a>
    <span id="loginShowMore" style="cursor: pointer" class="mb5"><span class="icon-sn-dotted"></span></span>
    <a href="/user/oauth/twitter" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "twitter"});'><span
                class="icon-sn-twitter"></span></a>
    <a href="/user/oauth/facebook" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "facebook"});'><span
                class="icon-sn-facebook"></span></a>
    <a href="/user/oauth/douban" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "douban"});'><span
                class="icon-sn-douban"></span></a>
</div>
<div class="form-group clearfix">
    <a class="btn-block btn btn-default pull-right pl20 pr20 
                        SFRegister
             "

            
        onclick='ga("send", "event", "email login button", "clicked", "login modal");'>
                    已有账号登录
            </a>
</div>
<p class="text-muted text-center mb15">登录即表示你同意网站的<a href="/tos" target="_blank">《服务条款》</a></p>            </form>
        </div>
    </div>
</script>
    <script id="phoneLoginModal" type="text/template">

    <div class="row bg-white login-modal phonelogin-modal">
        <div class="col-md-12 login-wrap">
            <form action="/api/user/phonelogin" method="POST" role="form" class="mt15">
                <div class="form-group">
                    <label for="phone" class="control-label required">手机号</label>
                    <input type="text" class="form-control phonelogin--phone" name="phone" tabindex="1" required placeholder="11 位手机号"
                           autocomplete="off">
                    <span class="help-block"></span>
                </div>

                <div class="form-group">
                    <label for="authCode" class="control-label required">验证码</label>
                    <div class="input-group">
                        <input type="text" class="form-control bindphone--code" name="authCode" placeholder="短信验证码">
                        <span class="input-group-btn">
                            <button class="btn btn-default user-bind__phone-vaild-btn" type="button">获取验证码</button>
                        </span>
                    </div>
                    <div class="col-sm-3"></div>
                </div>

                <div class="form-group">
                    <a 
                                                            href="/user/login"
                                class="SFRegister"
                                                >密码登录（手机号或 Email）</a>
                </div>
                <div class="form-group clearfix">
                    <button type="submit" class="btn-block btn btn-primary pull-right pl20 pr20" tabindex="3"
                            onclick='ga("send", "event", "email login button", "clicked", "login modal");'>登录
                    </button>
                </div>
            </form>
            <div class="text-muted text-center more-login-area">
    <span class="more-login-words">更多登录方式</span>
</div>
<div class="widget-login mb15 text-center">
    <a href="/user/oauth/google" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "google"});'><span
                class="icon-sn-google"></span></a>
    <a href="/user/oauth/github" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "github"});");'><span
                class="icon-sn-github"></span></a>
    <a href="/user/oauth/weibo" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "weibo"});'><span
                class="icon-sn-weibo"></span></a>
    <a href="/user/oauth/qq" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-qq"></span></a>
    <a href="/user/oauth/weixin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "qq"});'><span
                class="icon-sn-weixin"></span></a>
    <a href="/user/oauth/linkedin" class=""
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "linkedin"});'><span
                class="icon-sn-linkedin"></span></a>
    <span id="loginShowMore" style="cursor: pointer" class="mb5"><span class="icon-sn-dotted"></span></span>
    <a href="/user/oauth/twitter" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "twitter"});'><span
                class="icon-sn-twitter"></span></a>
    <a href="/user/oauth/facebook" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "facebook"});'><span
                class="icon-sn-facebook"></span></a>
    <a href="/user/oauth/douban" class=" hidden"
       onclick='ga("send", "event", "3rd login button", "clicked", "login modal", {media: "douban"});'><span
                class="icon-sn-douban"></span></a>
</div>
<div class="form-group clearfix">
    <a class="btn-block btn btn-default pull-right pl20 pr20 
                        SFLogin
             "

            
        onclick='ga("send", "event", "email login button", "clicked", "login modal");'>
                    注册新账号
            </a>
</div>
<p class="text-muted text-center mb15">登录即表示你同意网站的<a href="/tos" target="_blank">《服务条款》</a></p>        </div>
    </div>
</script>
<script id="bindPhoneModal" type="text/template">
    <div class="bg-white bindphone-model">
        <div class="alert alert-warning" role="alert">
            为了保证账号安全，请先绑定手机
        </div>
        <div>
            <form class="form-horizontal form__bindphone-apply" style="background-color:#fff;padding:0;">
                <div class="form-group ">
                    <label for="phoneNumber" class="col-sm-3 control-label required" >手机号码</label>
                    <div class="col-sm-6">
                        <input type="text" class="form-control bindphone--phone" id="phoneNumber" name="phone" placeholder="仅只支持大陆手机号">
                    </div>
                    <div class="col-sm-3"></div>
                </div>
                <div class="form-group">
                    <label for="authCode" class="col-sm-3 control-label required">验证码</label>
                    <div class="col-sm-6">
                        <div class="input-group">
                            <input type="text" class="form-control bindphone--code" name="code" placeholder="短信验证码">
                            <span class="input-group-btn">
                                <button class="btn btn-default user-bind__phone-vaild-btn" type="button">获取验证码</button>
                            </span>
                        </div>
                    </div>
                    <div class="col-sm-3"></div>
                </div>
            </form>
        </div>

    </div>
</script>


<script>
    window.serverTime = 1542689675000;
</script>

<script>
    (function (w) {
        w.SF = {
            staticUrl: "https://static.segmentfault.com/v-5bebf0aa"
        };
        w.SF.token = (function () {
    var _uY4U45q = //'f'
'9'+/* 'Shc'//'Shc' */''+//'7'
'42f'+'b'//'6'
+'d'//'J'
+//'t8'
'b'+//'XT'
'0'+//'I'
'7fa'+//'DPM'
'0d6'+''///*'W'*/'W'
+//'b'
'e0'+//'tpa'
'e63'+''///*'m'*/'m'
+//'B2'
'd7c'+'0f'//'9'
+'012'//'7Q'
+//'9'
'b63'+'74'//'7v'
, _hhnlW = [];

    for (var i = 0; i < _hhnlW.length; i ++) {
        _uY4U45q = _uY4U45q.substring(0, _hhnlW[i][0]) + _uY4U45q.substring(_hhnlW[i][1]);
    }

    return _uY4U45q;
})();;
    })(window);

                var lock = {
        type: "",
        text: '',
        table: {"ban_post":[1,"\u4f60\u5df2\u7ecf\u88ab\u7981\u8a00, \u65e0\u6cd5\u8fdb\u884c\u6b64\u64cd\u4f5c, \u5982\u6709\u7591\u4e49\u8bf7\u63d0\u4ea4\u7533\u8bc9, \u6216\u8005\u53d1\u90ae\u4ef6\u5230pr@segmentfault.com"]}
    };

        var ddosMode = false;
    
        (function (currentUrl) {
        if (typeof URL != 'undefined') {
            var baseUrl = new URL('https://segmentfault.com');

            if (baseUrl.protocol != currentUrl.protocol
                || baseUrl.host != currentUrl.host) {
                window.location.href = baseUrl.protocol + '//' + baseUrl.host
                    + currentUrl.pathname + currentUrl.search + currentUrl.hash;
            }
        }
    })(window.location);
    </script>

             <script crossorigin src="https://static.segmentfault.com/v-5bebf0aa/3rd/assets.js"></script>
                 
        <script crossorigin src="https://static.segmentfault.com/v-5bebf0aa/blog/script/post.min.js"></script>
            

<script>
if (!!navigator.userAgent.match(/MicroMessenger/i)) {
    require.config({
        paths: { weixin_jsapi: '//res.wx.qq.com/open/js/jweixin-1.2.0' }
    });

    require(['weixin_jsapi'], function (wx) {
        var share = {"title":"[\u8bd1] \u5c5e\u6027\u8bbf\u95ee\u3001\u7279\u6027\u548c\u63cf\u8ff0\u7b26 1","desc":"\u6ce8\uff1a\u539f\u4e66\u4f5c\u8005 Steven F. Lott\uff0c\u539f\u4e66\u540d\u4e3a Mastering Object-oriented Python","link":"https:\/\/segmentfault.com\/a\/1190000004025274","imgUrl":"https:\/\/avatar-static.segmentfault.com\/374\/773\/3747734741-1030000000516766_huge256"};
        share.title += ' - SegmentFault 思否';

        $.getJSON('/api/util/weixin/jsapi', function (o) {
            methods = o.data.jsApiList.slice();

            wx.config(o.data);
            wx.error(console.error);
            wx.ready(function () {
                methods.forEach(function (method) {
                    wx[method](share);
                });
            });
        });
    });
}
</script>

<script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-918487-8']);
    _gaq.push(['_trackPageview']);
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
        a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

                
        

            

    ga('create', 'UA-918487-8', 'auto', {
        'userID'
    : 0,
        'createdTime'
    : 0,
        'now'
    : 1542689676,
        'allowLinker'
    : true });
    ga('require', 'linker');
    ga('linker:autoLink', ['docs.segmentfault.com'] );
    ga('set', 'dimension1', 'guest');
    ga('send', 'pageview');

</script>

<script>
    var _hmt = _hmt || [];
    (function () {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?e23800c454aa573c0ccb16b52665ac26";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>



</body>
</html>

